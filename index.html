<!DOCTYPE html>
<html lang="ko">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9216314386092719" crossorigin="anonymous"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í¬ë¦½í†  íŠ¸ë ˆì´ë” - ëª¨ì˜íˆ¬ì ì‹œë®¬ë ˆì´í„°</title>
<style>
:root{--bg:#0b0f19;--card:#111827;--border:#1e2a3a;--text:#e5e7eb;--muted:#6b7280;--buy:#ef4444;--sell:#3b82f6;--profit:#22c55e;--loss:#ef4444;--accent:#f59e0b;--sidebar:320px;}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:'Segoe UI',-apple-system,BlinkMacSystemFont,'Noto Sans KR',sans-serif;min-height:100vh;font-size:15px;}

/* â”€â”€â”€ í—¤ë” â”€â”€â”€ */
header{display:flex;justify-content:space-between;align-items:center;padding:12px 28px;background:var(--card);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;}
.logo{font-size:16px;font-weight:900;line-height:1.05;letter-spacing:2px;background:linear-gradient(135deg,#f59e0b,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-transform:uppercase;}
.header-stats{display:flex;gap:28px;align-items:center;}
.stat{text-align:center;}
.stat-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;}
.stat-val{font-size:19px;font-weight:700;}
.stat-val.profit{color:var(--profit);}
.stat-val.loss{color:var(--loss);}

/* â”€â”€â”€ ì–¸ì–´ í† ê¸€ â”€â”€â”€ */
.lang-toggle{display:flex;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:20px;overflow:hidden;cursor:pointer;font-size:12px;font-weight:700;user-select:none;}
.lang-toggle span{padding:5px 10px;transition:all .2s;color:var(--muted);}
.lang-toggle span.active{background:var(--accent);color:#000;border-radius:18px;}

/* â”€â”€â”€ ì¹´ìš´íŠ¸ë‹¤ìš´ â”€â”€â”€ */
.timer-box{display:flex;flex-direction:column;align-items:center;background:linear-gradient(135deg,#1a1f2e,#0d1117);padding:10px 28px;border-radius:12px;min-width:120px;border:2px solid var(--accent);box-shadow:0 0 20px rgba(245,158,11,.15);}
.timer-label{font-size:11px;color:var(--accent);font-weight:600;letter-spacing:1px;text-transform:uppercase;}
.timer-val{font-size:52px;font-weight:900;color:var(--accent);font-variant-numeric:tabular-nums;line-height:1;text-shadow:0 0 20px rgba(245,158,11,.4);}
.timer-val.urgent{color:var(--loss);animation:blink .5s infinite;text-shadow:0 0 30px rgba(239,68,68,.6);}
@keyframes blink{50%{opacity:.3;}}
.turn-badge{font-size:13px;background:var(--accent);color:#000;padding:3px 10px;border-radius:4px;font-weight:700;}

/* â”€â”€â”€ ë©”ì¸ ë ˆì´ì•„ì›ƒ: ì‚¬ì´ë“œë°” + ì½”ì¸ ì˜ì—­ â”€â”€â”€ */
.main-layout{display:flex;gap:0;position:relative;}

/* â”€â”€â”€ ì™¼ìª½ ì‚¬ì´ë“œë°” (ê³ ì •) â”€â”€â”€ */
.sidebar{width:var(--sidebar);min-width:var(--sidebar);position:sticky;top:62px;height:calc(100vh - 62px);overflow-y:auto;background:#0d1117;border-right:1px solid var(--border);padding:16px;display:flex;flex-direction:column;gap:14px;z-index:50;}
.sidebar::-webkit-scrollbar{width:4px;}
.sidebar::-webkit-scrollbar-thumb{background:#1e2a3a;border-radius:2px;}

/* ì‚¬ì´ë“œë°” ì„¹ì…˜ ê³µí†µ */
.sb-section{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:14px;}
.sb-title{font-size:12px;font-weight:800;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;display:flex;align-items:center;gap:6px;}

/* í„´ ê²Œì´ì§€ */
.turn-gauge{margin-bottom:4px;}
.turn-gauge-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px;}
.turn-gauge-text{font-size:14px;font-weight:800;}
.turn-gauge-track{width:100%;height:14px;background:#1f2937;border-radius:7px;overflow:hidden;position:relative;}
.turn-gauge-fill{height:100%;border-radius:7px;transition:width .5s;background:linear-gradient(90deg,var(--accent),#eab308);}
.turn-gauge-fill.ending{background:linear-gradient(90deg,#ef4444,#f87171);}
.turn-gauge-marks{display:flex;justify-content:space-between;font-size:9px;color:#374151;margin-top:3px;}

/* ì†Œë“ìˆ˜ì¤€ */
.income-section .income-track{width:100%;height:12px;background:#1f2937;border-radius:6px;overflow:hidden;margin-bottom:4px;}
.income-section .income-fill{height:100%;border-radius:6px;transition:width .5s,background .5s;}
.income-section .income-info{display:flex;justify-content:space-between;align-items:center;}
.income-section .income-grade{font-size:14px;font-weight:800;}
.income-section .income-pct{font-size:12px;color:var(--muted);}
.income-ticks{display:flex;justify-content:space-between;font-size:8px;color:#374151;margin-top:2px;}

/* ë‰´ìŠ¤ íŒ¨ë„ (ì‚¬ì´ë“œë°” ë‚´) */
.news-card{background:#0d1117;border:1px solid var(--border);border-radius:8px;padding:10px;margin-bottom:8px;position:relative;overflow:hidden;transition:all .2s;}
.news-card:last-child{margin-bottom:0;}
.news-card:hover{border-color:#374151;}
.news-card.main-news{border-color:var(--accent);border-width:2px;background:linear-gradient(135deg,rgba(245,158,11,.06),#0d1117);}
.news-card.main-news .news-headline{font-size:15px;font-weight:700;line-height:1.4;color:#b0b8c4;}
.news-tag{display:inline-block;font-size:9px;font-weight:700;padding:2px 7px;border-radius:3px;margin-bottom:5px;text-transform:uppercase;letter-spacing:.5px;}
.news-tag.bullish{background:rgba(34,197,94,.15);color:#22c55e;border:1px solid rgba(34,197,94,.3);}
.news-tag.bearish{background:rgba(239,68,68,.15);color:#ef4444;border:1px solid rgba(239,68,68,.3);}
.news-tag.neutral{background:rgba(245,158,11,.15);color:#f59e0b;border:1px solid rgba(245,158,11,.3);}
.news-headline{font-size:13px;font-weight:600;line-height:1.3;margin-bottom:4px;color:#9ca3af;}
.news-coin-name{color:#ffffff;font-weight:900;}
.news-detail{font-size:11px;color:#4b5563;line-height:1.4;}
.news-coin-badge{display:inline-block;font-size:10px;font-weight:700;padding:2px 6px;border-radius:3px;background:rgba(255,255,255,.06);color:#6b7280;margin-top:4px;}
.news-impact{position:absolute;top:8px;right:8px;font-size:11px;font-weight:900;}
.news-impact.positive{color:var(--profit);}
.news-impact.negative{color:var(--loss);}
.sb-title::before{content:'';display:inline-block;width:8px;height:8px;background:var(--accent);border-radius:50%;animation:pulse-dot 1.5s infinite;}
@keyframes pulse-dot{0%,100%{opacity:1;}50%{opacity:.3;}}

/* â”€â”€â”€ ì˜¤ë¥¸ìª½ ì½”ì¸ ì˜ì—­ (2ì—´ ê·¸ë¦¬ë“œ) â”€â”€â”€ */
.coin-area{flex:1;padding:12px 16px 110px;overflow-y:auto;display:grid;grid-template-columns:1fr 1fr;gap:12px;align-content:start;}

/* ì½”ì¸ ì¹´ë“œ */
.coin-section{background:var(--card);border:1px solid var(--border);border-radius:10px;overflow:hidden;transition:border-color .3s;}
.coin-section.news-boost{border-color:rgba(34,197,94,.4);box-shadow:0 0 12px rgba(34,197,94,.1);}
.coin-section.news-crash{border-color:rgba(239,68,68,.4);box-shadow:0 0 12px rgba(239,68,68,.1);}
.coin-header{display:flex;align-items:center;padding:10px 12px;gap:10px;border-bottom:1px solid var(--border);}
.coin-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:15px;color:#fff;flex-shrink:0;}
.coin-title{flex:1;min-width:0;}
.coin-name{font-size:15px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.coin-sym{font-size:12px;color:var(--muted);}
.coin-price-area{text-align:right;flex-shrink:0;}
.coin-price{font-size:13px;font-weight:600;font-variant-numeric:tabular-nums;color:var(--muted);}

/* ë“±ë½ë¥  ê°•ì¡° */
.coin-change{font-size:15px;font-weight:900;padding:3px 8px;border-radius:5px;display:inline-block;margin-top:2px;letter-spacing:.5px;}
.coin-change.up{color:#22c55e;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);text-shadow:0 0 8px rgba(34,197,94,.3);}
.coin-change.down{color:#ef4444;background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);text-shadow:0 0 8px rgba(239,68,68,.3);}
.coin-change.big-up{font-size:17px;color:#22c55e;background:rgba(34,197,94,.25);border:2px solid rgba(34,197,94,.5);text-shadow:0 0 12px rgba(34,197,94,.5);animation:glow-green 1s ease-in-out infinite alternate;}
.coin-change.big-down{font-size:17px;color:#ef4444;background:rgba(239,68,68,.25);border:2px solid rgba(239,68,68,.5);text-shadow:0 0 12px rgba(239,68,68,.5);animation:glow-red 1s ease-in-out infinite alternate;}
@keyframes glow-green{to{box-shadow:0 0 16px rgba(34,197,94,.4);}}
@keyframes glow-red{to{box-shadow:0 0 16px rgba(239,68,68,.4);}}

.coin-hold{text-align:right;min-width:0;flex-shrink:0;}
.coin-hold-label{font-size:10px;color:var(--muted);}
.coin-hold-qty{font-size:18px;font-weight:800;color:var(--accent);font-variant-numeric:tabular-nums;}
.coin-hold-val{font-size:11px;color:var(--muted);}

/* ì°¨íŠ¸ */
.chart-area{padding:6px 12px;height:110px;position:relative;cursor:pointer;}
.chart-area:hover{background:rgba(255,255,255,.02);}
.chart-area canvas{width:100%;height:100%;}

/* â”€â”€â”€ ì½”ì¸ ìƒì„¸ ëª¨ë‹¬ â”€â”€â”€ */
.coin-detail-modal{position:fixed;inset:0;background:rgba(10,14,23,.95);z-index:250;display:flex;align-items:flex-start;justify-content:center;overflow-y:auto;padding:40px 16px;transition:opacity .3s;}
.coin-detail-modal.hidden{opacity:0;pointer-events:none;}
.scam-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.7);z-index:300;background:linear-gradient(135deg,#1a0000,#2d0a0a);border:2px solid #ef4444;border-radius:16px;padding:32px 40px;text-align:center;max-width:420px;width:90%;box-shadow:0 0 60px rgba(239,68,68,.4),0 0 120px rgba(239,68,68,.15);opacity:0;pointer-events:none;transition:all .4s cubic-bezier(.2,0,.2,1);}
.scam-popup.show{opacity:1;transform:translate(-50%,-50%) scale(1);pointer-events:auto;}
.scam-popup .sp-icon{font-size:48px;margin-bottom:12px;}
.scam-popup .sp-title{font-size:20px;font-weight:900;color:#ef4444;margin-bottom:8px;letter-spacing:1px;}
.scam-popup .sp-coin{color:#f59e0b;font-weight:900;font-size:22px;text-shadow:0 0 12px rgba(245,158,11,.5);}
.scam-popup .sp-msg{font-size:14px;color:#d1d5db;line-height:1.6;margin-top:10px;}
.scam-popup .sp-loss{font-size:16px;font-weight:800;color:#ef4444;margin-top:12px;}
.coin-detail-inner{background:var(--card);border:1px solid var(--border);border-radius:14px;width:100%;max-width:620px;overflow:hidden;}
.cd-header{display:flex;align-items:center;padding:14px 20px;gap:12px;border-bottom:1px solid var(--border);}
.cd-icon{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:16px;color:#fff;flex-shrink:0;}
.cd-title{flex:1;}.cd-name{font-size:18px;font-weight:800;}.cd-sym{font-size:12px;color:var(--muted);}
.cd-close{background:none;border:1px solid var(--border);border-radius:8px;color:var(--muted);font-size:18px;padding:6px 14px;cursor:pointer;flex-shrink:0;}
.cd-close:hover{background:#1a2332;color:var(--text);}
.cd-stats{display:flex;gap:8px;padding:12px 20px;border-bottom:1px solid var(--border);flex-wrap:wrap;}
.cd-stat{flex:1;min-width:70px;text-align:center;padding:6px;background:#0d1117;border-radius:6px;}
.cd-stat .cd-label{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;}
.cd-stat .cd-val{font-size:15px;font-weight:700;margin-top:2px;}
.cd-chart{padding:8px 12px;height:240px;}.cd-chart canvas{width:100%;height:100%;}
.cd-news{padding:14px 20px;}
.cd-news-title{font-size:12px;font-weight:800;color:var(--accent);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;}
.cd-news-item{padding:8px 0;border-bottom:1px solid var(--border);}
.cd-news-item:last-child{border-bottom:none;}
.cdn-row{display:flex;align-items:center;gap:6px;margin-bottom:2px;}
.cdn-turn{font-size:9px;color:var(--muted);font-weight:700;}
.cdn-tag{font-size:8px;font-weight:700;padding:1px 5px;border-radius:3px;}
.cdn-tag.bullish{background:rgba(34,197,94,.15);color:#22c55e;}
.cdn-tag.bearish{background:rgba(239,68,68,.15);color:#ef4444;}
.cdn-tag.neutral{background:rgba(245,158,11,.15);color:#f59e0b;}
.cdn-hl{font-size:12px;font-weight:600;color:#c9d1d9;line-height:1.4;}
.cdn-dt{font-size:10px;color:#4b5563;margin-top:2px;line-height:1.3;}
.cdn-empty{font-size:12px;color:var(--muted);text-align:center;padding:20px 0;}

/* ê°€ì´ë“œ ë²„íŠ¼ */
.guide-btn{display:inline-block;margin-top:12px;padding:10px 28px;font-size:14px;font-weight:700;color:var(--accent);background:transparent;border:1px solid rgba(245,158,11,.35);border-radius:10px;text-decoration:none;transition:all .2s;letter-spacing:.5px;}
.guide-btn:hover{background:rgba(245,158,11,.1);border-color:var(--accent);}

/* ëª¨ë‹¬ ë‚´ ì£¼ë¬¸ íŒ¨ë„ */
.cd-trade{padding:12px 16px;border-top:1px solid var(--border);}
.cd-trade-title{font-size:11px;font-weight:800;color:var(--accent);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;}
.cd-trade-row{display:flex;align-items:center;gap:4px;flex-wrap:wrap;justify-content:center;}
.cd-trade-row .order-btn{min-width:44px;max-width:68px;flex:1;padding:7px 2px;font-size:12px;}
.cd-trade-row .order-divider{width:2px;height:28px;background:var(--border);margin:0 2px;border-radius:1px;}
.cd-trade-pending{text-align:center;margin-top:8px;font-size:13px;font-weight:700;min-height:20px;}

/* ì£¼ë¬¸ ë²„íŠ¼ â€” 2í–‰ ì»´íŒ©íŠ¸ */
.order-row{display:flex;align-items:center;padding:6px 8px;gap:3px;border-top:1px solid var(--border);background:#0d1117;flex-wrap:wrap;justify-content:center;}
.order-row::-webkit-scrollbar{height:0;}
.order-btn{padding:5px 2px;font-size:11px;font-weight:700;border:1px solid;border-radius:4px;cursor:pointer;transition:all .15s;text-align:center;min-width:38px;max-width:60px;flex:1;background:transparent;}
.order-btn:hover{transform:translateY(-1px);}
.order-btn:active{transform:translateY(0);}
.order-btn.sell{color:var(--sell);border-color:rgba(59,130,246,.3);}
.order-btn.sell:hover{background:rgba(59,130,246,.1);}
.order-btn.sell.active{background:rgba(59,130,246,.2);border-color:var(--sell);box-shadow:0 0 8px rgba(59,130,246,.3);}
.order-btn.buy{color:var(--buy);border-color:rgba(239,68,68,.3);}
.order-btn.buy:hover{background:rgba(239,68,68,.1);}
.order-btn.buy.active{background:rgba(239,68,68,.2);border-color:var(--buy);box-shadow:0 0 8px rgba(239,68,68,.3);}
.order-btn.all-sell{color:#fff;background:rgba(59,130,246,.2);border-color:var(--sell);font-weight:900;font-size:9px;}
.order-btn.all-sell:hover{background:rgba(59,130,246,.35);}
.order-btn.all-buy{color:#fff;background:rgba(239,68,68,.2);border-color:var(--buy);font-weight:900;font-size:9px;}
.order-btn.all-buy:hover{background:rgba(239,68,68,.35);}
.order-divider{width:2px;height:24px;background:var(--border);margin:0 2px;flex-shrink:0;}
.order-custom{padding:4px;font-size:11px;width:48px;background:#1a2332;border:1px solid var(--border);border-radius:4px;color:var(--text);text-align:center;flex-shrink:0;}
.order-custom:focus{outline:none;border-color:var(--accent);}
.order-pending{font-size:11px;font-weight:700;min-width:70px;text-align:center;padding:4px;border-radius:4px;flex-shrink:0;}
.order-pending.buy-pending{color:var(--buy);background:rgba(239,68,68,.08);}
.order-pending.sell-pending{color:var(--sell);background:rgba(59,130,246,.08);}

/* â”€â”€â”€ í•˜ë‹¨ ê³ ì •ë°” â”€â”€â”€ */
.bottom-bar{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--border);padding:12px 28px;display:flex;justify-content:space-between;align-items:center;z-index:100;gap:16px;}
.pending-summary{font-size:14px;color:var(--muted);flex:1;}
.pending-summary span{font-weight:700;}
.submit-btn{padding:14px 52px;font-size:17px;font-weight:800;color:#000;background:linear-gradient(135deg,#f59e0b,#eab308);border:none;border-radius:10px;cursor:pointer;transition:all .2s;white-space:nowrap;}
.submit-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(245,158,11,.4);}
.submit-btn:active{transform:translateY(0);}
.submit-btn:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none;}
.reset-btn{padding:10px 18px;font-size:14px;color:var(--muted);background:transparent;border:1px solid var(--border);border-radius:6px;cursor:pointer;}
.reset-btn:hover{background:#1a2332;}

/* â”€â”€â”€ ì˜¤ë²„ë ˆì´ â”€â”€â”€ */
#overlay{position:fixed;inset:0;background:rgba(10,14,23,.95);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:200;transition:opacity .4s;}
.overlay-lang-toggle{margin-bottom:16px;}
#overlay.hidden{opacity:0;pointer-events:none;}
#overlay h1{font-size:40px;font-weight:800;background:linear-gradient(135deg,#f59e0b,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px;}
#overlay .desc{color:var(--muted);font-size:15px;text-align:center;max-width:520px;line-height:1.9;margin-bottom:22px;}
#overlay .start-btn{padding:16px 60px;font-size:18px;font-weight:800;color:#000;background:linear-gradient(135deg,#f59e0b,#eab308);border:none;border-radius:12px;cursor:pointer;transition:all .2s;}
#overlay .start-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(245,158,11,.4);}
.result-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:28px;text-align:center;margin-bottom:18px;min-width:440px;max-width:560px;}
.result-pnl{font-size:52px;font-weight:900;line-height:1.1;margin-bottom:2px;letter-spacing:-1px;}
.result-asset{font-size:16px;font-weight:600;color:var(--muted);margin-bottom:6px;}
.result-comment{font-size:20px;font-weight:700;margin:10px 0 16px;min-height:28px;line-height:1.5;}
.result-curve{margin:10px auto 14px;display:block;}
.result-stats{font-size:13px;color:var(--muted);line-height:2.0;}

/* ì‹œìŠ¤í…œ ë‰´ìŠ¤ (í•˜ë‹¨) */
.sys-news{position:fixed;bottom:68px;left:50%;transform:translateX(-50%);background:rgba(17,24,39,.95);border:1px solid var(--border);border-radius:6px;padding:8px 20px;font-size:13px;color:var(--accent);z-index:50;transition:opacity .5s;white-space:nowrap;max-width:700px;}
.sys-news.hidden{opacity:0;pointer-events:none;}

/* â”€â”€â”€ ì „ë©´ ê´‘ê³  ì¸í„°ìŠ¤í‹°ì…œ â”€â”€â”€ */
#ad-interstitial{position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:500;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .3s;}
#ad-interstitial.hidden{opacity:0;pointer-events:none;}
.ad-container{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;text-align:center;max-width:480px;width:90%;}
.ad-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
.ad-countdown{font-size:14px;color:var(--accent);margin-top:12px;font-weight:600;}
.ad-slot-box{min-height:250px;display:flex;align-items:center;justify-content:center;background:#0d1117;border-radius:8px;margin:8px 0;}

/* â”€â”€â”€ AdSense ì¸ê²Œì„ ë°°ë„ˆ â”€â”€â”€ */
.ad-banner{background:var(--card);border:1px solid var(--border);border-radius:8px;text-align:center;overflow:hidden;}
.ad-banner .ad-label{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;padding:4px 0 2px;}
.ad-banner-sidebar{margin-top:auto;padding:8px;}
.ad-banner-sidebar .ad-slot-inline{min-height:250px;background:#0d1117;border-radius:6px;}
.ad-banner-top{display:none;}
.ad-banner-infeed{display:none;}

/* â”€â”€â”€ ëª¨ë°”ì¼ ë‰´ìŠ¤ ë°°ë„ˆ (ê°€ë¡œí˜• ì»´íŒ©íŠ¸) â”€â”€â”€ */
.news-banner-mobile{display:none;}
.news-banner-mobile .news-banner-inner{display:flex;align-items:center;gap:6px;padding:6px 8px;background:#0d1117;border:1px solid var(--border);border-radius:6px;overflow:hidden;}
.news-banner-mobile .nb-tag{font-size:8px;font-weight:800;padding:2px 5px;border-radius:3px;white-space:nowrap;flex-shrink:0;text-transform:uppercase;}
.news-banner-mobile .nb-tag.bullish{background:rgba(34,197,94,.15);color:#22c55e;}
.news-banner-mobile .nb-tag.bearish{background:rgba(239,68,68,.15);color:#ef4444;}
.news-banner-mobile .nb-tag.neutral{background:rgba(245,158,11,.15);color:#f59e0b;}
.news-banner-mobile .nb-headline{font-size:11px;font-weight:600;color:#9ca3af;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:0;}
.news-banner-mobile .nb-headline .news-coin-name{color:#fff;font-weight:900;}
.news-banner-mobile .nb-impact{font-size:10px;font-weight:900;flex-shrink:0;}
.news-banner-mobile .nb-impact.positive{color:var(--profit);}
.news-banner-mobile .nb-impact.negative{color:var(--loss);}

/* â”€â”€â”€ í‘¸í„° ë„¤ë¹„ê²Œì´ì…˜ â”€â”€â”€ */
.game-footer{background:var(--card);border-top:1px solid var(--border);padding:10px 20px;text-align:center;font-size:11px;color:var(--muted);line-height:1.8;}
.game-footer a{color:var(--accent);text-decoration:none;margin:0 8px;}
.game-footer a:hover{text-decoration:underline;}
.game-footer .disclaimer-inline{font-size:10px;color:#6b7280;margin-top:4px;}

/* â”€â”€â”€ ëª¨ë°”ì¼ ì ‘ì´ì‹ ì£¼ë¬¸ (ë°ìŠ¤í¬í†± ìˆ¨ê¹€) â”€â”€â”€ */
.order-toggle{display:none;width:100%;padding:6px;font-size:11px;font-weight:700;color:var(--accent);background:#0d1117;border:none;border-top:1px solid var(--border);cursor:pointer;text-align:center;}
.order-row.collapsed{display:none !important;}

/* â”€â”€â”€ ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë” ì£¼ë¬¸ â”€â”€â”€ */
.order-slider-wrap{display:none;padding:2px 6px 2px;background:#0d1117;border-top:1px solid var(--border);}
.order-slider-row{display:flex;align-items:center;height:16px;}
.order-slider{-webkit-appearance:none;appearance:none;width:100%;height:3px;border-radius:2px;outline:none;cursor:pointer;background:linear-gradient(90deg,var(--sell),#1f2937 45%,#1f2937 55%,var(--buy));margin:0;}
.order-slider::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:20px;border-radius:4px;background:#6b7280;border:1px solid rgba(255,255,255,.3);cursor:pointer;box-shadow:0 0 4px rgba(107,114,128,.4);}
.order-slider::-moz-range-thumb{width:12px;height:20px;border-radius:4px;background:#6b7280;border:1px solid rgba(255,255,255,.3);cursor:pointer;box-shadow:0 0 4px rgba(107,114,128,.4);}
.order-slider-labels{display:flex;justify-content:space-between;align-items:center;height:14px;padding:0 2px;}
.order-slider-labels .sell-label{color:var(--sell);font-size:8px;font-weight:800;}
.order-slider-labels .buy-label{color:var(--buy);font-size:8px;font-weight:800;}
.order-slider-val{font-size:9px;font-weight:800;white-space:nowrap;color:var(--muted);text-shadow:0 1px 3px rgba(0,0,0,.8);transition:all .2s;}
.order-slider-val.has-order{padding:2px 8px;border-radius:4px;background:rgba(107,114,128,.25);border:1px solid rgba(107,114,128,.4);cursor:pointer;-webkit-tap-highlight-color:transparent;}
.order-slider-val.has-order:active{background:rgba(239,68,68,.2);border-color:rgba(239,68,68,.4);}

/* â”€â”€â”€ ëª¨ë°”ì¼ í„´ ê²Œì´ì§€ â”€â”€â”€ */
.mobile-turn-gauge{display:none;height:14px;background:#0d1117;position:relative;border-bottom:1px solid var(--border);margin:0 4px;border-radius:3px;overflow:hidden;}
.mtg-fill{height:100%;background:linear-gradient(90deg,var(--accent),#eab308);border-radius:3px;transition:width .5s;}
.mtg-fill.ending{background:linear-gradient(90deg,#ef4444,#f87171);}
.mtg-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:9px;font-weight:800;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.8);}

/* â”€â”€â”€ ì‚¬ì´ë“œë°” ë‚´ ì–¸ì–´ í† ê¸€ (ë°ìŠ¤í¬í†±ì—ì„  ìˆ¨ê¹€) â”€â”€â”€ */
.sb-lang-toggle{display:none;align-items:center;justify-content:space-between;padding:10px 14px;background:var(--card);border:1px solid var(--border);border-radius:10px;}
.sb-lang-toggle .sb-lang-label{font-size:13px;font-weight:700;color:var(--muted);}
.sb-lang-toggle .lang-toggle{display:flex !important;}
.overlay-lang-toggle .lang-toggle{display:flex !important;}

/* â”€â”€â”€ ëª¨ë°”ì¼ ì‚¬ì´ë“œë°” í† ê¸€ â”€â”€â”€ */
.mobile-sidebar-toggle{display:none;}
.sidebar-overlay{display:none;}

@media(max-width:1200px){
  .sidebar{width:260px;min-width:260px;padding:12px;}
  .coin-area{padding:10px 10px 110px;gap:10px;}
}
@media(max-width:1000px){
  .sidebar{width:240px;min-width:240px;padding:10px;}
  .coin-area{grid-template-columns:1fr;padding:10px 10px 110px;gap:10px;}
}

/* â•â•â• ëª¨ë°”ì¼ ìµœì í™” (768px ì´í•˜) â•â•â• */
@media(max-width:768px){
  body{font-size:15px;-webkit-text-size-adjust:100%;}

  /* í—¤ë”: 1í–‰ ê³ ì • */
  header{flex-wrap:nowrap;padding:6px 10px;gap:6px;}
  .logo{font-size:13px;flex-shrink:0;line-height:1.1;letter-spacing:1px;}
  .header-stats{gap:8px;flex-wrap:nowrap;justify-content:flex-end;overflow:hidden;}
  .stat{display:block!important;flex-shrink:0;}
  .stat-label{font-size:9px;letter-spacing:0;}
  .stat-val{font-size:14px;}
  .timer-box{padding:3px 8px;min-width:auto;border-radius:6px;}
  .timer-label{display:none;}
  .timer-val{font-size:24px;text-shadow:0 0 12px rgba(245,158,11,.3);}
  .turn-badge{font-size:11px;padding:2px 5px;}
  /* ì–¸ì–´ í† ê¸€ì€ ì‚¬ì´ë“œë°”ë¡œ ì´ë™ â†’ í—¤ë”ì—ì„œ ìˆ¨ê¹€ */
  .lang-toggle{display:none !important;}

  /* ë©”ì¸: ì„¸ë¡œ ë ˆì´ì•„ì›ƒ */
  .main-layout{flex-direction:column;}

  /* ì‚¬ì´ë“œë°”: ìŠ¬ë¼ì´ë“œ ë“œë¡œì–´ */
  .sidebar{
    position:fixed;top:0;left:-100%;width:85vw;max-width:340px;min-width:auto;
    height:100vh;z-index:300;padding:14px;gap:12px;
    border-right:1px solid var(--border);border-bottom:none;
    transition:left .3s ease;overflow-y:auto;
  }
  .sidebar.open{left:0;}
  .sidebar-overlay{
    display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:250;
  }
  .sidebar-overlay.show{display:block;}
  .mobile-sidebar-toggle{
    display:flex;align-items:center;justify-content:center;
    position:fixed;bottom:54px;left:8px;z-index:100;
    width:42px;height:42px;border-radius:50%;
    background:var(--accent);color:#000;font-size:18px;font-weight:900;
    border:none;cursor:pointer;box-shadow:0 4px 12px rgba(245,158,11,.4);
  }

  /* â˜… ì½”ì¸ ì˜ì—­: 2ì—´ ê·¸ë¦¬ë“œ */
  .coin-area{grid-template-columns:1fr 1fr;padding:4px 4px 60px;gap:5px;}

  /* â˜… ì½”ì¸ ì¹´ë“œ â€” ì•„ì´ì½˜ ì œê±°ë¡œ ê³µê°„ í™•ë³´ */
  .coin-header{padding:6px 8px;gap:6px;}
  .coin-icon{display:none;}
  .coin-title{min-width:0;flex:1;}
  .coin-name{font-size:14px;font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
  .coin-sym{font-size:12px;}
  .coin-price{font-size:13px;}
  .coin-change{font-size:12px;padding:3px 0;border-radius:4px;min-width:68px;width:68px;text-align:center;box-sizing:border-box;flex-shrink:0;}
  .coin-change.big-up,.coin-change.big-down{font-size:12px;min-width:68px;width:68px;}
  .coin-hold{text-align:right;}
  .coin-hold-qty{font-size:15px!important;}
  .coin-hold-val{display:none;}
  .coin-price-area{text-align:right;}

  /* â˜… ì°¨íŠ¸ */
  .chart-area{height:40px;padding:2px 4px;}
  .coin-detail-modal{padding:10px 6px;}
  .cd-header{padding:12px 16px;gap:10px;}
  .cd-icon{width:36px;height:36px;font-size:14px;}
  .cd-name{font-size:17px;}
  .cd-sym{font-size:13px;}
  .cd-stats{padding:10px 14px;gap:6px;}
  .cd-stat .cd-label{font-size:10px;}
  .cd-stat .cd-val{font-size:14px;}
  .cd-chart{height:200px;padding:6px 8px;}
  .cd-news{padding:12px 16px;}
  .cdn-headline{font-size:13px;}
  .cdn-detail{font-size:12px;}

  /* â˜… ëª¨ë°”ì¼: ìŠ¬ë¼ì´ë” ì£¼ë¬¸ */
  .order-toggle{display:none !important;}
  .order-row{display:none !important;}
  .order-slider-wrap{display:block;padding:3px 8px 3px;}
  .order-slider-labels{height:16px;}
  .order-slider-labels .sell-label,.order-slider-labels .buy-label{font-size:11px;}
  .order-slider-val{font-size:12px;}

  /* â˜… ëª¨ë°”ì¼: í„´ ê²Œì´ì§€ */
  .mobile-turn-gauge{display:block;height:18px;}
  .mtg-text{font-size:11px;}

  /* â˜… ëª¨ë°”ì¼: ë‰´ìŠ¤ ë°°ë„ˆ */
  .news-banner-mobile{display:block;}
  .news-banner-mobile.nb-top{margin:2px 4px 0;}
  .news-banner-mobile .nb-tag{font-size:10px;padding:2px 6px;}
  .news-banner-mobile .nb-headline{font-size:13px;}
  .news-banner-mobile .nb-impact{font-size:12px;}
  .news-banner-mobile .news-banner-inner{padding:7px 10px;gap:8px;}
  .ad-banner-top{display:none !important;}
  .ad-banner-infeed{display:none !important;}

  /* í•˜ë‹¨ë°” */
  .bottom-bar{padding:8px 10px;gap:8px;}
  .pending-summary{font-size:13px;}
  .submit-btn{padding:10px 16px;font-size:15px;border-radius:8px;}
  .reset-btn{padding:7px 12px;font-size:13px;}

  /* ì‹œìŠ¤í…œ ë‰´ìŠ¤ */
  .sys-news{bottom:52px;font-size:13px;padding:6px 14px;max-width:90vw;white-space:normal;text-align:center;}

  /* ì˜¤ë²„ë ˆì´/ê²°ê³¼ */
  #overlay{overflow-y:auto;padding:20px 16px;justify-content:flex-start;padding-top:10vh;}
  #overlay h1{font-size:28px;}
  #overlay .desc{font-size:14px;line-height:1.7;max-width:100%;margin-bottom:16px;padding:0 8px;}
  #overlay .start-btn{padding:14px 40px;font-size:17px;}
  .result-card{min-width:auto;max-width:100%;width:100%;padding:20px 16px;}
  .result-pnl{font-size:38px;}
  .result-asset{font-size:15px;}
  .result-comment{font-size:16px;}
  .result-curve{width:100%!important;max-width:360px;}
  .result-stats{font-size:13px;line-height:1.8;}

  /* ì‚¬ì´ë“œë°” ë‚´ë¶€ */
  .sb-lang-toggle{display:flex;}
  .sb-section{padding:12px;}
  .sb-title{font-size:13px;margin-bottom:8px;}
  .turn-gauge-text{font-size:14px;}
  .news-card{padding:10px;}
  .news-card.main-news .news-headline{font-size:15px;}
  .news-headline{font-size:14px;}
  .news-detail{font-size:12px;}
  .news-tag{font-size:11px;}
  .news-impact{font-size:12px;}
  .news-coin-badge{font-size:11px;}

  /* ëª¨ë°”ì¼ ê´‘ê³  */
  .ad-banner-top{display:block;padding:4px;margin:0 4px 2px;}
  .ad-banner-top .ad-slot-inline{min-height:50px;background:#0d1117;border-radius:4px;}
  .ad-banner-sidebar{display:none;}
  .ad-banner-infeed{display:block;padding:4px;grid-column:1/-1;}
  .ad-banner-infeed .ad-slot-inline{min-height:50px;background:#0d1117;border-radius:4px;}

  /* ìŠ¤ìº  íŒì—… ëª¨ë°”ì¼ */
  .scam-popup{max-width:92vw;padding:24px 20px;}
  .scam-popup .sp-icon{font-size:40px;}
  .scam-popup .sp-title{font-size:18px;}
  .scam-popup .sp-coin{font-size:18px;}
  .scam-popup .sp-msg{font-size:14px;}
  .scam-popup .sp-loss{font-size:15px;}
}

/* â•â•â• ë§¤ìš° ì‘ì€ í™”ë©´ (480px ì´í•˜) â•â•â• */
@media(max-width:480px){
  header{padding:6px 6px;}
  .logo{font-size:12px;letter-spacing:1px;}
  .lang-toggle span{padding:3px 7px;font-size:11px;}
  .header-stats{gap:5px;}
  .stat-label{font-size:9px;}
  .stat-val{font-size:13px;}
  .timer-box{padding:3px 8px;min-width:50px;}
  .timer-val{font-size:24px;}
  .timer-label{font-size:9px;}
  .coin-area{padding:3px 3px 56px;gap:4px;}
  .coin-header{padding:4px 5px;gap:4px;}
  .coin-name{font-size:13px;}
  .coin-sym{font-size:11px;}
  .coin-price{font-size:12px;}
  .coin-change{font-size:11px;padding:3px 0;min-width:62px;width:62px;text-align:center;}
  .coin-change.big-up,.coin-change.big-down{font-size:11px;min-width:62px;width:62px;}
  .coin-hold-qty{font-size:14px!important;}
  .chart-area{height:32px;padding:1px 3px;}
  .order-slider-labels{height:14px;}
  .order-slider-labels .sell-label,.order-slider-labels .buy-label{font-size:10px;}
  .order-slider-val{font-size:11px;}
  .bottom-bar{padding:6px 8px;}
  .submit-btn{padding:9px 14px;font-size:14px;}
  .reset-btn{padding:6px 10px;font-size:12px;}
  .pending-summary{font-size:12px;}
  .mobile-sidebar-toggle{width:38px;height:38px;font-size:16px;bottom:50px;left:6px;}
  .news-banner-mobile .nb-headline{font-size:12px;}
  .news-banner-mobile .nb-tag{font-size:9px;}
  .news-banner-mobile .nb-impact{font-size:11px;}
  .mtg-text{font-size:10px;}
  .sys-news{font-size:12px;}
}

/* â•â•â• ë§¤ìš° ì‘ì€ ë†’ì´ (667px ì´í•˜, SE ë“±) â•â•â• */
@media(max-width:768px) and (max-height:667px){
  .chart-area{height:28px;}
  .coin-header{padding:4px 6px;gap:4px;}
  .coin-name{font-size:12px;}
  .coin-sym{font-size:10px;}
  .coin-price{font-size:11px;}
  .coin-change{font-size:11px;min-width:60px;width:60px;text-align:center;padding:2px 0;}
  .coin-change.big-up,.coin-change.big-down{font-size:11px;min-width:60px;width:60px;}
  .coin-hold-qty{font-size:13px!important;}
  .order-slider-wrap{height:auto;}
  .order-slider::-webkit-slider-thumb{width:10px;height:18px;}
  .order-slider-labels .sell-label,.order-slider-labels .buy-label{font-size:10px;}
  .order-slider-val{font-size:11px;}
}
</style>
</head>
<body>

<header>
  <div class="logo" id="logo-text">CRYPTO<br>TRADER</div>
  <div class="header-stats">
    <div class="lang-toggle" id="lang-toggle" onclick="switchLang()">
      <span id="lang-ko" class="active">KO</span>
      <span id="lang-en">EN</span>
    </div>
    <div class="stat"><div class="stat-label">í˜„ê¸ˆ</div><div class="stat-val" id="s-cash">$1,000</div></div>
    <div class="stat"><div class="stat-label">ì½”ì¸ìì‚°</div><div class="stat-val" id="s-hold">$0</div></div>
    <div class="stat"><div class="stat-label">ì´ìì‚°</div><div class="stat-val" id="s-total">$1,000</div></div>
    <div class="stat"><div class="stat-label">ìˆ˜ìµë¥ </div><div class="stat-val" id="s-pnl">0.0%</div></div>
    <div class="timer-box" id="timer-box">
      <div class="timer-label">â± ë‚¨ì€ ì‹œê°„</div>
      <div class="timer-val" id="s-timer">60</div>
    </div>
  </div>
</header>

<div class="main-layout">
  <!-- â•â•â• ì™¼ìª½ ì‚¬ì´ë“œë°” (ê³ ì •) â•â•â• -->
  <aside class="sidebar">
    <!-- ëª¨ë°”ì¼ ì „ìš©: ì–¸ì–´ í† ê¸€ (ì‚¬ì´ë“œë°” ìƒë‹¨) -->
    <div class="sb-lang-toggle" id="sb-lang-toggle">
      <span class="sb-lang-label">ğŸŒ Language</span>
      <div class="lang-toggle" onclick="switchLang()">
        <span id="sb-lang-ko" class="active">KO</span>
        <span id="sb-lang-en">EN</span>
      </div>
    </div>
    <!-- í„´ ê²Œì´ì§€ -->
    <div class="sb-section">
      <div class="sb-title">ğŸ“Š í„´ ì§„í–‰</div>
      <div class="turn-gauge">
        <div class="turn-gauge-row">
          <span class="turn-gauge-text" id="turn-text">í„´ 1 / 20</span>
          <span class="turn-badge" id="s-turn">1</span>
        </div>
        <div class="turn-gauge-track"><div class="turn-gauge-fill" id="turn-fill" style="width:5%;"></div></div>
        <div class="turn-gauge-marks"><span>1</span><span>5</span><span>10</span><span>15</span><span>20</span></div>
      </div>
    </div>

    <!-- ì†Œë“ìˆ˜ì¤€ -->
    <div class="sb-section income-section">
      <div class="sb-title">ğŸ’¼ ì†Œë“ìˆ˜ì¤€</div>
      <div class="income-track"><div class="income-fill" id="ig-fill" style="width:50%;background:#f59e0b;"></div></div>
      <div class="income-info">
        <span class="income-grade" id="ig-grade">ì¤‘ì‚°ì¸µ</span>
        <span class="income-pct" id="ig-pct">50%</span>
      </div>
      <div class="income-ticks"><span>ê·¹ë¹ˆ</span><span>ë¹ˆê³¤</span><span>ì €ì†Œë“</span><span>ì¤‘ì‚°</span><span>ê³ ì†Œë“</span><span>ìƒë¥˜</span><span>ìµœìƒë¥˜</span></div>
    </div>

    <!-- ë‰´ìŠ¤ -->
    <div class="sb-section">
      <div class="sb-title">ğŸ“° ì´ë²ˆ í„´ ì†ë³´</div>
      <div id="news-cards"></div>
    </div>

    <!-- ì‚¬ì´ë“œë°” í•˜ë‹¨ ê´‘ê³  (ë°ìŠ¤í¬í†±) -->
    <div class="ad-banner ad-banner-sidebar">
      <div class="ad-label">AD</div>
      <div class="ad-slot-inline">
        <ins class="adsbygoogle" style="display:block;width:100%;min-height:250px;" data-ad-client="ca-pub-9216314386092719" data-ad-slot="auto" data-ad-format="rectangle" data-full-width-responsive="false"></ins>
      </div>
    </div>
  </aside>

  <!-- ëª¨ë°”ì¼ í„´ ê²Œì´ì§€ -->
  <div class="mobile-turn-gauge" id="mobile-turn-gauge">
    <div class="mtg-fill" id="mtg-fill" style="width:5%;"></div>
    <span class="mtg-text" id="mtg-text">1/20</span>
  </div>

  <!-- ëª¨ë°”ì¼ ìƒë‹¨ ë‰´ìŠ¤ ë°°ë„ˆ (3ê°œ) -->
  <div class="news-banner-mobile nb-top" id="news-banner-top"></div>
  <div class="news-banner-mobile nb-top" id="news-banner-mid"></div>
  <div class="news-banner-mobile nb-top" id="news-banner-bottom"></div>

  <!-- â•â•â• ì˜¤ë¥¸ìª½ ì½”ì¸ ì˜ì—­ â•â•â• -->
  <div class="coin-area" id="coin-container"></div>
</div>

<div class="bottom-bar">
  <div class="pending-summary" id="pending-summary">ì£¼ë¬¸ì„ ì„¤ì •í•˜ê³  ì œì¶œí•˜ì„¸ìš”.</div>
  <button class="reset-btn" onclick="resetOrders()">ì´ˆê¸°í™”</button>
  <button class="submit-btn" onclick="submitOrders()">ğŸ“Š ì£¼ë¬¸ ì œì¶œ â†’ ë‹¤ìŒ í„´</button>
</div>

<!-- ì „ë©´ ê´‘ê³  ì¸í„°ìŠ¤í‹°ì…œ -->
<div id="ad-interstitial" class="hidden">
  <div class="ad-container">
    <div class="ad-label">ê´‘ê³ </div>
    <div class="ad-slot-box">
      <ins class="adsbygoogle" style="display:block;width:100%;min-height:250px;" data-ad-client="ca-pub-9216314386092719" data-ad-slot="auto" data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>
    <div class="ad-countdown" id="ad-countdown">5ì´ˆ í›„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤...</div>
  </div>
</div>

<div id="overlay">
  <div class="overlay-lang-toggle">
    <div class="lang-toggle" onclick="switchLang()">
      <span id="ov-lang-ko" class="active">KO</span>
      <span id="ov-lang-en">EN</span>
    </div>
  </div>
  <h1>CRYPTO TRADER</h1>
  <div class="desc">
    <span style="font-size:1.1em;color:var(--text);">ë‹¹ì‹ ì˜ íˆ¬ì ë³¸ëŠ¥ì„ ì‹œí—˜í•  ì‹œê°„</span><br><br>
    ğŸ’° <b>$1,000</b>ìœ¼ë¡œ ì‹œì‘í•´ì„œ ì–¼ë§ˆë‚˜ ë¶ˆë¦´ ìˆ˜ ìˆì„ê¹Œ?<br>
    ğŸ“ˆ ë‰´ìŠ¤ë¥¼ ì½ê³ , íë¦„ì„ íƒ€ê³ , <b>ìµœì ì˜ íƒ€ì´ë°</b>ì„ ì¡ì•„ë¼<br>
    ğŸ”¥ ìƒìœ„ <b>1%</b>ë§Œì´ ìµœìƒë¥˜ì¸µì— ë„ë‹¬í•©ë‹ˆë‹¤<br>
    ğŸ¯ ë‹¹ì‹ ì€ ê³¼ì—° ëª‡ ë“±ê¸‰ê¹Œì§€ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì„ê¹Œ?
  </div>
  <div class="result-card" id="result-card" style="display:none;"></div>
  <button class="start-btn" id="start-btn">ê²Œì„ ì‹œì‘</button>
  <a href="guide.html" class="guide-btn" id="guide-btn">ğŸ“– ê²Œì„ ê°€ì´ë“œ</a>
  <div id="overlay-disclaimer" style="margin-top:16px;font-size:10px;color:#6b7280;text-align:center;max-width:480px;line-height:1.6;">
    âš ï¸ ë³¸ ì„œë¹„ìŠ¤ëŠ” êµìœ¡Â·ì˜¤ë½ ëª©ì ì˜ ëª¨ì˜íˆ¬ì ì‹œë®¬ë ˆì´í„°ì´ë©°, ì‹¤ì œ ê¸ˆìœµ ê±°ë˜ì™€ ë¬´ê´€í•©ë‹ˆë‹¤.<br>
    <a href="terms.html" style="color:#f59e0b;text-decoration:none;">ì´ìš©ì•½ê´€</a> Â· <a href="privacy.html" style="color:#f59e0b;text-decoration:none;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> Â· <a href="guide.html" style="color:#f59e0b;text-decoration:none;">ê°€ì´ë“œ</a>
  </div>
</div>

<!-- ëª¨ë°”ì¼ ì‚¬ì´ë“œë°” í† ê¸€ -->
<button class="mobile-sidebar-toggle" id="sidebar-toggle" onclick="toggleSidebar()">ğŸ“°</button>
<div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

<div class="sys-news hidden" id="sys-news"></div>

<!-- ì½”ì¸ ìƒì„¸ ëª¨ë‹¬ -->
<div class="coin-detail-modal hidden" id="coin-detail-modal" onclick="if(event.target===this)closeCoinDetail()">
  <div class="coin-detail-inner" id="coin-detail-inner"></div>
</div>
<div class="scam-popup" id="scam-popup"></div>

<!-- í‘¸í„° ë„¤ë¹„ê²Œì´ì…˜ -->
<div class="game-footer" id="game-footer">
  <div>
    <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <a href="terms.html">ì´ìš©ì•½ê´€</a>
    <a href="about.html">ì†Œê°œ/ì—°ë½ì²˜</a>
    <a href="guide.html">ê²Œì„ ê°€ì´ë“œ</a>
  </div>
  <div class="disclaimer-inline" id="footer-disclaimer">
    âš ï¸ ë³¸ ì„œë¹„ìŠ¤ëŠ” êµìœ¡Â·ì˜¤ë½ ëª©ì ì˜ ëª¨ì˜íˆ¬ì ì‹œë®¬ë ˆì´í„°ì´ë©°, ì‹¤ì œ ê¸ˆìœµ ê±°ë˜ì™€ ë¬´ê´€í•©ë‹ˆë‹¤. íˆ¬ì ì¡°ì–¸ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// í¬ë¦½í†  íŠ¸ë ˆì´ë” v10 â€” ë‹¤êµ­ì–´ ì§€ì› + ì „ë©´ ê´‘ê³ 
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let lang='ko';

const T={
  ko:{
    logo:'í¬ë¦½í†  íŠ¸ë ˆì´ë”',cash:'í˜„ê¸ˆ',coinAsset:'ì½”ì¸ìì‚°',totalAsset:'ì´ìì‚°',pnl:'ìˆ˜ìµë¥ ',timeLeft:'â± ë‚¨ì€ ì‹œê°„',
    turnProgress:'ğŸ“Š í„´ ì§„í–‰',turnOf:'í„´',incomeLevel:'ğŸ’¼ ì†Œë“ìˆ˜ì¤€',newsTitle:'ğŸ“° ì´ë²ˆ í„´ ì†ë³´',
    bullish:'í˜¸ì¬',bearish:'ì•…ì¬',neutral:'í˜¼í•©',market:'ì „ì²´ ì‹œì¥',
    hold:'ë³´ìœ ',buyAll:'ì „ì•¡<br>ë§¤ìˆ˜',sellAll:'ì „ì•¡<br>ë§¤ë„',custom:'ì§ì ‘',
    pendingDefault:'ì£¼ë¬¸ì„ ì„¤ì •í•˜ê³  ì œì¶œí•˜ì„¸ìš”.',submit:'ğŸ“Š ì£¼ë¬¸ ì œì¶œ â†’ ë‹¤ìŒ í„´',reset:'ì´ˆê¸°í™”',
    orderReset:'ì£¼ë¬¸ ì´ˆê¸°í™”',noHold:'ë³´ìœ ë¶„ ì—†ìŒ',noTrade:'ê±°ë˜ë¶ˆê°€',overHold:'ì´ˆê³¼',noCash:'í˜„ê¸ˆ ë¶€ì¡±',cashShort:'í˜„ê¸ˆ($%s) ë¶€ì¡±',overSell:'ë³´ìœ ë¶„($%s) ì´ˆê³¼',
    buy:'ë§¤ìˆ˜',sell:'ë§¤ë„',pending:'ê±´',
    gameTitle:'CRYPTO TRADER',gameDesc:`<span style="font-size:1.1em;color:var(--text);">ë‹¹ì‹ ì˜ íˆ¬ì ë³¸ëŠ¥ì„ ì‹œí—˜í•  ì‹œê°„</span><br><br>ğŸ’° <b>$1,000</b>ìœ¼ë¡œ ì‹œì‘í•´ì„œ ì–¼ë§ˆë‚˜ ë¶ˆë¦´ ìˆ˜ ìˆì„ê¹Œ?<br>ğŸ“ˆ ë‰´ìŠ¤ë¥¼ ì½ê³ , íë¦„ì„ íƒ€ê³ , <b>ìµœì ì˜ íƒ€ì´ë°</b>ì„ ì¡ì•„ë¼<br>ğŸ”¥ ìƒìœ„ <b>1%</b>ë§Œì´ ìµœìƒë¥˜ì¸µì— ë„ë‹¬í•©ë‹ˆë‹¤<br>ğŸ¯ ë‹¹ì‹ ì€ ê³¼ì—° ëª‡ ë“±ê¸‰ê¹Œì§€ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì„ê¹Œ?`,guideBtn:'ğŸ“– ê²Œì„ ê°€ì´ë“œ',
    startBtn:'ê²Œì„ ì‹œì‘',restartBtn:'ë‹¤ì‹œ ì‹œì‘',
    bankrupt:'ğŸ’¸ íŒŒì‚°!',finished:'ğŸ ê²Œì„ ì¢…ë£Œ!',endTitle:'ê²Œì„ ì¢…ë£Œ',bankruptLabel:'íŒŒì‚°',
    topPct:'ìƒìœ„',finalAsset:'ìµœì¢… ìì‚°',cashLabel:'í˜„ê¸ˆ',coinLabel:'ì½”ì¸',totalTurn:'ì´',turnUnit:'í„´',inflAccum:'ì¸í”Œë ˆì´ì…˜ ëˆ„ì ',
    gameStart:'ğŸ® ê²Œì„ì‹œì‘! 20í„´ ì•ˆì— ìµœëŒ€ ìˆ˜ìµì„ ì˜¬ë¦¬ì„¸ìš”!',
    timeOver:'â° ì‹œê°„ì´ˆê³¼! ì£¼ë¬¸ ì´ˆê¸°í™”, í„´ ë„˜ê¹€',
    turnSummary:'âœ… í„´%t: ë§¤ìˆ˜$%b/ë§¤ë„$%s/ì¸í”Œë ˆ-$%i',turnNoOrder:'í„´%t: ì£¼ë¬¸ì—†ìŒ. ì¸í”Œë ˆ-$%i',
    scamNew:'âš ï¸ ì‹ ê·œ ìƒì¥: %n(%s) â€” ìŠ¤ìº  ì£¼ì˜!',delisted:'ğŸ’€ %s ìƒì¥íì§€!',
    adCountdown:'%sì´ˆ í›„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤...',adLoading:'ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    grades:['ê·¹ë¹ˆì¸µ','ë¹ˆê³¤ì¸µ','ì €ì†Œë“ì¸µ','ì¤‘ì‚°ì¸µ','ê³ ì†Œë“ì¸µ','ìƒë¥˜ì¸µ','ìµœìƒë¥˜ì¸µ'],
    gradeTicks:['ê·¹ë¹ˆ','ë¹ˆê³¤','ì €ì†Œë“','ì¤‘ì‚°','ê³ ì†Œë“','ìƒë¥˜','ìµœìƒë¥˜'],
    curveLow:'í•˜ìœ„',curveMid:'ì¤‘ê°„',curveHigh:'ìƒìœ„',curveMany:'ë§ìŒ',curveFew:'ì ìŒ',curveMe:'â–¼ ë‚˜',
    footerDisclaimer:'âš ï¸ ë³¸ ì„œë¹„ìŠ¤ëŠ” êµìœ¡Â·ì˜¤ë½ ëª©ì ì˜ ëª¨ì˜íˆ¬ì ì‹œë®¬ë ˆì´í„°ì´ë©°, ì‹¤ì œ ê¸ˆìœµ ê±°ë˜ì™€ ë¬´ê´€í•©ë‹ˆë‹¤. íˆ¬ì ì¡°ì–¸ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
    overlayDisclaimer:'âš ï¸ ë³¸ ì„œë¹„ìŠ¤ëŠ” êµìœ¡Â·ì˜¤ë½ ëª©ì ì˜ ëª¨ì˜íˆ¬ì ì‹œë®¬ë ˆì´í„°ì´ë©°, ì‹¤ì œ ê¸ˆìœµ ê±°ë˜ì™€ ë¬´ê´€í•©ë‹ˆë‹¤.'
  },
  en:{
    logo:'Crypto Trader',cash:'Cash',coinAsset:'Holdings',totalAsset:'Total',pnl:'P&L',timeLeft:'â± Time Left',
    turnProgress:'ğŸ“Š Turn Progress',turnOf:'Turn',incomeLevel:'ğŸ’¼ Income Level',newsTitle:'ğŸ“° Breaking News',
    bullish:'Bull',bearish:'Bear',neutral:'Mixed',market:'Whole Market',
    hold:'Hold',buyAll:'Buy<br>All',sellAll:'Sell<br>All',custom:'Custom',
    pendingDefault:'Set your orders and submit.',submit:'ğŸ“Š Submit â†’ Next Turn',reset:'Reset',
    orderReset:'Orders reset',noHold:'No holdings',noTrade:'Not tradable',overHold:'exceeds',noCash:'No cash',cashShort:'Cash($%s) short',overSell:'Holdings($%s) exceeded',
    buy:'Buy',sell:'Sell',pending:'orders',
    gameTitle:'CRYPTO TRADER',gameDesc:`<span style="font-size:1.1em;color:var(--text);">Time to test your trading instincts</span><br><br>ğŸ’° Start with <b>$1,000</b> â€” how far can you grow it?<br>ğŸ“ˆ Read the news, ride the wave, and find the <b>perfect timing</b><br>ğŸ”¥ Only the top <b>1%</b> reach Elite status<br>ğŸ¯ How high can YOU climb?`,guideBtn:'ğŸ“– Game Guide',
    startBtn:'Start Game',restartBtn:'Restart',
    bankrupt:'ğŸ’¸ Bankrupt!',finished:'ğŸ Game Over!',endTitle:'Game Over',bankruptLabel:'Bankrupt',
    topPct:'Top',finalAsset:'Final',cashLabel:'Cash',coinLabel:'Coins',totalTurn:'Total',turnUnit:'turns',inflAccum:'Inflation',
    gameStart:'ğŸ® Start! Maximize profits in 20 turns!',
    timeOver:'â° Time up! Orders reset, skipping turn',
    turnSummary:'âœ… Turn%t: Buy$%b/Sell$%s/Infl-$%i',turnNoOrder:'Turn%t: No orders. Infl-$%i',
    scamNew:'âš ï¸ New listing: %n(%s) â€” Scam alert!',delisted:'ğŸ’€ %s delisted!',
    adCountdown:'Results in %s seconds...',adLoading:'Loading results...',
    grades:['Extreme Poverty','Poor','Low Income','Middle Class','Upper Middle','Upper Class','Elite'],
    gradeTicks:['Poor','Low','Mid-Low','Middle','Upper','Elite','Top'],
    curveLow:'Low',curveMid:'Mid',curveHigh:'Top',curveMany:'Many',curveFew:'Few',curveMe:'â–¼ Me',
    footerDisclaimer:'âš ï¸ This is a mock investment simulator for educational/entertainment purposes, unrelated to actual financial trading.',
    overlayDisclaimer:'âš ï¸ This is a mock investment simulator for educational/entertainment purposes, unrelated to actual trading.'
  }
};

const NEWS_POOL_EN={
  bullish:[
    {headline:'{NAME} confirmed listing on 3 major exchanges',detail:'Global TOP3 exchange listing, volume surge expected',impact:.9,crowd:25},
    {headline:'"{SYM} ecosystem revolution" â€” Global corp partnership',detail:'Fortune 500 strategic alliance signed',impact:.85,crowd:20},
    {headline:'{NAME} mainnet upgrade success, 100x TPS boost',detail:'Processing speed dramatically improved',impact:.75,crowd:18},
    {headline:'Whale wallet spotted buying $5M more {SYM}',detail:'Major investor accumulating for 3 days straight',impact:.7,crowd:15},
    {headline:'{NAME} selected for gov blockchain project',detail:'Core tech adopted for public infrastructure',impact:.8,crowd:22},
    {headline:'Famous fund manager: "Buy {SYM} now or regret"',detail:'Wall Street legend gives strong buy signal',impact:.6,crowd:12},
    {headline:'{NAME} community surpasses 1 million',detail:'Daily active users surging, growth accelerating',impact:.5,crowd:10},
    {headline:'{SYM} DeFi protocol launch, TVL soaring',detail:'Innovative yield structure drawing massive liquidity',impact:.65,crowd:14},
    {headline:'Breaking: {NAME} ETF approval imminent',detail:'Regulatory insider: decision this month',impact:.95,crowd:28},
    {headline:'{SYM} halving D-30, supply squeeze anticipated',detail:'Historical avg 200% gain around halving',impact:.7,crowd:16},
    {headline:'{NAME} wins Best Innovation at Global Blockchain Awards',detail:'Industry recognition boosts credibility',impact:.55,crowd:11},
    {headline:'{SYM} staking rewards increased to 15% APY',detail:'High yield attracting passive investors',impact:.6,crowd:13},
    {headline:'Central bank considers {NAME} as reserve asset',detail:'Unprecedented institutional validation',impact:.9,crowd:26},
    {headline:'{SYM} burn mechanism activated â€” 20% supply destroyed',detail:'Deflationary pressure building, price support',impact:.75,crowd:19},
    {headline:'{NAME} launches AI integration, market excited',detail:'Cutting-edge AI features drive adoption',impact:.7,crowd:17},
    {headline:'Billionaire reveals massive {SYM} position',detail:'Portfolio allocation leaked, bullish signal',impact:.65,crowd:14},
    {headline:'{NAME} bridge to Ethereum complete, cross-chain era',detail:'Interoperability unlocked, ecosystem expanding',impact:.6,crowd:12},
    {headline:'{SYM} NFT marketplace hits $1B trading volume',detail:'Digital art boom fuels token demand',impact:.5,crowd:10},
    {headline:'{NAME} zero-knowledge proof implementation live',detail:'Privacy + scalability breakthrough achieved',impact:.8,crowd:21},
    {headline:'Major payment processor integrates {SYM}',detail:'Millions of merchants now accept the token',impact:.85,crowd:23},
  ],
  bearish:[
    {headline:'URGENT: {NAME} smart contract vulnerability found',detail:'Critical bug report published, hack risk',impact:.9,crowd:-25},
    {headline:'{SYM} core devs â€” 3 resign simultaneously',detail:'Internal conflict rumors, roadmap uncertain',impact:.8,crowd:-20},
    {headline:'Regulators launch full investigation on {NAME}',detail:'Money laundering probe officially opened',impact:.85,crowd:-22},
    {headline:'{SYM} whale dumps 70% of holdings',detail:'Top 10 wallets selling simultaneously',impact:.75,crowd:-18},
    {headline:'"{NAME} is a scam" â€” Famous analyst drops bomb',detail:'1M-follower influencer exposes tech flaws',impact:.65,crowd:-15},
    {headline:'{SYM} network down for 6 hours',detail:'Node operators leaving, transactions halted',impact:.8,crowd:-20},
    {headline:'{NAME} partner files for bankruptcy',detail:'Key partner Chapter 11, chain reaction feared',impact:.7,crowd:-16},
    {headline:'Major exchange considering {SYM} delisting',detail:'Volume crash and regulatory risk cited',impact:.85,crowd:-24},
    {headline:'{NAME} team token massive unlock',detail:'15% of total supply released, sell pressure',impact:.6,crowd:-12},
    {headline:'Global rate hike shock hits {SYM}',detail:'Emergency rate hike, risk assets plunge',impact:.7,crowd:-18},
    {headline:'{NAME} founder under criminal investigation',detail:'SEC charges filed, assets frozen',impact:.9,crowd:-26},
    {headline:'{SYM} oracle exploit drains $50M from DeFi pool',detail:'Flash loan attack devastates ecosystem',impact:.85,crowd:-23},
    {headline:'{NAME} fails security audit â€” critical flaws',detail:'Independent auditor publishes damning report',impact:.75,crowd:-19},
    {headline:'Class-action lawsuit filed against {SYM} team',detail:'Investors allege fraud and misrepresentation',impact:.7,crowd:-17},
    {headline:'{NAME} mining difficulty spikes, hashrate crashes',detail:'Small miners capitulate, centralization fears',impact:.55,crowd:-12},
    {headline:'{SYM} competing chain gains 10x more users',detail:'Developer exodus to rival platform accelerates',impact:.6,crowd:-14},
    {headline:'{NAME} stablecoin depeg event causes panic',detail:'Ecosystem stablecoin loses peg briefly',impact:.8,crowd:-21},
    {headline:'Insider trading scandal rocks {SYM} team',detail:'Leaked messages show coordinated dumps',impact:.85,crowd:-24},
    {headline:'{NAME} liquidity pool drained by exploiter',detail:'$30M stolen, smart contract frozen',impact:.9,crowd:-27},
    {headline:'{SYM} removed from major index fund',detail:'Institutional rebalancing triggers sell-off',impact:.65,crowd:-15},
  ],
  neutral:[
    {headline:'{NAME} unveils new roadmap... mixed reactions',detail:'Innovative but feasibility questioned',impact:.4,crowd:0},
    {headline:'Regulation talks â€” market cautious on {SYM}',detail:'Major nations discuss crypto framework',impact:.5,crowd:-5},
    {headline:'{SYM} volume spikes, big event ahead?',detail:'Unusual trading patterns, direction unclear',impact:.3,crowd:0},
    {headline:'Market sideways, all eyes on {NAME}',detail:'Bulls and bears deadlocked, breakout pending',impact:.2,crowd:0},
    {headline:'{NAME} founder: "We haven\'t even started"',detail:'Long-term vision emphasized, no short-term catalyst',impact:.35,crowd:3},
    {headline:'{SYM} vs rivals: tech comparison trending',detail:'Expert media deep dive, pros and cons each',impact:.25,crowd:0},
    {headline:'{NAME} team restructures, new CTO appointed',detail:'Leadership change signals strategic pivot',impact:.4,crowd:-2},
    {headline:'{SYM} wallet update delayed to next quarter',detail:'Development takes longer than expected',impact:.3,crowd:-3},
    {headline:'{NAME} enters strategic review phase',detail:'Board evaluating multiple partnership offers',impact:.45,crowd:2},
    {headline:'Academic paper analyzes {SYM} consensus model',detail:'MIT research highlights strengths and weaknesses',impact:.2,crowd:0},
    {headline:'{NAME} testnet V2 shows promising results',detail:'Beta testing positive but mainnet date unknown',impact:.35,crowd:4},
    {headline:'{SYM} community split over governance proposal',detail:'Heated debate on protocol changes continues',impact:.4,crowd:-2},
    {headline:'{NAME} hackathon draws 500 developers',detail:'Ecosystem growth potential evident',impact:.3,crowd:3},
    {headline:'Analysts divided on {SYM} price trajectory',detail:'Bull and bear cases both compelling',impact:.25,crowd:0},
    {headline:'{NAME} integrates with Layer 2 solution',detail:'Scalability improved but adoption uncertain',impact:.35,crowd:2},
    {headline:'{SYM} whale activity detected, direction unclear',detail:'Large transactions moving between wallets',impact:.3,crowd:0},
    {headline:'{NAME} releases quarterly transparency report',detail:'Mixed metrics, community digesting data',impact:.2,crowd:-1},
    {headline:'{SYM} conference keynote receives mixed reviews',detail:'Ambitious vision but short on technical details',impact:.3,crowd:0},
  ]
};

const MARKET_NEWS_POOL_EN={
  bullish:[
    {headline:'ğŸŒ Global institutions flood into crypto market',detail:'Pension funds allocating 5% to crypto',impact:.5,crowd:8},
    {headline:'ğŸ’° Crypto market cap hits all-time high',detail:'Bull market, new capital inflows accelerating',impact:.4,crowd:6},
    {headline:'ğŸ“± Big tech announces crypto payment integration',detail:'Real-world use cases expanding, optimism grows',impact:.45,crowd:7},
    {headline:'ğŸ¦ Major bank launches crypto custody service',detail:'Traditional finance embracing digital assets',impact:.5,crowd:8},
    {headline:'ğŸ“Š Crypto adoption rate doubles year-over-year',detail:'Emerging markets driving exponential growth',impact:.4,crowd:6},
    {headline:'ğŸ”‘ SEC approves spot crypto ETFs for retail',detail:'Barrier to entry removed, flood of new investors expected',impact:.6,crowd:10},
    {headline:'ğŸ’ Sovereign wealth fund allocates $10B to crypto',detail:'Largest government investment in digital assets',impact:.55,crowd:9},
    {headline:'ğŸŒ G20 endorses crypto-friendly regulatory framework',detail:'Global regulatory clarity boosts market confidence',impact:.5,crowd:8},
    {headline:'ğŸš€ Global crypto daily volume breaks record',detail:'$500B traded in 24 hours, momentum building',impact:.45,crowd:7},
  ],
  bearish:[
    {headline:'ğŸ”» Fed emergency statement â€” tightening accelerates',detail:'Risk asset pressure, sentiment freezing',impact:.5,crowd:-8},
    {headline:'ğŸš¨ Major exchange hacked, market panic',detail:'Hundreds of millions drained, trust shattered',impact:.55,crowd:-10},
    {headline:'âš–ï¸ Major nations push total crypto ban',detail:'Mass exodus fears, panic spreading',impact:.5,crowd:-9},
    {headline:'ğŸ’¥ Stablecoin giant loses peg, contagion fears',detail:'$50B stablecoin wobbles, DeFi cascading liquidations',impact:.6,crowd:-11},
    {headline:'ğŸšï¸ Three crypto lenders file bankruptcy simultaneously',detail:'Credit crisis spreads through crypto ecosystem',impact:.55,crowd:-10},
    {headline:'ğŸ“‰ Global recession fears tank all risk assets',detail:'Stock and crypto markets plunge in unison',impact:.5,crowd:-9},
    {headline:'ğŸ”’ Largest DeFi protocol exploited for $200M',detail:'Systemic vulnerability shakes investor confidence',impact:.55,crowd:-10},
    {headline:'âš ï¸ Tax authorities crack down on crypto profits',detail:'Retroactive taxation proposed in major economies',impact:.45,crowd:-8},
    {headline:'ğŸŒŠ Record $2B in leveraged longs liquidated',detail:'Cascade liquidation event triggers market crash',impact:.6,crowd:-11},
  ]
};

const RANK_COMMENTS_EN={
1:'ğŸ† Legendary investor! You are the GOAT of crypto trading!',
2:'ğŸ‘‘ King of the market! Warren Buffett would ask YOU for tips.',
3:'ğŸŒŸ Genius instincts! Your trading journal belongs in textbooks.',
4:'ğŸ’ Ultimate diamond hands. Nerves of absolute steel.',
5:'ğŸ”¥ Legendary returns! Fund managers are lining up to recruit you.',
6:'ğŸ¦… Eagle-eyed market vision. Astonishing judgment!',
7:'âš¡ Lightning-fast timing! Better than most pro traders.',
8:'ğŸ¯ Every call was precise. You\'re a market sniper.',
9:'ğŸš€ Profits soaring like a rocket! Outstanding performance.',
10:'ğŸ’° Top 10%! Exceptional investment instincts.',
11:'ğŸ… Elite investor. Be proud of yourself.',
12:'ğŸ“ˆ Remarkable results! You can clearly read the market.',
13:'ğŸ–ï¸ Better returns than most fund managers. Impressive!',
14:'âœ¨ Shining track record! Real investing talent showing.',
15:'ğŸŒˆ Turned crisis into opportunity. A wise investor.',
16:'ğŸ¹ Master of timing! Buy and sell points were perfect.',
17:'ğŸ’ª Steel mentality conquered the volatility. Impressive!',
18:'ğŸ”® Great market prediction skills. A promising future!',
19:'ğŸª Survived the rollercoaster market brilliantly!',
20:'ğŸ“Š Top 20%! Pretty solid investment skills.',
21:'ğŸ€ Both luck and skill were on your side.',
22:'â­ Impressive gains! Worth bragging to your friends.',
23:'ğŸ¯ Good diversification and timing. Textbook strategy!',
24:'ğŸ”‘ You have the knack for spotting key opportunities.',
25:'ğŸ“± Go ahead and show off your portfolio on social media!',
26:'ğŸŒ¿ Steady growth with a healthy investment style.',
27:'ğŸ¢ Rode the waves like a surfer on the market!',
28:'ğŸ§­ Great sense of direction in your investments.',
29:'ğŸƒ Ahead of the majority â€” agile investor.',
30:'ğŸ‘ Top 30%! Well above average results.',
31:'ğŸ“˜ Solid fundamentals in your trading style.',
32:'ğŸŒ¤ï¸ A bright report card, like a sunny day.',
33:'ğŸµ Rhythmic trading! You caught the market\'s beat.',
34:'ğŸ§© Strategic investing, like solving a puzzle.',
35:'ğŸŒ± High growth potential! More experience will make you great.',
36:'ğŸˆ Decent results. Keep challenging yourself!',
37:'ğŸ”§ A little more refinement and you\'ll be excellent.',
38:'ğŸµ Stayed calm and steady. Good mental game.',
39:'ğŸŒŠ Kept your own pace without getting swept away.',
40:'ğŸ“— Not bad! Above average performance.',
41:'ğŸ­ Navigated the volatility reasonably well.',
42:'ğŸ§® Your calculated approach paid off to some extent.',
43:'ğŸŒ» Growing like a sunflower reaching for the sun!',
44:'ğŸ² Luck played a part. Next time, rely on skill!',
45:'ğŸ›¡ï¸ Defensive investing protected your assets well.',
46:'âš–ï¸ Tried to maintain a balanced portfolio.',
47:'ğŸƒ Swayed by the wind, but roots stayed firm.',
48:'ğŸ“ Conservative investing. Not losing big is a plus.',
49:'ğŸ£ Caught some bait, dodged some others.',
50:'ğŸ“Š Right in the middle! Half winning, half learning.',
51:'ğŸŒ¥ï¸ Cloudy results. Clearing up is possible.',
52:'ğŸ” Good analysis, but execution could improve.',
53:'ğŸª Held your own in the market circus.',
54:'ğŸ§Š Tried to stay cool but wavered at times.',
55:'ğŸ“¦ Conservative approach was a double-edged sword.',
56:'ğŸŒ§ï¸ Slightly disappointing. Read the news more carefully next time.',
57:'ğŸ¢ Turtle strategy... slow but was it safe?',
58:'ğŸ­ A lot of hesitation between buying and selling.',
59:'ğŸ§ª Some experimental trades, mixed results.',
60:'ğŸ“‰ Below average, but still okay. Experience is wealth!',
61:'ğŸŒ«ï¸ Investing felt like walking through fog.',
62:'ğŸ¯ Good aim, but the target kept moving.',
63:'ğŸ§© Strategy felt like a puzzle with missing pieces.',
64:'ğŸ‚ Assets fell gently like autumn leaves.',
65:'ğŸ“ Several turns need a review.',
66:'ğŸš¶ Walking slowly, drifted a bit from the goal.',
67:'ğŸŒ¬ï¸ Misread the wind direction a few times.',
68:'ğŸˆ Assets leaked slowly like a deflating balloon.',
69:'ğŸ”® Predictions were off more often than not.',
70:'ğŸ“Š Bottom 30%. Focus more on news analysis.',
71:'ğŸŒŠ Got swept by the waves a bit. Hold stronger next time!',
72:'ğŸ² Lady Luck wasn\'t on your side this time.',
73:'ğŸ§— The climb was tough, but not giving up is admirable.',
74:'ğŸŒ§ï¸ A rainy day for investing... needed an umbrella.',
75:'ğŸ“‰ Struggled in the downturn. Try hedging next time!',
76:'ğŸ­ Got caught up in crowd psychology a few times.',
77:'ğŸ§Š Lost composure at critical moments.',
78:'ğŸª If the market clowned you, you\'re not alone.',
79:'ğŸ“¦ Overall timing was unfortunate.',
80:'ğŸ’Š A bitter pill to swallow, but valuable lessons learned.',
81:'ğŸŒªï¸ The market tornado got you good this time.',
82:'ğŸ° More gambling than investing in some turns.',
83:'ğŸ§² Got attracted to all the wrong signals.',
84:'ğŸ“‰ Heavy losses. Time for a strategy overhaul.',
85:'ğŸŒ‹ Portfolio erupted... and not in a good way.',
86:'ğŸ­ FOMO took the wheel more than once.',
87:'ğŸ§Š Should have gone with your gut less often.',
88:'ğŸª The market played you. Happens to everyone.',
89:'ğŸ“¦ Almost nothing went right. Reverse strategy next time!',
90:'ğŸ˜° Bottom 10%... but hey, at least you didn\'t go bankrupt!',
91:'ğŸ° Some turns were more gamble than investment...',
92:'ğŸ“‰ Did you read the news backwards? Double check next time.',
93:'ğŸ§Š Slipped on ice kind of investing.',
94:'ğŸŒŠ Took a big wave head-on and got soaked.',
95:'ğŸ“¦ Almost every call was wrong. Inverse = #1!',
96:'ğŸ­ Did a scam coin get you? Check your portfolio...',
97:'ğŸ’¸ Assets melted away... inverse would\'ve been a jackpot.',
98:'ğŸš¨ Just released from investment prison.',
99:'ğŸ†˜ Someone send help to this investor!',
100:'ğŸ’€ Legendary losses... at this point it\'s almost a talent.'
};

const DOMINANT_COIN={sym:'BTCX',name:'ë¹„íŠ¸ì—‘ìŠ¤',nameEn:'BitcoinX',color:'#f7931a',isDominant:true};
const COIN_NAME_POOL=[
  {sym:'NOVA',name:'ë…¸ë°”ì½”ì¸',nameEn:'NovaCoin',color:'#e040fb'},{sym:'ZENX',name:'ì œë‹‰ìŠ¤',nameEn:'Zenix',color:'#7c4dff'},
  {sym:'BOLT',name:'ë³¼íŠ¸ì²´ì¸',nameEn:'BoltChain',color:'#ff6d00'},{sym:'LYNX',name:'ë§í¬ìŠ¤',nameEn:'Lynx',color:'#00e5ff'},
  {sym:'DUSK',name:'ë”ìŠ¤í¬',nameEn:'Dusk',color:'#546e7a'},{sym:'FLUX',name:'í”ŒëŸ­ìŠ¤',nameEn:'Flux',color:'#76ff03'},
  {sym:'ORCA',name:'ì˜¤ë¥´ì¹´',nameEn:'Orca',color:'#2979ff'},{sym:'PYRE',name:'íŒŒì´ì–´',nameEn:'Pyre',color:'#ff1744'},
  {sym:'IRIS',name:'ì•„ì´ë¦¬ìŠ¤',nameEn:'Iris',color:'#d500f9'},{sym:'KODA',name:'ì½”ë‹¤',nameEn:'Koda',color:'#00bfa5'},
  {sym:'RYZE',name:'ë¼ì´ì¦ˆ',nameEn:'Ryze',color:'#ffab00'},{sym:'VYNE',name:'ë°”ì¸',nameEn:'Vyne',color:'#69f0ae'},
  {sym:'APEX',name:'ì—ì´í™ìŠ¤',nameEn:'Apex',color:'#f50057'},{sym:'CUBE',name:'íë¸Œ',nameEn:'Cube',color:'#304ffe'},
  {sym:'ECHO',name:'ì—ì½”',nameEn:'Echo',color:'#18ffff'},{sym:'HALO',name:'í—¤ì¼ë¡œ',nameEn:'Halo',color:'#ffd600'},
  {sym:'JADE',name:'ì œì´ë“œ',nameEn:'Jade',color:'#00c853'},{sym:'MOON',name:'ë¬¸ì½”ì¸',nameEn:'MoonCoin',color:'#b388ff'},
  {sym:'NEON',name:'ë„¤ì˜¨',nameEn:'Neon',color:'#64ffda'},{sym:'ONYX',name:'ì˜¤ë‹‰ìŠ¤',nameEn:'Onyx',color:'#cfd8dc'},
  {sym:'PIXEL',name:'í”½ì…€',nameEn:'Pixel',color:'#ea80fc'},{sym:'QUASAR',name:'í€˜ì´ì‚¬',nameEn:'Quasar',color:'#40c4ff'},
];
const SCAM_NAME_POOL=[
  {sym:'NOVA',name:'ë…¸ë°”ì²´ì¸',nameEn:'NovaChain',color:'#f5a623'},{sym:'AURA',name:'ì•„ìš°ë¼AI',nameEn:'AuraAI',color:'#5fcfca'},
  {sym:'ZENI',name:'ì œë‹ˆí† í°',nameEn:'ZeniToken',color:'#e74c3c'},{sym:'LYNK',name:'ë§í¬íŒŒì´',nameEn:'LynkFi',color:'#ff6b6b'},
  {sym:'ORBN',name:'ì˜¤ë¥´ë¹—ë„·',nameEn:'OrbitNet',color:'#ff9ff3'},
];

const NEWS_POOL={
  bullish:[
    {headline:'{NAME}, ëŒ€í˜• ê±°ë˜ì†Œ 3ê³³ ë™ì‹œ ìƒì¥ í™•ì •',detail:'ê¸€ë¡œë²Œ TOP3 ê±°ë˜ì†Œ ë™ì‹œ ìƒì¥, ê±°ë˜ëŸ‰ í­ì¦ ì˜ˆìƒ',impact:.9,crowd:25},
    {headline:'"{SYM} ìƒíƒœê³„ í˜ëª…" â€” ê¸€ë¡œë²Œ ê¸°ì—… íŒŒíŠ¸ë„ˆì‹­ ì²´ê²°',detail:'í¬ì¶˜500 ê¸°ì—…ê³¼ ì „ëµì  ì œíœ´',impact:.85,crowd:20},
    {headline:'{NAME} ë©”ì¸ë„· ì—…ê·¸ë ˆì´ë“œ ì„±ê³µ, TPS 100ë°° í–¥ìƒ',detail:'ì²˜ë¦¬ì†ë„ íšê¸°ì  ê°œì„ , ê°œë°œì í™˜í˜¸',impact:.75,crowd:18},
    {headline:'ê³ ë˜ ì§€ê°‘, {SYM} $500ë§Œ ì¶”ê°€ ë§¤ìˆ˜ í¬ì°©',detail:'ëŒ€í˜• íˆ¬ìì ì—°ì† 3ì¼ ë§¤ì§‘ ì¤‘',impact:.7,crowd:15},
    {headline:'{NAME}, ì •ë¶€ ë¸”ë¡ì²´ì¸ ì‚¬ì—… ìš°ì„ í˜‘ìƒ ëŒ€ìƒì ì„ ì •',detail:'ê³µê³µê¸°ê´€ ì¸í”„ë¼ êµ¬ì¶•ì— í•µì‹¬ ê¸°ìˆ  ì±„íƒ',impact:.8,crowd:22},
    {headline:'ìœ ëª… í€ë“œë§¤ë‹ˆì € "ì§€ê¸ˆ {SYM} ì•ˆ ì‚¬ë©´ í›„íšŒ"',detail:'ì›”ê°€ ì „ì„¤ì  íˆ¬ìì ê°•ë ¥ ë§¤ìˆ˜ ì¶”ì²œ',impact:.6,crowd:12},
    {headline:'{NAME} ì»¤ë®¤ë‹ˆí‹° 100ë§Œ ëŒíŒŒ',detail:'ì¼ì¼ í™œì„± ì‚¬ìš©ì ê¸‰ì¦, ì„±ì¥ì„¸ ê°€ì†í™”',impact:.5,crowd:10},
    {headline:'{SYM} ë””íŒŒì´ í”„ë¡œí† ì½œ ì¶œì‹œ, TVL ê¸‰ë“±',detail:'í˜ì‹ ì  ìˆ˜ìµë¥  êµ¬ì¡°ë¡œ ìœ ë™ì„± ëŒ€ê±° ìœ ì…',impact:.65,crowd:14},
    {headline:'ì†ë³´: {NAME} ETF ìŠ¹ì¸ ì„ë°•ì„¤ í™•ì‚°',detail:'ê·œì œ ë‹¹êµ­ ë‚´ë¶€ ì†Œì‹í†µ, ì´ë²ˆ ë‹¬ ë‚´ ê²°ì •',impact:.95,crowd:28},
    {headline:'{SYM} ë°˜ê°ê¸° D-30, ê³µê¸‰ ì¶•ì†Œ ê¸°ëŒ€ê°',detail:'ì—­ì‚¬ì  ë°˜ê°ê¸° ì „í›„ í‰ê·  200% ìƒìŠ¹',impact:.7,crowd:16},
    {headline:'{NAME}, ê¸€ë¡œë²Œ ë¸”ë¡ì²´ì¸ ì–´ì›Œë“œ ìµœìš°ìˆ˜ í˜ì‹ ìƒ ìˆ˜ìƒ',detail:'ì—…ê³„ ê¶Œìœ„ ìˆëŠ” ì‹œìƒì‹ì—ì„œ ê¸°ìˆ ë ¥ ì¸ì •',impact:.55,crowd:11},
    {headline:'{SYM} ìŠ¤í…Œì´í‚¹ ë³´ìƒë¥  15% APYë¡œ ìƒí–¥',detail:'ë†’ì€ ìˆ˜ìµë¥ ì— ì¥ê¸° íˆ¬ìì ëŒ€ê±° ìœ ì…',impact:.6,crowd:13},
    {headline:'ì¤‘ì•™ì€í–‰, {NAME}ì„ ì¤€ë¹„ìì‚°ìœ¼ë¡œ ê²€í†  ì¤‘',detail:'ì „ë¡€ ì—†ëŠ” ì œë„ê¶Œ ì¸ì •, ì—­ì‚¬ì  ì‚¬ê±´',impact:.9,crowd:26},
    {headline:'{SYM} ì†Œê° ë©”ì»¤ë‹ˆì¦˜ ê°€ë™ â€” ê³µê¸‰ëŸ‰ 20% ì†Œë©¸',detail:'ë””í”Œë ˆì´ì…˜ ì••ë ¥ ë³¸ê²©í™”, ê°€ê²© ì§€ì§€',impact:.75,crowd:19},
    {headline:'{NAME}, AI í†µí•© ê¸°ëŠ¥ ì¶œì‹œë¡œ ì‹œì¥ í¥ë¶„',detail:'ìµœì²¨ë‹¨ AI ê¸°ìˆ  íƒ‘ì¬, ì±„íƒë¥  ê¸‰ì¦',impact:.7,crowd:17},
    {headline:'ì–µë§Œì¥ì íˆ¬ìì, {SYM} ëŒ€ëŸ‰ ë³´ìœ  ì‚¬ì‹¤ ê³µê°œ',detail:'í¬íŠ¸í´ë¦¬ì˜¤ ìœ ì¶œ, ê°•ë ¥í•œ ë§¤ìˆ˜ ì‹ í˜¸',impact:.65,crowd:14},
    {headline:'{NAME}, ì´ë”ë¦¬ì›€ ë¸Œë¦¿ì§€ ì™„ì„± â€” í¬ë¡œìŠ¤ì²´ì¸ ì‹œëŒ€ ê°œë§‰',detail:'ìƒí˜¸ìš´ìš©ì„± í™•ë³´, ìƒíƒœê³„ ëŒ€í­ í™•ì¥',impact:.6,crowd:12},
    {headline:'{SYM} NFT ë§ˆì¼“í”Œë ˆì´ìŠ¤ ê±°ë˜ëŸ‰ $10ì–µ ëŒíŒŒ',detail:'ë””ì§€í„¸ ì•„íŠ¸ ì—´í’ì´ í† í° ìˆ˜ìš” ê²¬ì¸',impact:.5,crowd:10},
    {headline:'{NAME}, ì˜ì§€ì‹ ì¦ëª… êµ¬í˜„ ì™„ë£Œ',detail:'í”„ë¼ì´ë²„ì‹œì™€ í™•ì¥ì„± ë™ì‹œ ë‹¬ì„±, ê¸°ìˆ ì  ëŒíŒŒ',impact:.8,crowd:21},
    {headline:'ëŒ€í˜• ê²°ì œ ì„œë¹„ìŠ¤, {SYM} í†µí•© ë°œí‘œ',detail:'ìˆ˜ë°±ë§Œ ê°€ë§¹ì ì—ì„œ ê²°ì œ ê°€ëŠ¥, ì‹¤ì‚¬ìš© í™•ëŒ€',impact:.85,crowd:23},
    {headline:'{NAME} ì¬ë‹¨, 10ì–µ ë‹¬ëŸ¬ ìƒíƒœê³„ í€ë“œ ì¡°ì„±',detail:'ê°œë°œì ì§€ì› ë° ìƒíƒœê³„ ì„±ì¥ì— ëŒ€ê·œëª¨ íˆ¬ì',impact:.75,crowd:18},
    {headline:'{SYM}, ì „ ì„¸ê³„ ATM ë„¤íŠ¸ì›Œí¬ ì—°ë™ í™•ì •',detail:'ì˜¤í”„ë¼ì¸ ì ‘ê·¼ì„± íšê¸°ì  ê°œì„ ',impact:.7,crowd:16},
    {headline:'{NAME} ë ˆì´ì–´2 ì†”ë£¨ì…˜, ìˆ˜ìˆ˜ë£Œ 99% ì ˆê° ë‹¬ì„±',detail:'ê°€ìŠ¤ë¹„ ë¬¸ì œ ì™„ì „ í•´ê²°, ì‚¬ìš©ì í­ì¦',impact:.8,crowd:20},
    {headline:'ë…¸ë²¨ê²½ì œí•™ìƒ ìˆ˜ìƒì "{SYM}ì€ ë¯¸ë˜ í™”í"',detail:'í•™ê³„ ìµœê³  ê¶Œìœ„ìì˜ ê³µê°œ ì§€ì§€',impact:.7,crowd:15},
    {headline:'{NAME}, ê¸€ë¡œë²Œ ê²Œì„ì‚¬ì™€ ë©”íƒ€ë²„ìŠ¤ íŒŒíŠ¸ë„ˆì‹­',detail:'ìˆ˜ì–µ ëª… ê²Œì´ë¨¸ì—ê²Œ ë…¸ì¶œ, ì±„íƒ ê°€ì†',impact:.65,crowd:14},
    {headline:'{SYM} ë³´ì•ˆ ê°ì‚¬ ìµœê³  ë“±ê¸‰ íšë“',detail:'ì„¸ê³„ ìµœê³  ê°ì‚¬ ê¸°ê´€ì—ì„œ ë§Œì  í‰ê°€',impact:.6,crowd:12},
    {headline:'{NAME} ì¼ì¼ í™œì„± ì£¼ì†Œ ì‚¬ìƒ ìµœê³ ì¹˜',detail:'ì‹¤ì‚¬ìš© ì§€í‘œ ê¸‰ë“±, í€ë”ë©˜íƒˆ ê°•í™”',impact:.55,crowd:11},
    {headline:'{SYM}, ì£¼ìš” í—¤ì§€í€ë“œ 3ê³³ ë™ì‹œ ë§¤ìˆ˜ í¬ì°©',detail:'ê¸°ê´€ ìê¸ˆ ëŒ€ê±° ìœ ì… ì‹œì‘ ì‹ í˜¸',impact:.75,crowd:19},
    {headline:'{NAME} ì°½ë¦½ì, íƒ€ì„ì§€ ì˜¬í•´ì˜ ì¸ë¬¼ ì„ ì •',detail:'ì•”í˜¸í™”í ì‚°ì—…ì˜ ìœ„ìƒ ì œê³ ',impact:.5,crowd:10},
    {headline:'{SYM} íƒˆì¤‘ì•™ ê±°ë²„ë„ŒìŠ¤ ì„±ê³µì  ì „í™˜',detail:'ì™„ì „í•œ DAO ì²´ê³„ êµ¬ì¶•, ë¶„ì‚°í™” ë‹¬ì„±',impact:.6,crowd:13},
  ],
  bearish:[
    {headline:'ê¸´ê¸‰: {NAME} ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì·¨ì•½ì  ë°œê²¬',detail:'ì¹˜ëª…ì  ë²„ê·¸ ë¦¬í¬íŠ¸ ê³µê°œ, í•´í‚¹ ìœ„í—˜',impact:.9,crowd:-25},
    {headline:'{SYM} í•µì‹¬ ê°œë°œì 3ëª… ë™ì‹œ í‡´ì‚¬',detail:'ë‚´ë¶€ ê°ˆë“±ì„¤ í™•ì‚°, ë¡œë“œë§µ ì´í–‰ ë¶ˆíˆ¬ëª…',impact:.8,crowd:-20},
    {headline:'ê·œì œ ë‹¹êµ­, {NAME} ê±°ë˜ ì „ë©´ ì¡°ì‚¬ ì°©ìˆ˜',detail:'ìê¸ˆì„¸íƒ ì˜í˜¹ìœ¼ë¡œ ê³µì‹ ì¡°ì‚¬ ê°œì‹œ',impact:.85,crowd:-22},
    {headline:'{SYM} ê³ ë˜ ì§€ê°‘, ë³´ìœ ë¶„ 70% ëŒ€ëŸ‰ ë§¤ë„',detail:'ìƒìœ„ 10ê°œ ì§€ê°‘ ë™ì‹œ ë§¤ë„ ì‹ í˜¸',impact:.75,crowd:-18},
    {headline:'"{NAME}ëŠ” ì‚¬ê¸°" â€” ìœ ëª… ë¶„ì„ê°€ í­íƒ„ ë°œì–¸',detail:'100ë§Œ íŒ”ë¡œì›Œ ì¸í”Œë£¨ì–¸ì„œ ê¸°ìˆ  ê²°í•¨ ë¶„ì„',impact:.65,crowd:-15},
    {headline:'{SYM} ë„¤íŠ¸ì›Œí¬ 6ì‹œê°„ì§¸ ë‹¤ìš´',detail:'ë…¸ë“œ ìš´ì˜ì ì´íƒˆ, íŠ¸ëœì­ì…˜ ì™„ì „ ì¤‘ë‹¨',impact:.8,crowd:-20},
    {headline:'{NAME} íŒŒíŠ¸ë„ˆì‚¬ íŒŒì‚° ì‹ ì²­',detail:'í•µì‹¬ í˜‘ë ¥ ê¸°ì—… Chapter 11, ì—°ì‡„ ì˜í–¥ ìš°ë ¤',impact:.7,crowd:-16},
    {headline:'ì£¼ìš” ê±°ë˜ì†Œ, {SYM} ìƒì¥ íì§€ ê²€í† ',detail:'ê±°ë˜ëŸ‰ ê¸‰ê°ê³¼ ê·œì œ ë¦¬ìŠ¤í¬ë¡œ í‡´ì¶œ ê°€ëŠ¥ì„±',impact:.85,crowd:-24},
    {headline:'{NAME} íŒ€ ë¬¼ëŸ‰ ëŒ€ê·œëª¨ ì–¸ë½',detail:'ì „ì²´ ê³µê¸‰ëŸ‰ 15% í•´ì œ, ë§¤ë„ ì••ë ¥ ì˜ˆìƒ',impact:.6,crowd:-12},
    {headline:'ê¸€ë¡œë²Œ ê¸ˆë¦¬ ì¸ìƒ ì‡¼í¬, {SYM} ì§ê²©íƒ„',detail:'ì—°ì¤€ ê¸´ê¸‰ ê¸ˆë¦¬ ì¸ìƒ, ìœ„í—˜ìì‚° ê¸‰ë½',impact:.7,crowd:-18},
    {headline:'{NAME} ì°½ë¦½ì, ì‚¬ê¸° í˜ì˜ë¡œ í˜•ì‚¬ ê¸°ì†Œ',detail:'SEC ê³µì‹ ê¸°ì†Œì¥ ì œì¶œ, ìì‚° ë™ê²°',impact:.9,crowd:-26},
    {headline:'{SYM} ì˜¤ë¼í´ ìµìŠ¤í”Œë¡œì‡, ë””íŒŒì´ í’€ $5ì²œë§Œ ìœ ì¶œ',detail:'í”Œë˜ì‹œë¡  ê³µê²©ìœ¼ë¡œ ìƒíƒœê³„ ì´ˆí† í™”',impact:.85,crowd:-23},
    {headline:'{NAME} ë³´ì•ˆ ê°ì‚¬ ë¶ˆí•©ê²© â€” ì¹˜ëª…ì  ê²°í•¨ ë‹¤ìˆ˜',detail:'ë…ë¦½ ê°ì‚¬ ê¸°ê´€ì˜ ì¶©ê²©ì  ë³´ê³ ì„œ ê³µê°œ',impact:.75,crowd:-19},
    {headline:'{SYM} íŒ€ ìƒëŒ€ ì§‘ë‹¨ ì†Œì†¡ ì œê¸°',detail:'íˆ¬ììë“¤, ì‚¬ê¸° ë° í—ˆìœ„ í‘œì‹œ í˜ì˜ ì£¼ì¥',impact:.7,crowd:-17},
    {headline:'{NAME} ì±„êµ´ ë‚œì´ë„ ê¸‰ë“±, í•´ì‹œë ˆì´íŠ¸ í­ë½',detail:'ì†Œê·œëª¨ ì±„êµ´ì ì´íƒˆ, ì¤‘ì•™í™” ìš°ë ¤',impact:.55,crowd:-12},
    {headline:'{SYM} ê²½ìŸ ì²´ì¸ì— ì‚¬ìš©ì 10ë°° ë¹¼ì•—ê²¨',detail:'ê°œë°œì ëŒ€ì´íƒˆ, ë¼ì´ë²Œ í”Œë«í¼ìœ¼ë¡œ ì´ë™',impact:.6,crowd:-14},
    {headline:'{NAME} ìŠ¤í…Œì´ë¸”ì½”ì¸ ë””í˜ê·¸ ì‚¬íƒœ ë°œìƒ',detail:'ìƒíƒœê³„ ìŠ¤í…Œì´ë¸”ì½”ì¸ ì¼ì‹œ í˜ê·¸ ì´íƒˆ, íŒ¨ë‹‰',impact:.8,crowd:-21},
    {headline:'{SYM} íŒ€ ë‚´ë¶€ì ê±°ë˜ ìŠ¤ìº”ë“¤ í­ë°œ',detail:'ìœ ì¶œëœ ë©”ì‹œì§€ì—ì„œ ì¡°ì§ì  ë§¤ë„ í™•ì¸',impact:.85,crowd:-24},
    {headline:'{NAME} ìœ ë™ì„± í’€, í•´ì»¤ì—ê²Œ íƒˆì·¨ë‹¹í•´',detail:'$3ì²œë§Œ ë„ë‚œ, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ê¸´ê¸‰ ë™ê²°',impact:.9,crowd:-27},
    {headline:'{SYM}, ì£¼ìš” ì¸ë±ìŠ¤ í€ë“œì—ì„œ í‡´ì¶œ',detail:'ê¸°ê´€ ë¦¬ë°¸ëŸ°ì‹±ìœ¼ë¡œ ëŒ€ê·œëª¨ ë§¤ë„ ì´‰ë°œ',impact:.65,crowd:-15},
    {headline:'{NAME} ë°±ì„œ í‘œì ˆ ì˜í˜¹ ì œê¸°',detail:'ê²½ìŸ í”„ë¡œì íŠ¸ì™€ 95% ìœ ì‚¬, ë…ì°½ì„± ë…¼ë€',impact:.6,crowd:-14},
    {headline:'{SYM} ì§€ê°‘ í•´í‚¹, ê°œì¸í‚¤ ìœ ì¶œ ì‚¬ê³ ',detail:'ìˆ˜ì²œ ê°œ ì§€ê°‘ í”¼í•´, ë³´ì•ˆ ì²´ê³„ ì‹ ë¢° ë¶•ê´´',impact:.85,crowd:-23},
    {headline:'{NAME} í”„ë¡œì íŠ¸, ê¹ƒí—ˆë¸Œ ì—…ë°ì´íŠ¸ 6ê°œì›”ì§¸ ì¤‘ë‹¨',detail:'ê°œë°œ ì‚¬ì‹¤ìƒ í¬ê¸° ì˜í˜¹, ëŸ¬ê·¸í’€ ìš°ë ¤',impact:.75,crowd:-20},
    {headline:'ëŒ€í˜• OTC ë°ìŠ¤í¬, {SYM} ë§¤ë„ ë¸”ë¡ í™•ì¸',detail:'ê¸°ê´€ íˆ¬ìì ëŒ€ê·œëª¨ ì²­ì‚° ì‹œì‘',impact:.7,crowd:-17},
    {headline:'{NAME} ì¬ë‹¨ ìê¸ˆ ìœ ìš© ì˜í˜¹ ë¶ˆê±°ì ¸',detail:'ìš´ì˜ë¹„ ì‚¬ì  ì‚¬ìš© ì •í™©, ê°ì‚¬ ìš”êµ¬ í­ì¦',impact:.8,crowd:-21},
    {headline:'{SYM} í…ŒìŠ¤íŠ¸ë„· ì¹˜ëª…ì  ì˜¤ë¥˜ë¡œ ì¶œì‹œ ë¬´ê¸°í•œ ì—°ê¸°',detail:'ê¸°ìˆ ì  ê²°í•¨ ì‹¬ê°, íˆ¬ìì ì‹ ë¢° ê¸‰ë½',impact:.7,crowd:-18},
    {headline:'{NAME} ì´ˆê¸° íˆ¬ìì ëŒ€ëŸ‰ ë§¤ë„ ì‹œì‘',detail:'VC ë¬¼ëŸ‰ ì–¸ë½ í›„ ì¦‰ì‹œ ì‹œì¥ ë§¤ë„',impact:.65,crowd:-15},
    {headline:'{SYM} ê±°ë˜ì†Œ ì…ê¸ˆ ì¼ì‹œ ì¤‘ë‹¨ ì¡°ì¹˜',detail:'ë„¤íŠ¸ì›Œí¬ ì´ìƒ ê°ì§€, ì…ì¶œê¸ˆ ì •ì§€',impact:.8,crowd:-22},
    {headline:'{NAME} ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ì ì „ì› ì‚¬í‡´',detail:'ë‚´ë¶€ ë¶„ì—´ ì‹¬í™”, í”„ë¡œì íŠ¸ ì™€í•´ ìš°ë ¤',impact:.6,crowd:-14},
    {headline:'ë³´í—˜ì‚¬, {SYM} ê´€ë ¨ ë³´í—˜ ìƒí’ˆ ì „ë©´ ì¤‘ë‹¨',detail:'ë¦¬ìŠ¤í¬ í‰ê°€ ìµœì•… ë“±ê¸‰, ì‹œì¥ ë¶ˆì•ˆ ê°€ì¤‘',impact:.7,crowd:-16},
  ],
  neutral:[
    {headline:'{NAME}, ì‹ ê·œ ë¡œë“œë§µ ë°œí‘œ... ë°˜ì‘ ì—‡ê°ˆë ¤',detail:'í˜ì‹ ì ì´ë‚˜ ì‹¤í˜„ ê°€ëŠ¥ì„± ì˜ë¬¸',impact:.4,crowd:0},
    {headline:'ê·œì œ ê°•í™” ë…¼ì˜ â€” {SYM} í¬í•¨ ì‹œì¥ ê²½ê³„',detail:'ì£¼ìš”êµ­ ì•”í˜¸í™”í ê·œì œ í”„ë ˆì„ì›Œí¬ ë…¼ì˜',impact:.5,crowd:-5},
    {headline:'{SYM} ê±°ë˜ëŸ‰ ê¸‰ë³€, ëŒ€í˜• ì´ë²¤íŠ¸ ì „ì¡°?',detail:'ë¹„ì •ìƒì  ê±°ë˜ íŒ¨í„´, ë°©í–¥ì„± ë¶ˆí™•ì‹¤',impact:.3,crowd:0},
    {headline:'ì‹œì¥ íš¡ë³´ì„¸, {NAME} í–¥ë°© ì£¼ëª©',detail:'ë§¤ìˆ˜Â·ë§¤ë„ ì„¸ë ¥ íŒ½íŒ½, ëŒíŒŒ ë°©í–¥ ê´€ì‹¬',impact:.2,crowd:0},
    {headline:'{NAME} ì°½ë¦½ì: "ì•„ì§ ì‹œì‘ë„ ì•ˆ í–ˆë‹¤"',detail:'ì¥ê¸° ë¹„ì „ ê°•ì¡°, ë‹¨ê¸° í˜¸ì¬ ë¶€ì¬',impact:.35,crowd:3},
    {headline:'{SYM} vs ê²½ìŸ ì½”ì¸, ê¸°ìˆ  ë¹„êµ í™”ì œ',detail:'ì „ë¬¸ ë§¤ì²´ ì‹¬ì¸µ ë¹„êµ, ê°ê° ì¥ë‹¨ì ',impact:.25,crowd:0},
    {headline:'{NAME} íŒ€ êµ¬ì¡°ì¡°ì •, ì‹ ì„ CTO ì„ ì„',detail:'ë¦¬ë”ì‹­ ë³€í™”ë¡œ ì „ëµ ë°©í–¥ ì „í™˜ ì‹œì‚¬',impact:.4,crowd:-2},
    {headline:'{SYM} ì§€ê°‘ ì—…ë°ì´íŠ¸ ë‹¤ìŒ ë¶„ê¸°ë¡œ ì—°ê¸°',detail:'ê°œë°œ ì¼ì • ì˜ˆìƒë³´ë‹¤ ì§€ì—°',impact:.3,crowd:-3},
    {headline:'{NAME}, ì „ëµì  ê²€í†  ë‹¨ê³„ ëŒì…',detail:'ì´ì‚¬íšŒ, ë‹¤ìˆ˜ íŒŒíŠ¸ë„ˆì‹­ ì œì•ˆ í‰ê°€ ì¤‘',impact:.45,crowd:2},
    {headline:'í•™ê³„ ë…¼ë¬¸, {SYM} í•©ì˜ ëª¨ë¸ ë¶„ì„',detail:'MIT ì—°êµ¬ì§„ ê°•ì ê³¼ ì•½ì  ë™ì‹œ ì§€ì ',impact:.2,crowd:0},
    {headline:'{NAME} í…ŒìŠ¤íŠ¸ë„· V2, ìœ ë§í•œ ê²°ê³¼ ì‹œí˜„',detail:'ë² íƒ€ í…ŒìŠ¤íŠ¸ ê¸ì •ì ì´ë‚˜ ë©”ì¸ë„· ì¼ì • ë¯¸ì •',impact:.35,crowd:4},
    {headline:'{SYM} ì»¤ë®¤ë‹ˆí‹°, ê±°ë²„ë„ŒìŠ¤ ì œì•ˆìœ¼ë¡œ ë¶„ì—´',detail:'í”„ë¡œí† ì½œ ë³€ê²½ ë†“ê³  ê²©ë ¬í•œ í† ë¡  ì§„í–‰ ì¤‘',impact:.4,crowd:-2},
    {headline:'{NAME} í•´ì»¤í†¤ì— 500ëª… ê°œë°œì ì°¸ê°€',detail:'ìƒíƒœê³„ ì„±ì¥ ì ì¬ë ¥ í™•ì¸',impact:.3,crowd:3},
    {headline:'ì• ë„ë¦¬ìŠ¤íŠ¸ë“¤, {SYM} ê°€ê²© ì „ë§ ì—‡ê°ˆë ¤',detail:'ìƒìŠ¹ë¡ ê³¼ í•˜ë½ë¡  ëª¨ë‘ ì„¤ë“ë ¥ ìˆì–´',impact:.25,crowd:0},
    {headline:'{NAME}, ë ˆì´ì–´2 ì†”ë£¨ì…˜ ì—°ë™ ì™„ë£Œ',detail:'í™•ì¥ì„± ê°œì„ ë˜ì—ˆìœ¼ë‚˜ ì±„íƒë¥ ì€ ë¯¸ì§€ìˆ˜',impact:.35,crowd:2},
    {headline:'{SYM} ê³ ë˜ í™œë™ ê°ì§€, ë°©í–¥ì„± ë¶ˆë¶„ëª…',detail:'ëŒ€ê·œëª¨ ì§€ê°‘ ê°„ ìê¸ˆ ì´ë™ í¬ì°©',impact:.3,crowd:0},
    {headline:'{NAME} ë¶„ê¸°ë³„ íˆ¬ëª…ì„± ë³´ê³ ì„œ ê³µê°œ',detail:'ì§€í‘œ í˜¼ì¬, ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ ì¤‘',impact:.2,crowd:-1},
    {headline:'{SYM} ì»¨í¼ëŸ°ìŠ¤ ê¸°ì¡°ì—°ì„¤, í‰ê°€ ì—‡ê°ˆë ¤',detail:'ì•¼ì‹¬ì°¬ ë¹„ì „ì´ë‚˜ ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ ë¶€ì¡±',impact:.3,crowd:0},
  ]
};
const MARKET_NEWS_POOL={
  bullish:[
    {headline:'ğŸŒ ê¸€ë¡œë²Œ ê¸°ê´€íˆ¬ìì ì•”í˜¸í™”í ì‹œì¥ ëŒ€ê±° ì§„ì…',detail:'ì—°ê¸°ê¸ˆÂ·ë³´í—˜ì‚¬ í¬íŠ¸í´ë¦¬ì˜¤ 5% ë°°ë¶„',impact:.5,crowd:8},
    {headline:'ğŸ’° ì•”í˜¸í™”í ì‹œê°€ì´ì•¡ ì‚¬ìƒ ìµœê³ ì¹˜ ê°±ì‹ ',detail:'ì‹œì¥ í™œí™©, ì‹ ê·œ ìê¸ˆ ìœ ì… ê°€ì†',impact:.4,crowd:6},
    {headline:'ğŸ“± ë¹…í…Œí¬, ì•”í˜¸í™”í ê²°ì œ í†µí•© ë°œí‘œ',detail:'ì‹¤ìƒí™œ ì‚¬ìš© ì‚¬ë¡€ í™•ëŒ€, ë‚™ê´€ë¡ ',impact:.45,crowd:7},
    {headline:'ğŸ¦ ëŒ€í˜• ì€í–‰, ì•”í˜¸í™”í ìˆ˜íƒ ì„œë¹„ìŠ¤ ê°œì‹œ',detail:'ì „í†µ ê¸ˆìœµì´ ë””ì§€í„¸ ìì‚° ë³¸ê²© ìˆ˜ìš©',impact:.5,crowd:8},
    {headline:'ğŸ“Š ê¸€ë¡œë²Œ ì•”í˜¸í™”í ì±„íƒë¥  ì „ë…„ ëŒ€ë¹„ 2ë°° ì¦ê°€',detail:'ì‹ í¥êµ­ ì¤‘ì‹¬ í­ë°œì  ì„±ì¥ì„¸',impact:.4,crowd:6},
    {headline:'ğŸ”‘ SEC, í˜„ë¬¼ ì•”í˜¸í™”í ETF ìŠ¹ì¸ ë°œí‘œ',detail:'ê°œì¸ íˆ¬ìì ì§„ì… ì¥ë²½ í•´ì†Œ, ì‹ ê·œ ìê¸ˆ í™ìˆ˜ ì˜ˆìƒ',impact:.6,crowd:10},
    {headline:'ğŸ’ êµ­ë¶€í€ë“œ, ì•”í˜¸í™”íì— $100ì–µ ë°°ë¶„ ê²°ì •',detail:'ì •ë¶€ ì°¨ì› ìµœëŒ€ ê·œëª¨ ë””ì§€í„¸ ìì‚° íˆ¬ì',impact:.55,crowd:9},
    {headline:'ğŸŒ G20, ì•”í˜¸í™”í ì¹œí™”ì  ê·œì œ í”„ë ˆì„ì›Œí¬ í•©ì˜',detail:'ê¸€ë¡œë²Œ ê·œì œ ëª…í™•ì„± í™•ë³´, ì‹œì¥ ì‹ ë¢° ê¸‰ë“±',impact:.5,crowd:8},
    {headline:'ğŸš€ ê¸€ë¡œë²Œ ì•”í˜¸í™”í ì¼ì¼ ê±°ë˜ëŸ‰ ì‹ ê¸°ë¡ ê²½ì‹ ',detail:'24ì‹œê°„ $5,000ì–µ ê±°ë˜, ëª¨ë©˜í…€ ê°€ì†',impact:.45,crowd:7},
  ],
  bearish:[
    {headline:'ğŸ”» ë¯¸ ì—°ì¤€ ê¸´ê¸‰ ì„±ëª… â€” ê¸´ì¶• ê°€ì†í™”',detail:'ìœ„í—˜ìì‚° í•˜ë½ ì••ë ¥, ì‹¬ë¦¬ ê¸‰ë­',impact:.5,crowd:-8},
    {headline:'ğŸš¨ ëŒ€í˜• ê±°ë˜ì†Œ í•´í‚¹, ì‹œì¥ íŒ¨ë‹‰',detail:'ìˆ˜ì–µ ë‹¬ëŸ¬ ìœ ì¶œ, ë³´ì•ˆ ì‹ ë¢° ì¶”ë½',impact:.55,crowd:-10},
    {headline:'âš–ï¸ ì£¼ìš”êµ­ ì•”í˜¸í™”í ì „ë©´ ê¸ˆì§€ë²• ì¶”ì§„',detail:'íˆ¬ìì ëŒ€ì´íƒˆ ìš°ë ¤, ê³µí¬ í™•ì‚°',impact:.5,crowd:-9},
    {headline:'ğŸ’¥ ëŒ€í˜• ìŠ¤í…Œì´ë¸”ì½”ì¸ ë””í˜ê·¸ ì‚¬íƒœ, ì „ì´ ê³µí¬',detail:'$500ì–µ ê·œëª¨ ìŠ¤í…Œì´ë¸”ì½”ì¸ í”ë“¤ë ¤, ë””íŒŒì´ ì—°ì‡„ ì²­ì‚°',impact:.6,crowd:-11},
    {headline:'ğŸšï¸ ì•”í˜¸í™”í ëŒ€ì¶œ ì—…ì²´ 3ê³³ ë™ì‹œ íŒŒì‚° ì‹ ì²­',detail:'ì‹ ìš© ìœ„ê¸° ì•”í˜¸í™”í ìƒíƒœê³„ ì „ì²´ë¡œ í™•ì‚°',impact:.55,crowd:-10},
    {headline:'ğŸ“‰ ê¸€ë¡œë²Œ ê²½ê¸° ì¹¨ì²´ ê³µí¬, ìœ„í—˜ìì‚° ì¼ì œ ê¸‰ë½',detail:'ì£¼ì‹Â·ì•”í˜¸í™”í ì‹œì¥ ë™ë°˜ í­ë½',impact:.5,crowd:-9},
    {headline:'ğŸ”’ ìµœëŒ€ ë””íŒŒì´ í”„ë¡œí† ì½œ, $2ì–µ í•´í‚¹ í”¼í•´',detail:'ì‹œìŠ¤í…œì  ì·¨ì•½ì  ë…¸ì¶œ, íˆ¬ì ì‹¬ë¦¬ ë¶•ê´´',impact:.55,crowd:-10},
    {headline:'âš ï¸ ì£¼ìš”êµ­ ì„¸ë¬´ë‹¹êµ­, ì•”í˜¸í™”í ìˆ˜ìµ ì†Œê¸‰ê³¼ì„¸ ì¶”ì§„',detail:'ì†Œê¸‰ ê³¼ì„¸ ë²•ì•ˆ ë°œì˜, íˆ¬ìì ì´íƒˆ ê°€ì†',impact:.45,crowd:-8},
    {headline:'ğŸŒŠ ë ˆë²„ë¦¬ì§€ ë¡± $20ì–µ ì—°ì‡„ ì²­ì‚° ì‚¬íƒœ',detail:'ìºìŠ¤ì¼€ì´ë“œ ì²­ì‚°ìœ¼ë¡œ ì‹œì¥ í­ë½ ê°€ì†',impact:.6,crowd:-11},
  ]
};

let COINS=[],SCAM_POOL=[];
const START_CASH=1000,MAX_TURNS=20,TURN_TIME=60,INFLATION_PER_TURN=0.005;

let cash=START_CASH,holdings={},prices={},priceHist={},changes={},orders={};
let turn=0,timeLeft=TURN_TIME,timerInterval=null,gameRunning=false;
let income=50,inflTotal=0,delistedSet=new Set(),scamTimers={},activeScam=null;
let currentNews=[],newsEffects={};
let newCoinSet=new Set(),usedCoinPool=new Set(),spawnedScams=new Set();
let allNewsHistory=[];

function generateRandomCoins(){
  const dom={...DOMINANT_COIN,baseP:Math.round((300+Math.random()*400)*100)/100};
  const rest=[...COIN_NAME_POOL].sort(()=>Math.random()-.5);
  const picked=rest.slice(0,7).map(c=>({...c,baseP:Math.round((5+Math.random()*55)*100)/100}));
  COINS=[dom,...picked];
  usedCoinPool=new Set(COINS.map(c=>c.sym));
  SCAM_POOL=[...SCAM_NAME_POOL].sort(()=>Math.random()-.5);
}

// â•â•â• ë‹¤êµ­ì–´ í—¬í¼ â•â•â•
function t(key){return T[lang][key]||T['ko'][key]||key;}
function coinName(c){return lang==='en'?(c.nameEn||c.name):c.name;}

// â•â•â• ë‰´ìŠ¤ ìƒì„± â•â•â•
function generateNews(){
  currentNews=[];newsEffects={};
  const ac=COINS.filter(c=>!delistedSet.has(c.sym)&&!c.isScam);
  if(!ac.length)return;
  const used=new Set(),usedIdx=new Set();
  function pick(){const a=ac.filter(c=>!used.has(c.sym));const c=(a.length?a:ac)[Math.floor(Math.random()*(a.length||ac.length))];used.add(c.sym);return c;}
  function makeHL(raw,coin){
    const koName=coin?coin.name:'',enName=coin?(coin.nameEn||coin.name):'';
    const hsKo=(s,nm)=>s.replace(/{SYM}/g,coin?`<span class="news-coin-name">${koName}</span>`:'').replace(/{NAME}/g,coin?`<span class="news-coin-name">${nm}</span>`:'');
    const hsEn=(s,nm)=>s.replace(/{SYM}/g,coin?`<span class="news-coin-name">${coin.sym}</span>`:'').replace(/{NAME}/g,coin?`<span class="news-coin-name">${nm}</span>`:'');
    return{headlineKo:hsKo(raw.ko.headline,koName),detailKo:hsKo(raw.ko.detail,koName),headlineEn:hsEn(raw.en.headline,enName),detailEn:hsEn(raw.en.detail,enName)};
  }
  function pickN(poolKo,poolEn,coin){
    const maxLen=Math.min(poolKo.length,poolEn.length);
    const l=Array.from({length:maxLen},(_,i)=>i).filter(i=>!usedIdx.has(i));
    const idx=l.length?l[Math.floor(Math.random()*l.length)]:Math.floor(Math.random()*maxLen);
    usedIdx.add(idx);
    const nKo=poolKo[idx],nEn=poolEn[idx];
    const hl=makeHL({ko:nKo,en:nEn},coin);
    return{...nKo,...hl};
  }
  const r=Math.random(),sent=r<.4?'bullish':r<.75?'bearish':'neutral';
  if(Math.random()<.3&&sent!=='neutral'){
    const pKo=MARKET_NEWS_POOL[sent],pEn=MARKET_NEWS_POOL_EN[sent];
    const idx=Math.floor(Math.random()*pKo.length);
    const hl=makeHL({ko:pKo[idx],en:pEn[idx]},null);
    currentNews.push({...pKo[idx],...hl,sentiment:sent,isMain:true,targetSym:'MARKET'});
    for(const c of ac)newsEffects[c.sym]=(newsEffects[c.sym]||0)+pKo[idx].crowd;
  }else{
    const coin=pick(),n=pickN(NEWS_POOL[sent],NEWS_POOL_EN[sent],coin);
    currentNews.push({...n,sentiment:sent,isMain:true,targetSym:coin.sym});
    newsEffects[coin.sym]=(newsEffects[coin.sym]||0)+n.crowd*(1+n.impact*.5);
    for(const c of ac)if(c.sym!==coin.sym)newsEffects[c.sym]=(newsEffects[c.sym]||0)+n.crowd*.15;
  }
  // ì‚¬ê¸° ì½”ì¸ í•˜ì´í”„ ë‰´ìŠ¤ ë¼ì›Œë„£ê¸°
  const activeScams=COINS.filter(c=>c.isScam&&!delistedSet.has(c.sym)&&scamTimers[c.sym]>1);
  let scamNewsInserted=false;
  for(let i=0;i<2;i++){
    // ì‚¬ê¸°ì½”ì¸ì´ ìˆê³  ì•„ì§ ê°€ì§œë‰´ìŠ¤ ì•ˆ ë„£ì—ˆìœ¼ë©´ ê°•ì œ í˜¸ì¬
    if(!scamNewsInserted&&activeScams.length>0&&Math.random()<0.7){
      const sc=activeScams[Math.floor(Math.random()*activeScams.length)];
      const n=pickN(NEWS_POOL['bullish'],NEWS_POOL_EN['bullish'],sc);
      currentNews.push({...n,sentiment:'bullish',isMain:false,targetSym:sc.sym,crowd:Math.abs(n.crowd)*1.5});
      newsEffects[sc.sym]=(newsEffects[sc.sym]||0)+Math.abs(n.crowd)*2;
      for(const c of ac)if(c.sym!==sc.sym)newsEffects[c.sym]=(newsEffects[c.sym]||0)+n.crowd*.05;
      scamNewsInserted=true;
    }else{
      const coin=pick(),r2=Math.random(),s2=r2<.4?'bullish':r2<.7?'bearish':'neutral';
      const n=pickN(NEWS_POOL[s2],NEWS_POOL_EN[s2],coin);
      currentNews.push({...n,sentiment:s2,isMain:false,targetSym:coin.sym});
      newsEffects[coin.sym]=(newsEffects[coin.sym]||0)+n.crowd;
      for(const c of ac)if(c.sym!==coin.sym)newsEffects[c.sym]=(newsEffects[c.sym]||0)+n.crowd*.08;
    }
  }
  // ë‰´ìŠ¤ íˆìŠ¤í† ë¦¬ ì €ì¥
  currentNews.forEach(n=>allNewsHistory.push({...n,turn}));
}

function renderNewsPanel(){
  const ct=document.getElementById('news-cards');
  ct.innerHTML='';
  if(!currentNews.length)return;
  currentNews.forEach((n,i)=>{
    const d=document.createElement('div');
    d.className='news-card';
    if(n.isMain)d.classList.add('main-news');
    const tc=n.sentiment==='bullish'?'bullish':n.sentiment==='bearish'?'bearish':'neutral';
    const tt=t(n.sentiment);
    const it=n.crowd>0?`+${n.crowd.toFixed(0)}%`:n.crowd<0?`${n.crowd.toFixed(0)}%`:'Â±0%';
    const ic=n.crowd>0?'positive':n.crowd<0?'negative':'';
    const hl=lang==='en'?(n.headlineEn||n.headline):n.headlineKo||n.headline;
    const dt=lang==='en'?(n.detailEn||n.detail):n.detailKo||n.detail;
    d.innerHTML=`<span class="news-tag ${tc}">${tt}</span><div class="news-impact ${ic}">${it}</div><div class="news-headline">${hl}</div><div class="news-detail">${dt}</div><span class="news-coin-badge">${n.targetSym==='MARKET'?t('market'):n.targetSym}</span>`;
    ct.appendChild(d);
  });
  // ëª¨ë°”ì¼ ë‰´ìŠ¤ ë°°ë„ˆë„ ì—…ë°ì´íŠ¸
  if(window.innerWidth<=768)renderMobileNewsBanners();
}

function renderMobileNewsBanners(){
  const slots=['news-banner-top','news-banner-mid','news-banner-bottom'];
  slots.forEach((id,i)=>{
    const el=document.getElementById(id);
    if(!el)return;
    const n=currentNews[i];
    if(!n){el.innerHTML='';return;}
    const tc=n.sentiment;
    const hl=lang==='en'?(n.headlineEn||n.headline):n.headlineKo||n.headline;
    const it=n.crowd>0?`+${n.crowd.toFixed(0)}%`:n.crowd<0?`${n.crowd.toFixed(0)}%`:'Â±0%';
    const ic=n.crowd>0?'positive':n.crowd<0?'negative':'';
    el.innerHTML=`<div class="news-banner-inner">
      <span class="nb-tag ${tc}">${t(tc)}</span>
      <span class="nb-headline">${hl}</span>
      <span class="nb-impact ${ic}">${it}</span>
    </div>`;
  });
}

// â•â•â• ì‹œì„¸ â•â•â•
function initPrices(){
  for(const c of COINS){
    if(c.isScam){prices[c.sym]=c.baseP;changes[c.sym]=Math.random()*20+5;priceHist[c.sym]=[c.baseP];continue;}
    prices[c.sym]=c.baseP;changes[c.sym]=Math.random()*10-5;priceHist[c.sym]=[c.baseP];
  }
}
function simulateNextTurn(){
  generateNews();

  // â•â•â• ê°€ê²© ìˆœìœ„ ê³„ì‚° (ë†’ì€ ìˆœ, ëŒ€ì¥ì£¼=1ë“±) â•â•â•
  const activeCoins=COINS.filter(c=>!delistedSet.has(c.sym)&&!c.isScam);
  const ranked=[...activeCoins].sort((a,b)=>(prices[b.sym]||0)-(prices[a.sym]||0));
  const rankMap={};ranked.forEach((c,i)=>rankMap[c.sym]=i+1);

  // ìˆœìœ„ë³„ ë³€ë™ì„± ë°°ìˆ˜ (1ë“±=0.4, ë‚®ì„ìˆ˜ë¡ ë†’ìŒ)
  function volByRank(r){
    if(r<=1)return 0.4;if(r<=2)return 0.6;if(r<=3)return 0.75;if(r<=4)return 0.9;
    if(r<=5)return 1.0;if(r<=6)return 1.2;if(r<=7)return 1.4;if(r<=8)return 1.6;
    return 1.8;
  }

  // â•â•â• ì‹œì„¸ ë³€ë™ â•â•â•
  for(const c of COINS){
    if(delistedSet.has(c.sym)){prices[c.sym]=0;changes[c.sym]=-100;continue;}
    const prev=prices[c.sym],trend=(changes[c.sym]||0)*.2;
    const rank=rankMap[c.sym]||99;
    let volMult=c.isScam?1.0:volByRank(rank);
    // ì „ì²´ ì‹œì¥ ë‰´ìŠ¤ ì‹œ ëŒ€ì¥ì£¼ë„ ë³€ë™ì„± ì¦ê°€
    if(c.isDominant&&Math.abs(newsEffects[c.sym]||0)>5)volMult=Math.min(1.5,volMult+0.7);
    const rnd=(Math.random()*20-10)*volMult;
    let base=trend+rnd*.8;
    let crowd=newsEffects[c.sym]||0;

    // â•â•â• ë‰´ìŠ¤ ë¶ˆì‹  ì•Œê³ ë¦¬ì¦˜ â•â•â•
    const reliability=0.3+Math.random()*0.8;
    crowd*=reliability;
    if(c.isScam&&scamTimers[c.sym]>1){crowd=Math.abs(crowd)+25+Math.random()*35;}
    const fakeChance=turn<=5?0.35:turn<=12?0.25:0.15;
    if(!c.isScam&&Math.abs(crowd)>3&&Math.random()<fakeChance){
      crowd=-crowd*(0.5+Math.random()*0.7);
    }
    if(Math.abs(crowd)>12&&Math.random()<0.30){
      crowd*=0.1+Math.random()*0.2;
    }
    const prevChange=changes[c.sym]||0;
    if(Math.abs(prevChange)>8){base+=-prevChange*(0.2+Math.random()*0.3);}
    const chaos=(Math.random()-0.5)*8*volMult;
    let total=base+crowd+chaos;
    // â•â•â• ì‹ ê·œ ì½”ì¸: ì§€ìˆ˜ í™•ë¥ ë¶„í¬ ë³€ë™ì„± (ìµœëŒ€ 300%) â•â•â•
    if(newCoinSet.has(c.sym)){
      const u=Math.random();
      const expSpike=-Math.log(1-u*0.9999)*35;
      if(Math.random()<0.55) total+=expSpike;
      else total-=expSpike*0.4;
      total=Math.max(-60,Math.min(300,total));
    // â•â•â• ì‚¬ê¸° ì½”ì¸: ê·¹ì  íŒí•‘ í›„ ëŸ¬ê·¸í’€ â•â•â•
    }else if(c.isScam){
      const timer=scamTimers[c.sym]||0;
      if(timer>1){
        // ìƒí ì „: ë¯¸ì¹œ ë“¯ì´ íŒí•‘ â€” ì§€ìˆ˜ë¶„í¬ë¡œ í­ë“± (ìµœëŒ€ 500%)
        const u=Math.random();
        const pumpSpike=-Math.log(1-u*0.9999)*50; // ë” ê°•í•œ í‰ê·  50%
        total+=pumpSpike;
        // í„´ì´ ì ê²Œ ë‚¨ì„ìˆ˜ë¡ ë” ê³¼ê²©í•˜ê²Œ (ê³µí¬ê° ì¡°ì„±ìš© ê¸‰ë“±)
        if(timer===2) total+=20+Math.random()*40;
        total=Math.max(-10,Math.min(500,total)); // í•˜ë½ ê±°ì˜ ì—†ì´ í­ë“±ë§Œ
      }else{
        // ìƒí ì§ì „ í„´: ë§ˆì§€ë§‰ ì†ì„ìˆ˜ ì†Œí­ ìƒìŠ¹
        total=5+Math.random()*15;
      }
    }else{
      total=Math.max(-30,Math.min(35,total)); // ê¸°ì¡´: -30% ~ +35%
    }
    const np=Math.max(.5,prev*(1+total/100));
    prices[c.sym]=np;changes[c.sym]=((np-prev)/prev)*100;
    priceHist[c.sym].push(np);if(priceHist[c.sym].length>30)priceHist[c.sym].shift();
  }

  // â•â•â• ì‚¬ê¸° ì½”ì¸ íƒ€ì´ë¨¸ â•â•â•
  for(const sym of Object.keys(scamTimers)){
    scamTimers[sym]--;
    if(scamTimers[sym]<=0&&!delistedSet.has(sym)){
      const scamCoin=COINS.find(c=>c.sym===sym);
      const hadHoldings=holdings[sym]&&holdings[sym].qty>0;
      const lostAmt=hadHoldings?(holdings[sym].qty*prices[sym]):0;
      delistedSet.add(sym);prices[sym]=0;changes[sym]=-100;
      showSysNews(`ğŸš¨ ${sym} ${lang==='en'?'was a SCAM.. Delisted.':'ì‚¬ê¸° ë°œê°.. ìƒì¥íì§€.'}`);
      if(hadHoldings){
        holdings[sym].qty=0;
        showScamPopup(scamCoin,lostAmt);
      }
    }
  }

  // â•â•â• ìˆœìœ„ë³„ ìƒì¥íì§€ í™•ë¥  (ëŒ€ì¥ì£¼Â·ì‚¬ê¸°ì½”ì¸ ì œì™¸) â•â•â•
  // ê¸°ì¡´ ëŒ€ë¹„ 50% ê°ì†Œ: 2ë“±:0.005%, 3ë“±:0.05%, 4ë“±:0.25%, 5ë“±:0.5%, 6ë“±:2.5%, 7ë“±:4%, 8ë“±:5%, ë‚˜ë¨¸ì§€:7.5%
  const DELIST_RATE={2:0.00005,3:0.0005,4:0.0025,5:0.005,6:0.025,7:0.04,8:0.05};
  const DEFAULT_DELIST=0.075;
  for(const c of activeCoins){
    if(c.isDominant)continue; // ëŒ€ì¥ì£¼ëŠ” ìƒì¥íì§€ ì—†ìŒ
    const rank=rankMap[c.sym]||99;
    if(rank<=1)continue; // 1ë“±(ëŒ€ì¥ì£¼) ìŠ¤í‚µ
    let chance=DELIST_RATE[rank]||DEFAULT_DELIST;
    // ì‹ ê·œ ì½”ì¸ì€ í™•ë¥  2ë°°
    if(newCoinSet.has(c.sym))chance*=2;
    if(Math.random()<chance){
      delistedSet.add(c.sym);prices[c.sym]=0;changes[c.sym]=-100;
      showSysNews(t('delisted').replace('%s',c.sym));
      if(holdings[c.sym]&&holdings[c.sym].qty>0)holdings[c.sym].qty=0;
    }
  }

  // â•â•â• ì‹ ê·œ ì½”ì¸ ìŠ¤í° (ìµœëŒ€ 2ê°œ, í„´ 4 ì´í›„) â•â•â•
  if(turn>3){
    const availPool=COIN_NAME_POOL.filter(c=>!usedCoinPool.has(c.sym));
    const activeCount=COINS.filter(c=>!delistedSet.has(c.sym)).length;
    const maxSpawn=Math.min(2,availPool.length,12-activeCount);
    for(let i=0;i<maxSpawn;i++){
      if(Math.random()<0.20){
        const nc=availPool.splice(Math.floor(Math.random()*availPool.length),1)[0];
        if(!nc)break;
        const newCoin={...nc,baseP:2+Math.random()*15};
        COINS.push(newCoin);usedCoinPool.add(nc.sym);newCoinSet.add(nc.sym);
        prices[nc.sym]=newCoin.baseP;changes[nc.sym]=Math.random()*20-5;
        priceHist[nc.sym]=[newCoin.baseP];
        showSysNews(`ğŸ“ˆ ${lang==='en'?'New listing':'ì‹ ê·œ ìƒì¥'}: ${coinName(nc)}(${nc.sym})`);
      }
    }
  }

  // â•â•â• ì‚¬ê¸° ì½”ì¸ ìŠ¤í° (ë³„ë„) â•â•â•
  if(turn>4&&Math.random()<0.15){
    const availScam=SCAM_POOL.filter(c=>!spawnedScams.has(c.sym)&&!delistedSet.has(c.sym));
    if(availScam.length>0){
      const sc=availScam[Math.floor(Math.random()*availScam.length)];
      const scamCoin={...sc,baseP:3+Math.random()*12,isScam:true};
      COINS.push(scamCoin);spawnedScams.add(sc.sym);
      prices[sc.sym]=scamCoin.baseP;changes[sc.sym]=Math.random()*30+10;
      priceHist[sc.sym]=[scamCoin.baseP];scamTimers[sc.sym]=2+Math.floor(Math.random()*2);
      showSysNews(`ğŸ”¥ ${lang==='en'?'HOT new listing':'í™”ì œì˜ ì‹ ê·œ ìƒì¥'}: ${coinName(sc)}(${sc.sym})`);
    }
  }
}

// â•â•â• UI â•â•â•
function buildCoinCards(){
  const ct=document.getElementById('coin-container');
  // FLIP Step 1: ê¸°ì¡´ ìœ„ì¹˜ ê¸°ë¡
  const oldRects={};
  ct.querySelectorAll('.coin-section').forEach(el=>{
    const sym=el.id.replace('coin-','');
    oldRects[sym]=el.getBoundingClientRect();
  });
  ct.innerHTML='';
  const totalAsset=getTotalAsset()||1;
  // ê°€ê²© ë†’ì€ ìˆœ ì •ë ¬ (ìƒì¥íì§€ ì½”ì¸ì€ ë’¤ë¡œ)
  const sorted=[...COINS].sort((a,b)=>{
    const da=delistedSet.has(a.sym)?1:0,db=delistedSet.has(b.sym)?1:0;
    if(da!==db)return da-db;
    return(prices[b.sym]||0)-(prices[a.sym]||0);
  });
  for(let idx=0;idx<sorted.length;idx++){const c=sorted[idx];
    const sym=c.sym,p=prices[sym]||c.baseP,ch=changes[sym]||0,isUp=ch>=0,isDead=delistedSet.has(sym);
    const h=holdings[sym],hQty=h?h.qty:0,hq=hQty*p;
    const holdRatio=hq/totalAsset*100;
    let cc=isUp?'up':'down';if(Math.abs(ch)>=10)cc=isUp?'big-up':'big-down';
    const crowd=newsEffects[sym]||0;let se='';
    if(crowd>=10)se=' news-boost';else if(crowd<=-10)se=' news-crash';
    const sec=document.createElement('div');sec.className='coin-section'+se;sec.id=`coin-${sym}`;
    if(isDead)sec.style.opacity='.4';
    // ë³´ìœ  ë¹„ì¤‘ë³„ í…Œë‘ë¦¬ ê°•ì¡°
    if(hq>0&&!isDead){const col=c.color;
      if(holdRatio>50){sec.style.border=`3px solid ${col}`;sec.style.boxShadow=`0 0 20px ${col}60, 0 0 40px ${col}30`;}
      else if(holdRatio>25){sec.style.border=`2px solid ${col}b3`;sec.style.boxShadow=`0 0 14px ${col}40`;}
      else if(holdRatio>10){sec.style.border=`2px solid ${col}80`;sec.style.boxShadow=`0 0 8px ${col}25`;}
      else{sec.style.border=`1px solid ${col}4d`;}
    }
    const isMobile=window.innerWidth<=768;
    const holdHtml=`<div class="coin-hold"><div class="coin-hold-label">${t('hold')}</div><div class="coin-hold-qty"${hq>0?'':' style="color:var(--muted);font-size:14px;"'}>$${hq.toFixed(0)}</div>${!isMobile?`<div class="coin-hold-val">${hQty.toFixed(4)} ${sym}</div>`:''}</div>`;
    const pendingLabel=orders[sym]?(orders[sym]>0?`${t('buy')}$${orders[sym]}`:`${t('sell')}$${Math.abs(orders[sym])}`):'';
    const orderToggleText=isMobile?(pendingLabel||`â–¼ ${lang==='en'?'Trade':'ì£¼ë¬¸'}`):'';
    sec.innerHTML=`<div class="coin-header">
      <div class="coin-icon" style="background:${c.color}">${sym[0]}</div>
      <div class="coin-title"><div class="coin-name">${coinName(c)} ${isDead?'ğŸ’€':''}</div><div class="coin-sym">${sym} Â· $${p.toFixed(2)}</div></div>
      <div class="coin-price-area"><div class="coin-change ${cc}">${isUp?'â–²':'â–¼'} ${Math.abs(ch).toFixed(2)}%</div></div>
      ${holdHtml}
    </div>
    <div class="chart-area" onclick="openCoinDetail('${sym}')"><canvas id="chart-${sym}"></canvas></div>
    ${isMobile?`<div class="order-slider-wrap" id="slider-wrap-${sym}">
      <div class="order-slider-row"><input type="range" class="order-slider" id="slider-${sym}" min="-100" max="100" value="0" oninput="onSliderInput('${sym}',this.value)" onchange="onSliderChange('${sym}',this.value)"></div>
      <div class="order-slider-labels"><span class="sell-label">${lang==='en'?'Sell All':'ì „ì•¡ë§¤ë„'}</span><span class="order-slider-val" id="slider-val-${sym}" onclick="cancelCoinOrder('${sym}')"></span><span class="buy-label">${lang==='en'?'Buy All':'ì „ì•¡ë§¤ìˆ˜'}</span></div>
    </div>`:''}
    <button class="order-toggle" id="toggle-${sym}" onclick="toggleOrder('${sym}')">${orderToggleText}</button>
    <div class="order-row${isMobile?' collapsed':''}" id="order-${sym}">
      <button class="order-btn all-sell sell" onclick="sellAll('${sym}',this)">${t('sellAll')}</button>
      <button class="order-btn sell" onclick="setOrder('${sym}',-200,this)">$200</button>
      <button class="order-btn sell" onclick="setOrder('${sym}',-100,this)">$100</button>
      <button class="order-btn sell" onclick="setOrder('${sym}',-50,this)">$50</button>
      <button class="order-btn sell" onclick="setOrder('${sym}',-30,this)">$30</button>
      <button class="order-btn sell" onclick="setOrder('${sym}',-10,this)">$10</button>
      <div class="order-divider"></div>
      <button class="order-btn buy" onclick="setOrder('${sym}',10,this)">$10</button>
      <button class="order-btn buy" onclick="setOrder('${sym}',30,this)">$30</button>
      <button class="order-btn buy" onclick="setOrder('${sym}',50,this)">$50</button>
      <button class="order-btn buy" onclick="setOrder('${sym}',100,this)">$100</button>
      <button class="order-btn buy" onclick="setOrder('${sym}',200,this)">$200</button>
      <button class="order-btn all-buy buy" onclick="buyAll('${sym}',this)">${t('buyAll')}</button>
      <div class="order-pending" id="pending-${sym}"></div>
    </div>`;
    ct.appendChild(sec);
  }
  drawAllCharts();
  // FLIP Step 2: ì• ë‹ˆë©”ì´ì…˜
  if(Object.keys(oldRects).length>0){
    requestAnimationFrame(()=>{
      ct.querySelectorAll('.coin-section').forEach(el=>{
        const sym=el.id.replace('coin-','');
        if(!oldRects[sym])return;
        const nr=el.getBoundingClientRect();
        const dx=oldRects[sym].left-nr.left,dy=oldRects[sym].top-nr.top;
        if(Math.abs(dx)<2&&Math.abs(dy)<2)return;
        el.style.transform=`translate(${dx}px,${dy}px)`;
        el.style.transition='none';
        requestAnimationFrame(()=>{
          el.style.transition='transform .5s cubic-bezier(.4,0,.2,1)';
          el.style.transform='';
          el.addEventListener('transitionend',()=>{el.style.transition='';el.style.transform='';},{once:true});
        });
      });
    });
  }
}
function drawAllCharts(){for(const c of COINS)drawChart(c.sym,c.color);}
function drawChart(sym,color,forceDesktop){
  const cv=document.getElementById(`chart-${sym}`);if(!cv)return;
  const ctx=cv.getContext('2d'),rect=cv.parentElement.getBoundingClientRect();
  cv.width=rect.width;cv.height=rect.height;const w=cv.width,h=cv.height;
  ctx.clearRect(0,0,w,h);const hist=priceHist[sym]||[];if(hist.length<1)return;
  const mn=Math.min(...hist)*.98,mx=Math.max(...hist)*1.02,rng=mx-mn||1;
  const isMob=!forceDesktop&&window.innerWidth<=768;
  ctx.strokeStyle='#1a2535';ctx.lineWidth=.5;
  for(let i=0;i<5;i++){const y=h*i/4;ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(w,y);ctx.stroke();}
  // ë°ìŠ¤í¬í†±ë§Œ: ê°€ê²© ìˆ«ì
  if(!isMob){
    ctx.fillStyle='#374151';ctx.font='10px sans-serif';ctx.textAlign='right';
    for(let i=0;i<5;i++){const y=h*i/4;ctx.fillText('$'+(mx-(mx-mn)*i/4).toFixed(1),w-4,y+12);}
  }
  if(hist.length<2)return;
  ctx.beginPath();
  for(let i=0;i<hist.length;i++){const x=i/(hist.length-1)*w,y=h-((hist[i]-mn)/rng)*h;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.lineTo(w,h);ctx.lineTo(0,h);ctx.closePath();
  const g=ctx.createLinearGradient(0,0,0,h);g.addColorStop(0,color+'30');g.addColorStop(1,color+'05');ctx.fillStyle=g;ctx.fill();
  ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=2;
  for(let i=0;i<hist.length;i++){const x=i/(hist.length-1)*w,y=h-((hist[i]-mn)/rng)*h;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.stroke();
  const lx=w,ly=h-((hist[hist.length-1]-mn)/rng)*h;
  ctx.beginPath();ctx.arc(lx,ly,4,0,Math.PI*2);ctx.fillStyle=color;ctx.fill();
  ctx.beginPath();ctx.arc(lx,ly,6,0,Math.PI*2);ctx.strokeStyle=color+'60';ctx.lineWidth=2;ctx.stroke();
  // ë°ìŠ¤í¬í†±ë§Œ: ìº”ë“¤ë°”
  if(!isMob&&hist.length>=2){const bw=Math.max(3,w/hist.length-2);
    for(let i=1;i<hist.length;i++){const x=i/(hist.length-1)*w-bw/2,o=hist[i-1],cl=hist[i];
      const lo=Math.min(o,cl),hi=Math.max(o,cl);
      ctx.fillStyle=cl>=o?'rgba(34,197,94,.25)':'rgba(239,68,68,.25)';
      ctx.fillRect(x,h-((hi-mn)/rng)*h,bw,Math.max(1,(h-((lo-mn)/rng)*h)-(h-((hi-mn)/rng)*h)));
    }
  }
}

// â•â•â• ì½”ì¸ ìƒì„¸ ëª¨ë‹¬ â•â•â•
function openCoinDetail(sym){
  const c=COINS.find(x=>x.sym===sym);if(!c)return;
  const modal=document.getElementById('coin-detail-modal');
  const inner=document.getElementById('coin-detail-inner');
  const p=prices[sym]||0,ch=changes[sym]||0,isUp=ch>=0;
  const h=holdings[sym],hQty=h?h.qty:0,hv=hQty*p;
  const hist=priceHist[sym]||[];
  const hi=hist.length?Math.max(...hist):p,lo=hist.length?Math.min(...hist):p;
  const chCol=isUp?'var(--profit)':'var(--loss)';
  // í•´ë‹¹ ì½”ì¸ ë‰´ìŠ¤ í•„í„° (ìµœê·¼ 5ê°œ)
  const coinNews=allNewsHistory.filter(n=>n.targetSym===sym||n.targetSym==='MARKET').sort((a,b)=>b.turn-a.turn).slice(0,5);
  let newsHtml='';
  if(coinNews.length===0){
    newsHtml=`<div class="cdn-empty">${lang==='en'?'No news yet':'ë‰´ìŠ¤ ì—†ìŒ'}</div>`;
  }else{
    coinNews.forEach(n=>{
      const hl=lang==='en'?(n.headlineEn||n.headline):n.headlineKo||n.headline;
      const dt=lang==='en'?(n.detailEn||n.detail):n.detailKo||n.detail;
      newsHtml+=`<div class="cd-news-item">
        <div class="cdn-row"><span class="cdn-turn">T${n.turn}</span><span class="cdn-tag ${n.sentiment}">${t(n.sentiment)}</span></div>
        <div class="cdn-hl">${hl}</div>
        <div class="cdn-dt">${dt}</div>
      </div>`;
    });
  }
  const isDead=delistedSet.has(sym);
  const curOrd=orders[sym]||0;
  const pendTxt=curOrd>0?`<span style="color:var(--buy)">${t('buy')} $${curOrd}</span>`:curOrd<0?`<span style="color:var(--sell)">${t('sell')} $${Math.abs(curOrd)}</span>`:'';
  const tradeHtml=gameRunning&&!isDead?`<div class="cd-trade">
    <div class="cd-trade-title">ğŸ’¹ ${lang==='en'?'Trade':'ì£¼ë¬¸í•˜ê¸°'}</div>
    <div class="cd-trade-row">
      <button class="order-btn all-sell sell" onclick="cdOrder('${sym}','sellAll')">${t('sellAll')}</button>
      <button class="order-btn sell" onclick="cdOrder('${sym}',-200)">$200</button>
      <button class="order-btn sell" onclick="cdOrder('${sym}',-100)">$100</button>
      <button class="order-btn sell" onclick="cdOrder('${sym}',-50)">$50</button>
      <button class="order-btn sell" onclick="cdOrder('${sym}',-10)">$10</button>
      <div class="cd-trade-row order-divider"></div>
      <button class="order-btn buy" onclick="cdOrder('${sym}',10)">$10</button>
      <button class="order-btn buy" onclick="cdOrder('${sym}',50)">$50</button>
      <button class="order-btn buy" onclick="cdOrder('${sym}',100)">$100</button>
      <button class="order-btn buy" onclick="cdOrder('${sym}',200)">$200</button>
      <button class="order-btn all-buy buy" onclick="cdOrder('${sym}','buyAll')">${t('buyAll')}</button>
    </div>
    <div class="cd-trade-pending" id="cd-pending-${sym}">${pendTxt}</div>
  </div>`:'';
  inner.innerHTML=`<div class="cd-header">
    <div class="cd-icon" style="background:${c.color}">${sym[0]}</div>
    <div class="cd-title"><div class="cd-name">${coinName(c)}</div><div class="cd-sym">${sym}</div></div>
    <button class="cd-close" onclick="closeCoinDetail()">âœ•</button>
  </div>
  <div class="cd-stats">
    <div class="cd-stat"><div class="cd-label">${lang==='en'?'Price':'í˜„ì¬ê°€'}</div><div class="cd-val">$${p.toFixed(2)}</div></div>
    <div class="cd-stat"><div class="cd-label">${lang==='en'?'Change':'ë“±ë½ë¥ '}</div><div class="cd-val" style="color:${chCol}">${isUp?'+':''}${ch.toFixed(2)}%</div></div>
    <div class="cd-stat"><div class="cd-label">${lang==='en'?'High':'ê³ ê°€'}</div><div class="cd-val" style="color:var(--profit)">$${hi.toFixed(2)}</div></div>
    <div class="cd-stat"><div class="cd-label">${lang==='en'?'Low':'ì €ê°€'}</div><div class="cd-val" style="color:var(--loss)">$${lo.toFixed(2)}</div></div>
    <div class="cd-stat"><div class="cd-label">${t('hold')}</div><div class="cd-val" style="color:var(--accent)">$${hv.toFixed(0)}</div></div>
  </div>
  <div class="cd-chart"><canvas id="detail-chart-${sym}"></canvas></div>
  ${tradeHtml}
  <div class="cd-news">
    <div class="cd-news-title">ğŸ“° ${lang==='en'?`${sym} News`:`${sym} ê´€ë ¨ ë‰´ìŠ¤`}</div>
    ${newsHtml}
  </div>`;
  modal.classList.remove('hidden');
  setTimeout(()=>drawDetailChart(sym,c.color),50);
}
function closeCoinDetail(){
  document.getElementById('coin-detail-modal').classList.add('hidden');
}
function showScamPopup(coin,lostAmt){
  const name=coinName(coin);
  const sym=coin.sym;
  const msgs=lang==='en'?[
    `Everything about <span class="sp-coin">${name}(${sym})</span> was fabricated. The team vanished with investors\' money. Your holdings are now worthless.`,
    `<span class="sp-coin">${name}(${sym})</span> turned out to be an elaborate fraud. The project never existed. All your investment is gone.`,
    `The so-called "innovation" of <span class="sp-coin">${name}(${sym})</span> was a lie from day one. Founders disappeared overnight with all the funds.`
  ]:[
    `<span class="sp-coin">${name}(${sym})</span>ì˜ ëª¨ë“  ê²ƒì€ ì¡°ì‘ì´ì—ˆìŠµë‹ˆë‹¤. ê°œë°œíŒ€ì€ íˆ¬ìê¸ˆì„ ë“¤ê³  ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤.`,
    `<span class="sp-coin">${name}(${sym})</span>ì€ ì²˜ìŒë¶€í„° ê³„íšëœ ì‚¬ê¸°ì˜€ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ëŠ” ì¡´ì¬í•œ ì  ì—†ì—ˆìŠµë‹ˆë‹¤.`,
    `<span class="sp-coin">${name}(${sym})</span>ì˜ "í˜ì‹  ê¸°ìˆ "ì€ ì „ë¶€ ê±°ì§“ì´ì—ˆìŠµë‹ˆë‹¤. ì°½ë¦½ìëŠ” ìê¸ˆì„ ê°€ì§€ê³  í•˜ë£»ë°¤ ì‚¬ì´ì— ìì·¨ë¥¼ ê°ì·„ìŠµë‹ˆë‹¤.`
  ];
  const msg=msgs[Math.floor(Math.random()*msgs.length)];
  const title=lang==='en'?'SCAM DETECTED':'ì‚¬ê¸° ë°œê°';
  const lossText=lang==='en'?`You lost $${lostAmt.toFixed(0)}`:`$${lostAmt.toFixed(0)}ì„ ìƒì—ˆìŠµë‹ˆë‹¤`;
  const el=document.getElementById('scam-popup');
  el.innerHTML=`<div class="sp-icon">ğŸš¨</div><div class="sp-title">${title}</div><div class="sp-msg">${msg}</div><div class="sp-loss">${lossText}</div>`;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),4500);
}
function drawDetailChart(sym,color){
  const cv=document.getElementById(`detail-chart-${sym}`);if(!cv)return;
  const ctx=cv.getContext('2d'),rect=cv.parentElement.getBoundingClientRect();
  cv.width=rect.width;cv.height=rect.height;const w=cv.width,h=cv.height;
  ctx.clearRect(0,0,w,h);const hist=priceHist[sym]||[];if(hist.length<1)return;
  const mn=Math.min(...hist)*.97,mx=Math.max(...hist)*1.03,rng=mx-mn||1;
  // ê·¸ë¦¬ë“œ
  ctx.strokeStyle='#1e2a3a';ctx.lineWidth=.5;
  for(let i=0;i<=6;i++){const y=h*i/6;ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(w,y);ctx.stroke();}
  // ê°€ê²© ë¼ë²¨
  ctx.fillStyle='#4b5563';ctx.font='11px sans-serif';ctx.textAlign='right';
  for(let i=0;i<=6;i++){const y=h*i/6;ctx.fillText('$'+(mx-(mx-mn)*i/6).toFixed(2),w-4,y+14);}
  if(hist.length<2)return;
  // ìº”ë“¤ë°”
  const bw=Math.max(4,w/hist.length-3);
  for(let i=1;i<hist.length;i++){
    const x=i/(hist.length-1)*w-bw/2,o=hist[i-1],cl=hist[i];
    const lo=Math.min(o,cl),hi=Math.max(o,cl);
    const isG=cl>=o;
    ctx.fillStyle=isG?'rgba(34,197,94,.35)':'rgba(239,68,68,.35)';
    ctx.fillRect(x,h-((hi-mn)/rng)*h,bw,Math.max(2,(h-((lo-mn)/rng)*h)-(h-((hi-mn)/rng)*h)));
    // ì‹¬ì§€
    const cx=x+bw/2;
    ctx.beginPath();ctx.strokeStyle=isG?'rgba(34,197,94,.5)':'rgba(239,68,68,.5)';ctx.lineWidth=1;
    ctx.moveTo(cx,h-((hi-mn)/rng)*h);ctx.lineTo(cx,h-((lo-mn)/rng)*h);ctx.stroke();
  }
  // ë¼ì¸ + ê·¸ë¼ë””ì–¸íŠ¸
  ctx.beginPath();
  for(let i=0;i<hist.length;i++){const x=i/(hist.length-1)*w,y=h-((hist[i]-mn)/rng)*h;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.lineTo(w,h);ctx.lineTo(0,h);ctx.closePath();
  const g=ctx.createLinearGradient(0,0,0,h);g.addColorStop(0,color+'40');g.addColorStop(1,color+'05');ctx.fillStyle=g;ctx.fill();
  // ë©”ì¸ ë¼ì¸
  ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=2.5;
  for(let i=0;i<hist.length;i++){const x=i/(hist.length-1)*w,y=h-((hist[i]-mn)/rng)*h;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.stroke();
  // í˜„ì¬ê°€ ì  + ë¼ë²¨
  const lx=w-2,ly=h-((hist[hist.length-1]-mn)/rng)*h;
  ctx.beginPath();ctx.arc(lx,ly,5,0,Math.PI*2);ctx.fillStyle=color;ctx.fill();
  ctx.beginPath();ctx.arc(lx,ly,8,0,Math.PI*2);ctx.strokeStyle=color+'80';ctx.lineWidth=2;ctx.stroke();
  // í„´ ë¼ë²¨
  ctx.fillStyle='#374151';ctx.font='9px sans-serif';ctx.textAlign='center';
  const step=Math.max(1,Math.floor(hist.length/6));
  for(let i=0;i<hist.length;i+=step){const x=i/(hist.length-1)*w;ctx.fillText('T'+(i+1),x,h-2);}
}

// â•â•â• ì£¼ë¬¸ â•â•â•
function setOrder(sym,amt,btn){
  amt=parseInt(amt);if(delistedSet.has(sym)){showSysNews(`ğŸ’€ ${sym} ${t('noTrade')}`);return;}
  const cur=orders[sym]||0,nw=cur+amt;
  const p=prices[sym]||1;
  if(nw<0){const ha=holdings[sym]?holdings[sym].qty*p:0;if(Math.abs(nw)>ha+0.5){showSysNews(t('overSell').replace('%s',ha.toFixed(0)));return;}}
  if(nw>0){const tb=Object.values(orders).reduce((s,v)=>s+(v>0?v:0),0)-Math.max(0,cur)+Math.max(0,nw);if(tb>cash){showSysNews(t('cashShort').replace('%s',cash.toFixed(0)));return;}}
  orders[sym]=nw;updateOD(sym);updatePS();
  if(btn){btn.classList.add('active');setTimeout(()=>btn.classList.remove('active'),200);}
}
function sellAll(sym,btn){
  if(delistedSet.has(sym))return;const h=holdings[sym];const p=prices[sym]||1;
  if(!h||h.qty<=0){showSysNews(`${sym} ${t('noHold')}`);return;}
  const val=Math.floor(h.qty*p);
  orders[sym]=-val;updateOD(sym);updatePS();
  if(btn){btn.classList.add('active');setTimeout(()=>btn.classList.remove('active'),200);}
}
function buyAll(sym,btn){
  if(delistedSet.has(sym))return;
  const ob=Object.entries(orders).reduce((s,[k,v])=>k!==sym&&v>0?s+v:s,0),av=cash-ob;
  if(av<=0){showSysNews(t('noCash'));return;}
  orders[sym]=Math.floor(av);updateOD(sym);updatePS();
  if(btn){btn.classList.add('active');setTimeout(()=>btn.classList.remove('active'),200);}
}
function updateOD(sym){
  const el=document.getElementById(`pending-${sym}`),v=orders[sym]||0;
  if(!v){el.textContent='';el.className='order-pending';return;}
  if(v>0){el.textContent=`${t('buy')} $${v}`;el.className='order-pending buy-pending';}
  else{el.textContent=`${t('sell')} $${Math.abs(v)}`;el.className='order-pending sell-pending';}
  // ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë” ê°’ í‘œì‹œ ì—…ë°ì´íŠ¸
  if(window.innerWidth<=768){
    const sEl=document.getElementById(`slider-val-${sym}`);
    if(sEl){
      if(v>0){sEl.textContent=`${t('buy')} $${v} âœ•`;sEl.style.color='var(--buy)';sEl.classList.add('has-order');}
      else if(v<0){sEl.textContent=`${t('sell')} $${Math.abs(v)} âœ•`;sEl.style.color='var(--sell)';sEl.classList.add('has-order');}
      else{sEl.textContent='';sEl.style.color='var(--muted)';sEl.classList.remove('has-order');}
    }
    const sl=document.getElementById(`slider-${sym}`);
    if(sl)sl.value=0;
  }
  // ëª¨ë°”ì¼ í† ê¸€ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ë°ìŠ¤í¬í†± fallback)
  const tb=document.getElementById(`toggle-${sym}`);
  if(tb&&window.innerWidth<=768){
    const row=document.getElementById(`order-${sym}`);
    if(row&&row.classList.contains('collapsed')){
      tb.textContent=v?(v>0?`${t('buy')}$${v}`:`${t('sell')}$${Math.abs(v)}`):`â–¼ ${lang==='en'?'Trade':'ì£¼ë¬¸'}`;
      tb.style.color=v>0?'var(--buy)':v<0?'var(--sell)':'var(--accent)';
    }
  }
}
function updatePS(){
  let b=0,s=0,c=0;
  for(const[,v]of Object.entries(orders)){if(v>0){b+=v;c++;}else if(v<0){s+=Math.abs(v);c++;}}
  const el=document.getElementById('pending-summary');
  el.innerHTML=c===0?t('pendingDefault'):`<span>${c} ${t('pending')}</span> â€” <span style="color:var(--buy)">${t('buy')} $${b}</span> | <span style="color:var(--sell)">${t('sell')} $${s}</span>`;
}
function resetOrders(){orders={};for(const c of COINS)updateOD(c.sym);updatePS();showSysNews(t('orderReset'));}

// â•â•â• ë‹¤ì¤‘ í´ë¦­ ë°©ì§€ â•â•â•
let isProcessingTurn=false;
function lockTurn(){
  isProcessingTurn=true;
  const btn=document.querySelector('.submit-btn');if(btn)btn.disabled=true;
}
function unlockTurn(){
  isProcessingTurn=false;
  const btn=document.querySelector('.submit-btn');if(btn)btn.disabled=false;
}

// â•â•â• ì‹œê°„ì´ˆê³¼: ì£¼ë¬¸ ì´ˆê¸°í™” í›„ í„´ ë„˜ê¹€ â•â•â•
function skipTurn(){
  if(!gameRunning||isProcessingTurn)return;
  lockTurn();
  try{
    orders={};
    const inf=cash*INFLATION_PER_TURN;cash=Math.max(0,cash-inf);inflTotal+=inf;
    updateIncome();
    turn++;
    if(getTotalAsset()<=0){endGame('bankrupt');return;}
    if(turn>MAX_TURNS){endGame('finished');return;}
    simulateNextTurn();
    for(const[sym,h]of Object.entries(holdings))if(delistedSet.has(sym))h.qty=0;
    if(getTotalAsset()<=0){endGame('bankrupt');return;}
    const pnlSkip=((getTotalAsset()-START_CASH)/START_CASH)*100;
    if(pnlSkip<=-100){endGame('bankrupt');return;}
    resetTimer();renderNewsPanel();buildCoinCards();updateHeader();updateTurnGauge();updatePS();
    showSysNews(t('turnNoOrder').replace('%t',turn).replace('%i',inf.toFixed(1)));
  }finally{setTimeout(unlockTurn,300);}
}

// â•â•â• ì œì¶œ â•â•â•
function submitOrders(){
  if(!gameRunning||isProcessingTurn)return;
  lockTurn();
  try{
    let bt=0,st=0;
    for(const[sym,amt]of Object.entries(orders)){
      if(!amt||delistedSet.has(sym))continue;const p=prices[sym];if(!p||p<=0)continue;
      if(amt>0){if(amt>cash)continue;cash-=amt;const coinQty=amt/p;if(!holdings[sym])holdings[sym]={qty:0,totalCost:0};
        holdings[sym].totalCost+=amt;holdings[sym].qty+=coinQty;bt+=amt;
      }else{const sa=Math.abs(amt),h=holdings[sym];if(!h)continue;const sellQty=sa/p;if(sellQty>h.qty*1.001)continue;
        const actualQty=Math.min(sellQty,h.qty);const actualAmt=actualQty*p;cash+=actualAmt;h.qty-=actualQty;st+=actualAmt;if(h.qty<0.0001)delete holdings[sym];}
    }
    const inf=cash*INFLATION_PER_TURN;cash=Math.max(0,cash-inf);inflTotal+=inf;
    updateIncome();
    orders={};turn++;
    // ì œì¶œ ì§í›„ -100% ì²´í¬
    if(getTotalAsset()<=0){endGame('bankrupt');return;}
    // 20í„´ ì¢…ë£Œ ì²´í¬
    if(turn>MAX_TURNS){endGame('finished');return;}
    simulateNextTurn();
    for(const[sym,h]of Object.entries(holdings))if(delistedSet.has(sym))h.qty=0;
    if(getTotalAsset()<=0){endGame('bankrupt');return;}
    // ìˆ˜ìµë¥  -100% ì²´í¬
    const pnlChk=((getTotalAsset()-START_CASH)/START_CASH)*100;
    if(pnlChk<=-100){endGame('bankrupt');return;}
    resetTimer();renderNewsPanel();buildCoinCards();updateHeader();updateTurnGauge();
    if(bt>0||st>0)showSysNews(t('turnSummary').replace('%t',turn).replace('%b',bt).replace('%s',st).replace('%i',inf.toFixed(1)));
    else showSysNews(t('turnNoOrder').replace('%t',turn).replace('%i',inf.toFixed(1)));
  }finally{setTimeout(unlockTurn,300);}
}

// â•â•â• ìì‚° â•â•â•
function getHV(){let v=0;for(const[sym,h]of Object.entries(holdings))if(h.qty>0&&!delistedSet.has(sym))v+=h.qty*(prices[sym]||0);return v;}
function getTotalAsset(){return cash+getHV();}

// â•â•â• ì†Œë“ìˆ˜ì¤€ (ìˆ˜ìµë¥  ê¸°ë°˜ ì‹¤ì‹œê°„) â•â•â•
// í˜„ì‹¤ ì†Œë“ë¶„ìœ„ ê¸°ë°˜: ìƒìœ„%â†’ì†Œë“ë“±ê¸‰
// ê·¹ë¹ˆì¸µ(í•˜ìœ„20%) | ë¹ˆê³¤ì¸µ(20~40%) | ì €ì†Œë“ì¸µ(40~60%) | ì¤‘ì‚°ì¸µ(60~80%) | ê³ ì†Œë“ì¸µ(80~90%) | ìƒë¥˜ì¸µ(90~99%) | ìµœìƒë¥˜ì¸µ(99~100%)
function updateIncome(){
  const tot=getTotalAsset(),pnl=(tot-START_CASH)/START_CASH*100;
  // ìƒìœ„ ëª‡ %ì¸ì§€ (1=ìµœê³ , 100=ìµœì €)
  const topPct=tot<=0?100:pnlToTopPercent(pnl);
  // ìƒìœ„% â†’ ê²Œì´ì§€ (ìƒìœ„1%=99, ìƒìœ„100%=0)
  income=Math.max(0,Math.min(100,100-topPct));
}

// â•â•â• í—¤ë” â•â•â•
function updateHeader(){
  const hv=getHV(),tot=getTotalAsset(),pp=(tot-START_CASH)/START_CASH*100;
  document.getElementById('s-cash').textContent='$'+cash.toFixed(0);
  document.getElementById('s-hold').textContent='$'+hv.toFixed(0);
  document.getElementById('s-total').textContent='$'+tot.toFixed(0);
  const pe=document.getElementById('s-pnl');
  pe.textContent=(pp>=0?'+':'')+pp.toFixed(1)+'%';pe.className='stat-val '+(pp>=0?'profit':'loss');
  // ì†Œë“ìˆ˜ì¤€ â€” í˜„ì‹¤ ì†Œë“ë¶„ìœ„ ê¸°ë°˜ ë“±ê¸‰
  const pct=Math.max(0,Math.min(100,income));
  document.getElementById('ig-fill').style.width=pct+'%';
  document.getElementById('ig-pct').textContent=Math.round(pct)+'%';
  const gr=t('grades');let col,label;
  // í˜„ì‹¤ ë¶„í¬: ê·¹ë¹ˆ(0~20) ë¹ˆê³¤(20~40) ì €ì†Œë“(40~60) ì¤‘ì‚°(60~80) ê³ ì†Œë“(80~90) ìƒë¥˜(90~99) ìµœìƒë¥˜(99~100)
  if(pct<20){col='#ef4444';label=gr[0];}
  else if(pct<40){col='#f87171';label=gr[1];}
  else if(pct<60){col='#fb923c';label=gr[2];}
  else if(pct<80){col='#f59e0b';label=gr[3];}
  else if(pct<90){col='#22c55e';label=gr[4];}
  else if(pct<99){col='#3b82f6';label=gr[5];}
  else{col='#a78bfa';label=gr[6];}
  document.getElementById('ig-fill').style.background=col;
  document.getElementById('ig-grade').textContent=label;document.getElementById('ig-grade').style.color=col;
}

// â•â•â• í„´ ê²Œì´ì§€ â•â•â•
function updateTurnGauge(){
  const pct=Math.min(100,turn/MAX_TURNS*100);
  document.getElementById('turn-text').textContent=`${t('turnOf')} ${turn} / ${MAX_TURNS}`;
  document.getElementById('s-turn').textContent=turn;
  const fill=document.getElementById('turn-fill');
  fill.style.width=pct+'%';
  fill.className='turn-gauge-fill'+(pct>=80?' ending':'');
  // ëª¨ë°”ì¼ í„´ ê²Œì´ì§€ ì—…ë°ì´íŠ¸
  const mfill=document.getElementById('mtg-fill');
  const mtext=document.getElementById('mtg-text');
  if(mfill){mfill.style.width=pct+'%';mfill.className='mtg-fill'+(pct>=80?' ending':'');}
  if(mtext)mtext.textContent=`${turn}/${MAX_TURNS}`;
}

// â•â•â• íƒ€ì´ë¨¸ â•â•â•
function resetTimer(){
  timeLeft=TURN_TIME;clearInterval(timerInterval);updateTimerDisplay();
  timerInterval=setInterval(()=>{if(!gameRunning)return;timeLeft--;updateTimerDisplay();
    if(timeLeft<=0){showSysNews(t('timeOver'));skipTurn();}
  },1000);
}
function updateTimerDisplay(){
  const el=document.getElementById('s-timer');el.textContent=timeLeft;
  const box=document.getElementById('timer-box');
  if(timeLeft<=10){el.className='timer-val urgent';box.style.borderColor='var(--loss)';box.style.boxShadow='0 0 30px rgba(239,68,68,.3)';}
  else if(timeLeft<=30){el.className='timer-val';el.style.color='#fb923c';box.style.borderColor='#fb923c';box.style.boxShadow='0 0 20px rgba(251,146,60,.2)';}
  else{el.className='timer-val';el.style.color='';box.style.borderColor='var(--accent)';box.style.boxShadow='0 0 20px rgba(245,158,11,.15)';}
}

// â•â•â• ì‹œì‘/ë â•â•â•
function startGame(){
  isProcessingTurn=false;
  cash=START_CASH;holdings={};orders={};turn=1;income=50;inflTotal=0;
  delistedSet.clear();scamTimers={};activeScam=null;currentNews=[];newsEffects={};
  newCoinSet.clear();usedCoinPool.clear();spawnedScams.clear();allNewsHistory=[];
  generateRandomCoins();gameRunning=true;initPrices();
  for(const c of COINS){const hist=[];let p=prices[c.sym];
    for(let i=0;i<15;i++){p=Math.max(1,p*(1+(Math.random()*.1-.05)));hist.push(p);}
    hist.push(prices[c.sym]);priceHist[c.sym]=hist;}
  generateNews();
  document.getElementById('overlay').classList.add('hidden');
  renderNewsPanel();buildCoinCards();updateHeader();updateTurnGauge();resetTimer();
  showSysNews(t('gameStart'));
  // ê´‘ê³  ì´ˆê¸°í™”
  try{document.querySelectorAll('.ad-banner ins.adsbygoogle').forEach(()=>{(adsbygoogle=window.adsbygoogle||[]).push({});});}catch(e){}
}
// â•â•â• ì‹¤ì œ íˆ¬ìì ìˆ˜ìµë¥  ë¶„í¬ ê¸°ë°˜ ìƒìœ„ % ê³„ì‚° â•â•â•
// ì‹¤ì œ í†µê³„: 60%ê°€ ì†ì‹¤, ìˆ˜ìµì ì¤‘ ê³¼ë°˜ì´ ì†Œì•¡, ì¢Œí¸í–¥ ë¶„í¬
// ìˆ˜ìµë¥  â†’ ìƒìœ„ % ë§¤í•‘ (ë³´ê°„ í…Œì´ë¸”)
// ì¶œì²˜: ìë³¸ì‹œì¥ì—°êµ¬ì›, NHíˆ¬ìì¦ê¶Œ/ì‹ í•œíˆ¬ìì¦ê¶Œ 2024-2025 ë¶„ì„
const REAL_DIST=[
  // [ìˆ˜ìµë¥ %, ìƒìœ„%] â€” ì‹¤ì œ íˆ¬ìì ë¶„í¬ ê¸°ë°˜ ë³´ê°„ì 
  [-80, 99], [-60, 95], [-50, 90], [-40, 85],
  [-30, 78], [-20, 70], [-15, 65], [-10, 60],
  [-5, 55],  [0, 48],   [5, 40],   [10, 33],
  [15, 27],  [20, 22],  [25, 18],  [30, 14],
  [40, 10],  [50, 7],   [60, 5],   [80, 3],
  [100, 2],  [150, 1]
];
function pnlToTopPercent(pnl){
  if(pnl<=REAL_DIST[0][0])return Math.min(100,REAL_DIST[0][1]+1);
  if(pnl>=REAL_DIST[REAL_DIST.length-1][0])return 1;
  for(let i=0;i<REAL_DIST.length-1;i++){
    const[p0,t0]=REAL_DIST[i],[p1,t1]=REAL_DIST[i+1];
    if(pnl>=p0&&pnl<p1){
      const ratio=(pnl-p0)/(p1-p0);
      return Math.max(1,Math.min(100,Math.round(t0+(t1-t0)*ratio)));
    }
  }
  return 50;
}

const RANK_COMMENTS={
1:'ğŸ† ì—­ì‚¬ì— ì´ë¦„ì„ ë‚¨ê¸¸ ì „ì„¤ì  íˆ¬ìì! ë‹¹ì‹ ì€ ì§„ì •í•œ ì‹ ì´ë‹¤.',
2:'ğŸ‘‘ ì‹œì¥ì˜ ì™•! ì›Œë Œ ë²„í•ì´ ë‹¹ì‹ ì—ê²Œ ì¡°ì–¸ì„ êµ¬í•  ë ˆë²¨.',
3:'ğŸŒŸ ì²œì¬ì  ì§ê°! ë‹¹ì‹ ì˜ ë§¤ë§¤ ì¼ì§€ëŠ” êµê³¼ì„œê°€ ë  ê²ƒì´ë‹¤.',
4:'ğŸ’ ë‹¤ì´ì•„ëª¬ë“œ í•¸ì¦ˆì˜ ëíŒì™•. í”ë“¤ë¦¼ ì—†ëŠ” ì² ì˜ ì‹¬ì¥.',
5:'ğŸ”¥ ì „ì„¤ì ì¸ ìˆ˜ìµë¥ ! í€ë“œë§¤ë‹ˆì €ë“¤ì´ ì¤„ ì„œì„œ ìŠ¤ì¹´ìš°íŠ¸í•  ê²ƒì´ë‹¤.',
6:'ğŸ¦… ë…ìˆ˜ë¦¬ì˜ ëˆˆìœ¼ë¡œ ì‹œì¥ì„ ê¿°ëš«ì—ˆë‹¤. ê²½ì´ë¡œìš´ íŒë‹¨ë ¥!',
7:'âš¡ ë²ˆê°œê°™ì€ ë§¤ë§¤ íƒ€ì´ë°! í”„ë¡œ íŠ¸ë ˆì´ë” ëº¨ì¹˜ëŠ” ì‹¤ë ¥.',
8:'ğŸ¯ ëª¨ë“  íŒë‹¨ì´ ì •í™•í–ˆë‹¤. ë‹¹ì‹ ì€ ì‹œì¥ì˜ ì €ê²©ìˆ˜.',
9:'ğŸš€ ë¡œì¼“ì²˜ëŸ¼ ì¹˜ì†Ÿì€ ìˆ˜ìµ! ëŒ€ë‹¨í•œ ì„±ê³¼ë¥¼ ê±°ë’€ë‹¤.',
10:'ğŸ’° ìƒìœ„ 10%! íƒì›”í•œ íˆ¬ì ê°ê°ì˜ ì†Œìœ ì.',
11:'ğŸ… ëˆ„ê°€ ë­ë˜ë„ ì—˜ë¦¬íŠ¸ íˆ¬ìì. ìë¶€ì‹¬ì„ ê°€ì ¸ë„ ì¢‹ë‹¤.',
12:'ğŸ“ˆ ë†€ë¼ìš´ ì„±ê³¼! ì‹œì¥ì„ ì½ëŠ” ëˆˆì´ í™•ì‹¤íˆ ìˆë‹¤.',
13:'ğŸ–ï¸ ëŒ€ë¶€ë¶„ì˜ í€ë“œë§¤ë‹ˆì €ë³´ë‹¤ ë‚˜ì€ ìˆ˜ìµë¥ . ëŒ€ë‹¨í•˜ë‹¤!',
14:'âœ¨ ë¹›ë‚˜ëŠ” ì‹¤ì ! íˆ¬ì ì¬ëŠ¥ì´ í™•ì‹¤íˆ ë³´ì¸ë‹¤.',
15:'ğŸŒˆ ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ë°”ê¾¼ í˜„ëª…í•œ íˆ¬ìì.',
16:'ğŸ¹ ì •í™•í•œ íƒ€ì´ë°ì˜ ë‹¬ì¸! ë§¤ìˆ˜ ë§¤ë„ê°€ ì ˆë¬˜í–ˆë‹¤.',
17:'ğŸ’ª ê°•ì²  ë©˜íƒˆë¡œ ì‹œì¥ ë³€ë™ì„ ì´ê²¨ëƒˆë‹¤. ì¸ìƒì !',
18:'ğŸ”® ì‹œì¥ ì˜ˆì¸¡ë ¥ì´ ë›°ì–´ë‚˜ë‹¤. ë¯¸ë˜ê°€ ê¸°ëŒ€ë˜ëŠ” íˆ¬ìì.',
19:'ğŸª ë¡¤ëŸ¬ì½”ìŠ¤í„° ê°™ì€ ì‹œì¥ì—ì„œ í›Œë¥­íˆ ì‚´ì•„ë‚¨ì•˜ë‹¤!',
20:'ğŸ“Š ìƒìœ„ 20%! ê½¤ ê´œì°®ì€ íˆ¬ì ì‹¤ë ¥ì´ë‹¤.',
21:'ğŸ€ ìš´ê³¼ ì‹¤ë ¥ì´ ëª¨ë‘ ë”°ë¼ì¤€ ì¢‹ì€ ê²°ê³¼.',
22:'â­ ì¸ìƒì ì¸ ìˆ˜ìµ! ë™ë£Œë“¤ ì‚¬ì´ì—ì„œ ìë‘í•  ë§Œí•˜ë‹¤.',
23:'ğŸ¯ ì ì ˆí•œ ë¶„ì‚°íˆ¬ìì™€ íƒ€ì´ë°. êµê³¼ì„œì  ì „ëµ!',
24:'ğŸ”‘ í•µì‹¬ì„ ì§šëŠ” íˆ¬ì ê°ê°ì´ ìˆë‹¤.',
25:'ğŸ“± ë‹¹ì‹ ì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ SNSì— ìë‘í•´ë„ ì¢‹ë‹¤.',
26:'ğŸŒ¿ ê¾¸ì¤€íˆ ì„±ì¥í•˜ëŠ” ê±´ì „í•œ íˆ¬ì ìŠ¤íƒ€ì¼.',
27:'ğŸ¢ íŒŒë„ë¥¼ íƒ„ ì„œí¼ì²˜ëŸ¼ ì‹œì¥ì„ ì¦ê²¼ë‹¤!',
28:'ğŸ§­ ë‚˜ì¹¨ë°˜ ê°™ì€ íˆ¬ì ë°©í–¥ ê°ê°ì„ ê°–ê³  ìˆë‹¤.',
29:'ğŸƒ ëŒ€ë‹¤ìˆ˜ë³´ë‹¤ ì•ì„œ ë‚˜ê°€ëŠ” ë¯¼ì²©í•œ íˆ¬ìì.',
30:'ğŸ‘ ìƒìœ„ 30%! í‰ê· ì„ í›Œì© ë„˜ëŠ” ì¢‹ì€ ê²°ê³¼.',
31:'ğŸ“˜ ê¸°ë³¸ê¸°ê°€ íƒ„íƒ„í•œ íˆ¬ì ìŠ¤íƒ€ì¼ì´ ë³´ì¸ë‹¤.',
32:'ğŸŒ¤ï¸ ë§‘ì€ ë‚ ì”¨ì²˜ëŸ¼ ë°ì€ ì„±ì í‘œ.',
33:'ğŸµ ë¦¬ë“¬ê° ìˆëŠ” ë§¤ë§¤! ì‹œì¥ì˜ ë°•ìë¥¼ ì½ì—ˆë‹¤.',
34:'ğŸ§© í¼ì¦ ì¡°ê°ì„ ë§ì¶”ë“¯ ì „ëµì ì¸ íˆ¬ìë¥¼ í–ˆë‹¤.',
35:'ğŸŒ± ì„±ì¥ ê°€ëŠ¥ì„±ì´ í° íˆ¬ìì! ê²½í—˜ì´ ìŒ“ì´ë©´ ë” ì¢‹ì•„ì§ˆ ê²ƒ.',
36:'ğŸˆ ë¬´ë‚œí•˜ë©´ì„œë„ ë‚˜ì˜ì§€ ì•Šì€ ê²°ê³¼. ê³„ì† ë„ì „í•˜ì!',
37:'ğŸ”§ ì¡°ê¸ˆë§Œ ë” ë‹¤ë“¬ìœ¼ë©´ í›Œë¥­í•œ íˆ¬ììê°€ ë  ìˆ˜ ìˆë‹¤.',
38:'ğŸµ ì°¨ë¶„í•˜ê²Œ ì˜ ë²„í…¼ë‹¤. ë©˜íƒˆ ê´€ë¦¬ê°€ ì¢‹ë‹¤.',
39:'ğŸŒŠ íŒŒë„ì— íœ©ì“¸ë¦¬ì§€ ì•Šê³  ìê¸° í˜ì´ìŠ¤ë¥¼ ìœ ì§€í–ˆë‹¤.',
40:'ğŸ“— ë‚˜ì˜ì§€ ì•Šë‹¤! í‰ê·  ì´ìƒì˜ ì„±ê³¼.',
41:'ğŸ­ ë³€ë™ì„± ì†ì—ì„œ ë‚˜ë¦„ëŒ€ë¡œ ì˜ í•´ëƒˆë‹¤.',
42:'ğŸ§® ê³„ì‚°ì ì¸ ì ‘ê·¼ì´ ì–´ëŠ ì •ë„ íš¨ê³¼ë¥¼ ë´¤ë‹¤.',
43:'ğŸŒ» í–‡ë³• ì•„ë˜ í”¼ì–´ë‚˜ëŠ” í•´ë°”ë¼ê¸°ì²˜ëŸ¼, ì„±ì¥ ì¤‘!',
44:'ğŸ² ì•½ê°„ì˜ ìš´ì´ ë”°ë¼ì¤€ ê²°ê³¼. ë‹¤ìŒì—” ì‹¤ë ¥ìœ¼ë¡œ!',
45:'ğŸ›¡ï¸ ë°©ì–´ì  íˆ¬ìë¡œ ìì‚°ì„ ì˜ ì§€ì¼°ë‹¤.',
46:'âš–ï¸ ê· í˜• ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ìœ ì§€í•˜ë ¤ ë…¸ë ¥í•œ í”ì .',
47:'ğŸƒ ë°”ëŒì— í”ë“¤ë ¤ë„ ë¿Œë¦¬ëŠ” ë‹¨ë‹¨í–ˆë‹¤.',
48:'ğŸ“ ì •ì„ì ì¸ íˆ¬ì. í¬ê²Œ ìƒì§€ ì•Šì€ ê²ƒì´ ì¥ì .',
49:'ğŸ£ ë¯¸ë¼ë¥¼ ë¬¼ê¸°ë„ í•˜ê³ , í”¼í•˜ê¸°ë„ í–ˆë‹¤.',
50:'ğŸ“Š ì •í™•íˆ ì¤‘ê°„! ë°˜ì€ ì´ê¸°ê³  ë°˜ì€ ë°°ìš°ëŠ” ì¤‘.',
51:'ğŸŒ¥ï¸ íë¦° ë‚ ì”¨ ê°™ì€ ì„±ì . ë§‘ì•„ì§ˆ ê°€ëŠ¥ì„±ì€ ìˆë‹¤.',
52:'ğŸ” ë¶„ì„ì€ í–ˆìœ¼ë‚˜ ì‹¤í–‰ì´ ì•„ì‰¬ì› ë˜ í„´ë“¤ì´ ìˆë‹¤.',
53:'ğŸª ì‹œì¥ì´ë¼ëŠ” ì„œì»¤ìŠ¤ì—ì„œ ë‚˜ë¦„ ë²„í…¼ë‹¤.',
54:'ğŸ§Š ëƒ‰ì •í•¨ì„ ìœ ì§€í•˜ë ¤ í–ˆìœ¼ë‚˜ ê°€ë” í”ë“¤ë ¸ë‹¤.',
55:'ğŸ“¦ ë³´ìˆ˜ì ì¸ íˆ¬ìê°€ ì–‘ë‚ ì˜ ê²€ì´ ë˜ì—ˆë‹¤.',
56:'ğŸŒ§ï¸ ì•½ê°„ ì•„ì‰¬ìš´ ê²°ê³¼. ë‹¤ìŒì—” ë‰´ìŠ¤ë¥¼ ë” ì˜ ì½ì–´ë³´ì.',
57:'ğŸ¢ ê±°ë¶ì´ ì „ëµ... ëŠë¦¬ì§€ë§Œ ì•ˆì „í–ˆì„ê¹Œ?',
58:'ğŸ­ ë§¤ìˆ˜ì™€ ë§¤ë„ ì‚¬ì´ì—ì„œ ë§ì´ ê³ ë¯¼í•œ í”ì ì´ ë³´ì¸ë‹¤.',
59:'ğŸ§ª ì‹¤í—˜ì ì¸ íˆ¬ìë¥¼ ëª‡ ë²ˆ í–ˆëŠ”ë°, ê²°ê³¼ëŠ” ì• ë§¤.',
60:'ğŸ“‰ í‰ê·  ì´í•˜ì§€ë§Œ ì•„ì§ ê´œì°®ë‹¤. ê²½í—˜ì´ ì¬ì‚°!',
61:'ğŸŒ«ï¸ ì•ˆê°œ ì†ì„ ê±·ëŠ” ë“¯í•œ íˆ¬ìì˜€ë‹¤.',
62:'ğŸ¯ ëª©í‘œëŠ” ì¢‹ì•˜ìœ¼ë‚˜ ê³¼ë…ì´ ìê¾¸ ì›€ì§ì˜€ë‹¤.',
63:'ğŸ§© í¼ì¦ì˜ ëª‡ ì¡°ê°ì´ ë¹ ì§„ ëŠë‚Œì˜ ì „ëµ.',
64:'ğŸ‚ ê°€ì„ ë‚™ì—½ì²˜ëŸ¼ ìì‚°ì´ ì‚´ì§ ë–¨ì–´ì¡Œë‹¤.',
65:'ğŸ“ ë³µê¸°ê°€ í•„ìš”í•œ í„´ì´ ê½¤ ìˆì—ˆë‹¤.',
66:'ğŸš¶ ì²œì²œíˆ ê±·ë‹¤ ë³´ë‹ˆ ëª©ì ì§€ì—ì„œ ì¢€ ë©€ì–´ì¡Œë‹¤.',
67:'ğŸŒ¬ï¸ ë°”ëŒì˜ ë°©í–¥ì„ ì˜ëª» ì½ì€ í„´ì´ ëª‡ ë²ˆ ìˆì—ˆë‹¤.',
68:'ğŸˆ í’ì„ ì´ ìƒˆëŠ” ê²ƒì²˜ëŸ¼ ì¡°ê¸ˆì”© ë¹ ì ¸ë‚˜ê°”ë‹¤.',
69:'ğŸ”® ì˜ˆì¸¡ì´ ë¹—ë‚˜ê°„ íšŸìˆ˜ê°€ ì¢€ ë§ì•˜ë‹¤.',
70:'ğŸ“Š í•˜ìœ„ 30%. ë‰´ìŠ¤ ë¶„ì„ì— ë” ì§‘ì¤‘í•´ë³´ì.',
71:'ğŸŒŠ íŒŒë„ì— ì¢€ íœ©ì“¸ë¦° ëŠë‚Œ. ë‹¤ìŒì—” ë²„í…¨ë³´ì!',
72:'ğŸ² ìš´ì´ ë”°ë¼ì£¼ì§€ ì•Šì•˜ë‹¤. íƒ“í•  ê±´ í•˜ëŠ˜ë¿.',
73:'ğŸ§— ì˜¤ë¥´ë§‰ì´ í˜ë“¤ì—ˆì§€ë§Œ í¬ê¸°í•˜ì§€ ì•Šì€ ê±´ ëŒ€ë‹¨í•˜ë‹¤.',
74:'ğŸŒ§ï¸ ë¹„ ì˜¤ëŠ” ë‚ ì˜ íˆ¬ì... ìš°ì‚°ì´ í•„ìš”í–ˆë‹¤.',
75:'ğŸ“‰ í•˜ë½ì¥ì— ê³ ì „í–ˆë‹¤. ë‹¤ìŒì—” í—¤ì§€ ì „ëµì„!',
76:'ğŸ­ êµ°ì¤‘ì‹¬ë¦¬ì— ëª‡ ë²ˆ íœ©ì“¸ë¦° ê²ƒ ê°™ë‹¤.',
77:'ğŸ§Š ëƒ‰ì •í•¨ì„ ìƒì€ ìˆœê°„ë“¤ì´ ê²°ê³¼ì— ì˜í–¥ì„ ì¤¬ë‹¤.',
78:'ğŸª ì‹œì¥ì˜ ê´‘ëŒ€ì—ê²Œ ë‹¹í•œ ëŠë‚Œì´ ë“ ë‹¤ë©´, ë‹¹ì‹ ë§Œ ê·¸ëŸ° ê²Œ ì•„ë‹ˆë‹¤.',
79:'ğŸ“¦ íƒ€ì´ë°ì´ ì „ë°˜ì ìœ¼ë¡œ ì•„ì‰¬ì› ë‹¤.',
80:'ğŸ˜“ ìƒìœ„ 80%... ìˆ˜ì—…ë£Œë¼ê³  ìƒê°í•˜ì.',
81:'ğŸŒªï¸ í­í’ ê°™ì€ ì‹œì¥ì—ì„œ ë§ì´ í”ë“¤ë ¸ë‹¤.',
82:'ğŸ“ ì‹¤ìˆ˜ì—ì„œ ë°°ìš°ëŠ” ê²ƒì´ ì§„ì§œ íˆ¬ì ê³µë¶€ë‹¤.',
83:'ğŸ¢ ë¡¤ëŸ¬ì½”ìŠ¤í„°ë¥¼ íƒ€ë‹¤ ë©€ë¯¸ê°€ ì¢€ ë‚¬ì„ ê²ƒ ê°™ë‹¤.',
84:'ğŸ§® ê³„ì‚°ì´ ìê¾¸ ì–´ê¸‹ë‚¬ë‹¤. ì—°ìŠµì´ ë” í•„ìš”í•˜ë‹¤.',
85:'ğŸŒ‘ ì–´ë‘ìš´ í„°ë„ì´ì—ˆì§€ë§Œ ëì€ ìˆë‹¤!',
86:'ğŸ£ ë¬¼ê³ ê¸°ëŠ” ë„ë§ê°€ê³  ë¯¸ë¼ë§Œ ë‚¨ì•˜ë‹¤.',
87:'ğŸ“‰ ë§¤ìˆ˜ íƒ€ì´ë°ê³¼ ë§¤ë„ íƒ€ì´ë° ëª¨ë‘ ì¬ì ê²€ì´ í•„ìš”.',
88:'ğŸš¨ ìœ„í—˜ ì‹ í˜¸ë¥¼ ë¬´ì‹œí•œ ëŒ€ê°€ê°€ ì¢€ ì»¸ë‹¤.',
89:'ğŸŒ‹ í™”ì‚° ìœ„ì—ì„œ íˆ¬ìí•œ ëŠë‚Œì´ì—ˆì„ ê²ƒì´ë‹¤.',
90:'ğŸ˜° í•˜ìœ„ 10%... í•˜ì§€ë§Œ íŒŒì‚°í•˜ì§€ ì•Šì€ ê²Œ ì–´ë””ì•¼!',
91:'ğŸ° íˆ¬ìê°€ ì•„ë‹ˆë¼ ë„ë°•ì´ ë˜ì–´ë²„ë¦° ìˆœê°„ë“¤...',
92:'ğŸ“‰ ë‰´ìŠ¤ë¥¼ ì •ë°˜ëŒ€ë¡œ í•´ì„í•œ ê±´ ì•„ë‹Œì§€ ì ê²€í•´ë³´ì.',
93:'ğŸ§Š ì–¼ìŒ ìœ„ì—ì„œ ë¯¸ë„ëŸ¬ì§„ ëŠë‚Œì˜ íˆ¬ìì˜€ë‹¤.',
94:'ğŸŒŠ í° íŒŒë„ì— ì •ë©´ìœ¼ë¡œ ë§ì„œë‹¤ ì¢€ ë§ì´ ì –ì—ˆë‹¤.',
95:'ğŸ“¦ ê±°ì˜ ëª¨ë“  íŒë‹¨ì´ ì—‡ë‚˜ê°”ë‹¤. ì—­ë°œìƒì´ë©´ 1ë“±ì´ì—ˆì„ í…ë°!',
96:'ğŸ­ ìŠ¤ìº  ì½”ì¸ì— ë‹¹í•œ ê±´ ì•„ë‹Œì§€... í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ëŒì•„ë³´ì.',
97:'ğŸ’¸ ìì‚°ì´ ë…¹ì•„ë‚´ë ¸ë‹¤... ì¸ë²„ìŠ¤ë¡œ í–ˆìœ¼ë©´ ëŒ€ë°•ì´ì—ˆë‹¤.',
98:'ğŸš¨ íˆ¬ì ê°ì˜¥ì—ì„œ ì´ì œ ë§‰ ì¶œì†Œí•œ ëŠë‚Œ.',
99:'ğŸ†˜ êµ¬ì¡° ìš”ì²­! ëˆ„êµ°ê°€ ì´ íˆ¬ììì—ê²Œ ë„ì›€ì˜ ì†ê¸¸ì„!',
100:'ğŸ’€ ì „ì„¤ì ì¸ ì—­ëŒ€ê¸‰ ì†ì‹¤... ì˜¤íˆë ¤ ì´ ì •ë„ë©´ ì¬ëŠ¥ì´ë‹¤.'
};

function drawNormalCurve(canvas,topPct){
  const ctx=canvas.getContext('2d'),w=canvas.width,h=canvas.height;
  ctx.clearRect(0,0,w,h);
  const pad={l:35,r:15,t:10,b:28},gw=w-pad.l-pad.r,gh=h-pad.t-pad.b;
  function realPDF(x){
    const mu=-0.3,sig1=1.4,sig2=1.0;
    const s=x<mu?sig1:sig2;
    return Math.exp(-((x-mu)*(x-mu))/(2*s*s))/(s*2.507);
  }
  const zMin=-3.8,zMax=3.2,peak=realPDF(-0.3);
  // ë°°ê²½ ê·¸ë¦¬ë“œ
  ctx.strokeStyle='#1e2a3a';ctx.lineWidth=0.5;
  for(let i=0;i<=4;i++){const y=pad.t+gh*i/4;ctx.beginPath();ctx.moveTo(pad.l,y);ctx.lineTo(pad.l+gw,y);ctx.stroke();}
  // ê³¡ì„  ì•„ë˜ ì±„ìš°ê¸° (ì „ì²´: ì–´ë‘ìš´ ìƒ‰)
  ctx.beginPath();
  for(let i=0;i<=200;i++){const z=zMin+(zMax-zMin)*i/200,x=pad.l+(i/200)*gw,y=pad.t+gh-realPDF(z)/peak*gh*.92;
    i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.lineTo(pad.l+gw,pad.t+gh);ctx.lineTo(pad.l,pad.t+gh);ctx.closePath();
  ctx.fillStyle='rgba(107,114,128,0.15)';ctx.fill();
  // ë‚´ ìœ„ì¹˜
  const myFrac=1-topPct/100;
  const myZ=zMin+(zMax-zMin)*myFrac;
  // ë‚´ ìœ„ì¹˜ë³´ë‹¤ ì˜¤ë¥¸ìª½(ìƒìœ„) ì˜ì—­ ê°•ì¡°
  ctx.beginPath();
  const startI=Math.max(0,Math.floor(myFrac*200));
  for(let i=startI;i<=200;i++){const z=zMin+(zMax-zMin)*i/200,x=pad.l+(i/200)*gw,y=pad.t+gh-realPDF(z)/peak*gh*.92;
    i===startI?ctx.moveTo(x,pad.t+gh)&&ctx.lineTo(x,y):ctx.lineTo(x,y);}
  ctx.lineTo(pad.l+gw,pad.t+gh);ctx.closePath();
  const hueColor=topPct<=10?'rgba(34,197,94,0.35)':topPct<=30?'rgba(59,130,246,0.3)':topPct<=50?'rgba(245,158,11,0.25)':topPct<=70?'rgba(251,146,60,0.25)':'rgba(239,68,68,0.25)';
  ctx.fillStyle=hueColor;ctx.fill();
  // ê³¡ì„  ì„ 
  ctx.beginPath();ctx.strokeStyle='#6b7280';ctx.lineWidth=2;
  for(let i=0;i<=200;i++){const z=zMin+(zMax-zMin)*i/200,x=pad.l+(i/200)*gw,y=pad.t+gh-realPDF(z)/peak*gh*.92;
    i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}
  ctx.stroke();
  // 0% ìˆ˜ìµë¥  ê¸°ì¤€ì„  (ì†ìµë¶„ê¸°)
  const zeroFrac=(-zMin)/(zMax-zMin);
  if(zeroFrac>0&&zeroFrac<1){
    const zx=pad.l+zeroFrac*gw;
    ctx.beginPath();ctx.strokeStyle='#374151';ctx.lineWidth=1;ctx.setLineDash([2,3]);
    ctx.moveTo(zx,pad.t);ctx.lineTo(zx,pad.t+gh);ctx.stroke();ctx.setLineDash([]);
    ctx.fillStyle='#4b5563';ctx.font='9px sans-serif';ctx.textAlign='center';
    ctx.fillText('0%',zx,pad.t+gh+10);
  }
  // ë‚´ ìœ„ì¹˜ ìˆ˜ì§ì„ 
  const myX=pad.l+myFrac*gw,myY=pad.t+gh-realPDF(myZ)/peak*gh*.92;
  const myCol=topPct<=10?'#22c55e':topPct<=30?'#3b82f6':topPct<=50?'#f59e0b':topPct<=70?'#fb923c':'#ef4444';
  ctx.beginPath();ctx.strokeStyle=myCol;
  ctx.lineWidth=2.5;ctx.setLineDash([4,3]);ctx.moveTo(myX,pad.t+gh);ctx.lineTo(myX,myY);ctx.stroke();ctx.setLineDash([]);
  // ë‚´ ìœ„ì¹˜ ì 
  ctx.beginPath();ctx.arc(myX,myY,5,0,Math.PI*2);ctx.fillStyle=myCol;ctx.fill();
  ctx.beginPath();ctx.arc(myX,myY,8,0,Math.PI*2);ctx.strokeStyle=myCol+'80';ctx.lineWidth=2;ctx.stroke();
  // "ë‚˜" ë¼ë²¨
  ctx.fillStyle='#fff';ctx.font='bold 11px sans-serif';ctx.textAlign='center';
  ctx.fillText(t('curveMe'),myX,myY-12);
  // ë‚´ ìœ„ì¹˜ xì¶• ì•„ë˜ì— ìƒìœ„ n% í‘œì‹œ
  ctx.fillStyle=myCol;ctx.font='bold 16px sans-serif';ctx.textAlign='center';
  ctx.fillText(topPct+'%',myX,pad.t+gh+22);
  // í•˜ë‹¨ ì¶• ë¼ë²¨
  ctx.fillStyle='#4b5563';ctx.font='10px sans-serif';ctx.textAlign='center';
  const labels=[t('curveLow'),'','',t('curveMid'),'','',t('curveHigh')];
  for(let i=0;i<7;i++){ctx.fillText(labels[i],pad.l+gw*i/6,h-4);}
  // ì¢Œì¸¡ Yì¶• ë¼ë²¨
  ctx.fillStyle='#374151';ctx.font='9px sans-serif';ctx.textAlign='right';
  ctx.fillText(t('curveMany'),pad.l-5,pad.t+12);ctx.fillText(t('curveFew'),pad.l-5,pad.t+gh);
}

function endGame(reason){
  gameRunning=false;clearInterval(timerInterval);
  const tot=getTotalAsset(),pnl=(tot-START_CASH)/START_CASH*100;
  const topPct=reason==='bankrupt'?100:pnlToTopPercent(pnl);
  const rc_table=lang==='en'?RANK_COMMENTS_EN:RANK_COMMENTS;
  const comment=rc_table[topPct]||rc_table[50];
  const rankColor=topPct<=5?'#a78bfa':topPct<=10?'#22c55e':topPct<=25?'#3b82f6':topPct<=50?'#f59e0b':topPct<=75?'#fb923c':'#ef4444';
  // ì „ë©´ ê´‘ê³  ë¨¼ì € í‘œì‹œ
  showAdInterstitial(()=>{
    const ov=document.getElementById('overlay');ov.classList.remove('hidden');
    ov.querySelector('h1').textContent=reason==='bankrupt'?t('bankrupt'):reason==='finished'?t('finished'):t('endTitle');
    const rc=document.getElementById('result-card');rc.style.display='block';
    const pnlStr=reason==='bankrupt'?t('bankruptLabel'):(pnl>=0?'+':'')+pnl.toFixed(1)+'%';
    const pnlColor=reason==='bankrupt'?'var(--loss)':pnl>=0?'var(--profit)':'var(--loss)';
    // ì†Œë“ë¶„ìœ„ ê³„ì‚°
    const incomePct=Math.max(0,Math.min(100,100-topPct));
    const gr=t('grades');let incLabel,incColor;
    if(incomePct<20){incColor='#ef4444';incLabel=gr[0];}
    else if(incomePct<40){incColor='#f87171';incLabel=gr[1];}
    else if(incomePct<60){incColor='#fb923c';incLabel=gr[2];}
    else if(incomePct<80){incColor='#f59e0b';incLabel=gr[3];}
    else if(incomePct<90){incColor='#22c55e';incLabel=gr[4];}
    else if(incomePct<99){incColor='#3b82f6';incLabel=gr[5];}
    else{incColor='#a78bfa';incLabel=gr[6];}
    rc.innerHTML=`<div class="result-pnl" style="color:${pnlColor}">${pnlStr}</div>
      <div class="result-asset">${t('finalAsset')}: $${tot.toFixed(0)}</div>
      <div class="result-comment" style="color:${rankColor}">${comment}</div>
      <canvas class="result-curve" id="result-curve" width="420" height="160"></canvas>
      <div class="result-stats">
        ${t('cashLabel')}: $${cash.toFixed(0)} / ${t('coinLabel')}: $${getHV().toFixed(0)} / ${t('totalTurn')} ${Math.min(turn,MAX_TURNS)}${t('turnUnit')}<br>
        ${t('inflAccum')}: -$${inflTotal.toFixed(0)} / ${lang==='en'?'Grade':'ì†Œë“ë¶„ìœ„'}: <span style="color:${incColor};font-weight:700">${incLabel}</span>
      </div>`;
    document.getElementById('start-btn').textContent=t('restartBtn');
    ov.querySelector('.desc').style.display='none';
    setTimeout(()=>{
      const cv=document.getElementById('result-curve');
      if(window.innerWidth<=768){
        const w=Math.min(420,rc.offsetWidth-32);
        cv.width=w;cv.height=Math.round(w*160/420);
      }
      drawNormalCurve(cv,topPct);
    },80);
  });
}

function showAdInterstitial(callback){
  const ad=document.getElementById('ad-interstitial');
  const cdEl=document.getElementById('ad-countdown');
  ad.classList.remove('hidden');
  try{(adsbygoogle=window.adsbygoogle||[]).push({});}catch(e){}
  let sec=5;
  cdEl.textContent=t('adCountdown').replace('%s',sec);
  const iv=setInterval(()=>{
    sec--;
    if(sec>0){cdEl.textContent=t('adCountdown').replace('%s',sec);}
    else{clearInterval(iv);cdEl.textContent=t('adLoading');
      setTimeout(()=>{ad.classList.add('hidden');callback();},600);}
  },1000);
}

function showSysNews(msg){
  const el=document.getElementById('sys-news');el.textContent=msg;el.classList.remove('hidden');
  clearTimeout(el._t);el._t=setTimeout(()=>el.classList.add('hidden'),4000);
}

document.getElementById('start-btn').addEventListener('click',()=>startGame());

// â•â•â• ëª¨ë°”ì¼ ì‚¬ì´ë“œë°” í† ê¸€ â•â•â•
function toggleSidebar(){
  const sb=document.querySelector('.sidebar'),ov=document.getElementById('sidebar-overlay');
  sb.classList.toggle('open');ov.classList.toggle('show');
}

// â•â•â• ëª¨ë°”ì¼ ì£¼ë¬¸ íŒ¨ë„ í† ê¸€ â•â•â•
function toggleOrder(sym){
  const row=document.getElementById(`order-${sym}`);
  const btn=document.getElementById(`toggle-${sym}`);
  if(row.classList.contains('collapsed')){
    // ë‹¤ë¥¸ ì—´ë¦° íŒ¨ë„ ëª¨ë‘ ë‹«ê¸°
    document.querySelectorAll('.order-row:not(.collapsed)').forEach(r=>{
      if(window.innerWidth<=768&&r.id!==`order-${sym}`){
        r.classList.add('collapsed');
        const s=r.id.replace('order-','');
        const tb=document.getElementById(`toggle-${s}`);
        if(tb){const ov=orders[s];tb.textContent=ov?(ov>0?`${t('buy')}$${ov}`:`${t('sell')}$${Math.abs(ov)}`):`â–¼ ${lang==='en'?'Trade':'ì£¼ë¬¸'}`;}
      }
    });
    row.classList.remove('collapsed');
    btn.textContent=`â–² ${lang==='en'?'Close':'ë‹«ê¸°'}`;
  }else{
    row.classList.add('collapsed');
    const ov=orders[sym];
    btn.textContent=ov?(ov>0?`${t('buy')}$${ov}`:`${t('sell')}$${Math.abs(ov)}`):`â–¼ ${lang==='en'?'Trade':'ì£¼ë¬¸'}`;
  }
}

// â•â•â• ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë” ì£¼ë¬¸ â•â•â•
function onSliderInput(sym,val){
  val=parseInt(val);
  const el=document.getElementById(`slider-val-${sym}`);
  if(!el)return;
  if(val===0){el.textContent='';el.style.color='var(--muted)';return;}
  if(val>0){
    const ob=Object.entries(orders).reduce((s,[k,v])=>k!==sym&&v>0?s+v:s,0);
    const av=cash-ob;const amt=Math.max(0,Math.round(av*val/100));
    el.textContent=`${t('buy')} $${amt}`;el.style.color='var(--buy)';
  }else{
    const h=holdings[sym],p=prices[sym]||1;const hv=h?Math.floor(h.qty*p):0;
    const amt=Math.max(0,Math.round(hv*Math.abs(val)/100));
    el.textContent=amt>0?`${t('sell')} $${amt}`:(lang==='en'?'No holdings':'ë³´ìœ ë¶„ ì—†ìŒ');
    el.style.color=amt>0?'var(--sell)':'var(--muted)';
  }
}
function onSliderChange(sym,val){
  val=parseInt(val);
  if(delistedSet.has(sym)){showSysNews(`ğŸ’€ ${sym} ${t('noTrade')}`);resetSlider(sym);return;}
  if(val===0){orders[sym]=0;updateOD(sym);updatePS();return;}
  if(val>0){
    const ob=Object.entries(orders).reduce((s,[k,v])=>k!==sym&&v>0?s+v:s,0);
    const av=cash-ob;const amt=Math.max(0,Math.round(av*val/100));
    if(amt<=0){showSysNews(t('noCash'));resetSlider(sym);return;}
    orders[sym]=amt;
  }else{
    const h=holdings[sym],p=prices[sym]||1;const hv=h?Math.floor(h.qty*p):0;
    const amt=Math.max(0,Math.round(hv*Math.abs(val)/100));
    if(amt<=0){showSysNews(`${sym} ${t('noHold')}`);resetSlider(sym);return;}
    orders[sym]=-amt;
  }
  updateOD(sym);updatePS();
  // ìŠ¬ë¼ì´ë”ë¥¼ ì¤‘ì•™ìœ¼ë¡œ ë³µê·€ (ì£¼ë¬¸ì´ í™•ì •ë˜ì—ˆìœ¼ë¯€ë¡œ)
  setTimeout(()=>resetSlider(sym),300);
}
function resetSlider(sym){
  const sl=document.getElementById(`slider-${sym}`);
  const el=document.getElementById(`slider-val-${sym}`);
  if(sl)sl.value=0;
  if(el){
    const v=orders[sym]||0;
    if(v>0){el.textContent=`${t('buy')} $${v} âœ•`;el.style.color='var(--buy)';el.classList.add('has-order');}
    else if(v<0){el.textContent=`${t('sell')} $${Math.abs(v)} âœ•`;el.style.color='var(--sell)';el.classList.add('has-order');}
    else{el.textContent='';el.style.color='var(--muted)';el.classList.remove('has-order');}
  }
}
function cancelCoinOrder(sym){
  if(!orders[sym])return;
  const prev=orders[sym];
  orders[sym]=0;
  updateOD(sym);updatePS();resetSlider(sym);
  const name=COINS.find(c=>c.sym===sym);
  const label=name?coinName(name):sym;
  showSysNews(lang==='en'?`${label}(${sym}) order cancelled`:`${label}(${sym}) ì£¼ë¬¸ ì·¨ì†Œ`);
}
function cdOrder(sym,val){
  if(!gameRunning)return;
  if(delistedSet.has(sym)){showSysNews(`ğŸ’€ ${sym} ${t('noTrade')}`);return;}
  if(val==='buyAll'){buyAll(sym);
  }else if(val==='sellAll'){sellAll(sym);
  }else{setOrder(sym,val);}
  updateCdPending(sym);
}
function updateCdPending(sym){
  const el=document.getElementById(`cd-pending-${sym}`);if(!el)return;
  const v=orders[sym]||0;
  if(v>0) el.innerHTML=`<span style="color:var(--buy)">${t('buy')} $${v}</span>`;
  else if(v<0) el.innerHTML=`<span style="color:var(--sell)">${t('sell')} $${Math.abs(v)}</span>`;
  else el.innerHTML='';
}

// ê²°ê³¼ ìº”ë²„ìŠ¤ ëª¨ë°”ì¼ ë¦¬ì‚¬ì´ì¦ˆ
window.addEventListener('resize',()=>{
  const cv=document.getElementById('result-curve');
  if(cv&&cv.parentElement&&cv.style.display!=='none'){
    const w=Math.min(420,cv.parentElement.offsetWidth-32);
    cv.width=w;cv.height=Math.round(w*160/420);
  }
});

// â•â•â• ì–¸ì–´ ì „í™˜ â•â•â•
function switchLang(){
  lang=lang==='ko'?'en':'ko';
  document.getElementById('lang-ko').className=lang==='ko'?'active':'';
  document.getElementById('lang-en').className=lang==='en'?'active':'';
  // ì‚¬ì´ë“œë°” + ì˜¤ë²„ë ˆì´ ì–¸ì–´ í† ê¸€ ë™ê¸°í™”
  ['sb-lang-ko','ov-lang-ko'].forEach(id=>{const e=document.getElementById(id);if(e)e.className=lang==='ko'?'active':'';});
  ['sb-lang-en','ov-lang-en'].forEach(id=>{const e=document.getElementById(id);if(e)e.className=lang==='en'?'active':'';});
  document.documentElement.lang=lang;
  updateStaticUI();
  if(gameRunning){
    // ë‰´ìŠ¤ ë‹¤ì‹œ ë Œë”(ê¸°ì¡´ ë‰´ìŠ¤ ì¬ë²ˆì—­ì€ ë³µì¡í•˜ë¯€ë¡œ ë¼ë²¨ë§Œ ê°±ì‹ )
    renderNewsPanel();buildCoinCards();updateHeader();updateTurnGauge();updatePS();
  }
}
function updateStaticUI(){
  document.getElementById('logo-text').innerHTML='CRYPTO<br>TRADER';
  // í—¤ë” stat labels
  const labels=document.querySelectorAll('.stat-label');
  const lkeys=['cash','coinAsset','totalAsset','pnl'];
  labels.forEach((el,i)=>{if(lkeys[i])el.textContent=t(lkeys[i]);});
  document.querySelector('.timer-label').textContent=t('timeLeft');
  // ì‚¬ì´ë“œë°”
  const sbTitles=document.querySelectorAll('.sb-title');
  const sbKeys=['turnProgress','incomeLevel','newsTitle'];
  sbTitles.forEach((el,i)=>{if(sbKeys[i])el.textContent=T[lang][sbKeys[i]]||el.textContent;});
  // ì†Œë“ ticks
  const ticks=document.querySelectorAll('.income-ticks span');
  const gt=t('gradeTicks');
  ticks.forEach((el,i)=>{if(gt[i])el.textContent=gt[i];});
  // ì˜¤ë²„ë ˆì´
  const ov=document.getElementById('overlay');
  const ovH1=ov.querySelector('h1');if(!document.getElementById('result-card')||document.getElementById('result-card').style.display==='none')ovH1.textContent='CRYPTO TRADER';
  ov.querySelector('.desc').innerHTML=t('gameDesc');
  const startBtn=document.getElementById('start-btn');
  if(startBtn.textContent!==t('restartBtn'))startBtn.textContent=t('startBtn');
  const guideBtn=document.getElementById('guide-btn');if(guideBtn)guideBtn.textContent=t('guideBtn');
  // í•˜ë‹¨ ë°”
  document.querySelector('.submit-btn').innerHTML=t('submit');
  document.querySelector('.reset-btn').textContent=t('reset');
  // ê´‘ê³ 
  document.querySelector('.ad-label').textContent=lang==='en'?'AD':'ê´‘ê³ ';
  // ë©´ì±… ì¡°í•­
  const fd=document.getElementById('footer-disclaimer');if(fd)fd.textContent=t('footerDisclaimer');
  const od=document.getElementById('overlay-disclaimer');if(od)od.innerHTML=t('overlayDisclaimer')+'<br><a href="terms.html" style="color:#f59e0b;text-decoration:none;">'+(lang==='en'?'Terms':'ì´ìš©ì•½ê´€')+'</a> Â· <a href="privacy.html" style="color:#f59e0b;text-decoration:none;">'+(lang==='en'?'Privacy':'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨')+'</a> Â· <a href="guide.html" style="color:#f59e0b;text-decoration:none;">'+(lang==='en'?'Guide':'ê°€ì´ë“œ')+'</a>';
  // í‘¸í„° ë§í¬ í…ìŠ¤íŠ¸
  const fLinks=document.querySelectorAll('#game-footer > div:first-child a');
  const fTexts=lang==='en'?['Privacy Policy','Terms of Service','About/Contact','Game Guide']:['ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨','ì´ìš©ì•½ê´€','ì†Œê°œ/ì—°ë½ì²˜','ê²Œì„ ê°€ì´ë“œ'];
  fLinks.forEach((a,i)=>{if(fTexts[i])a.textContent=fTexts[i];});
}
</script>
</body>
</html>
